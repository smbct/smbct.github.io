<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2024-06-06T14:32:16+02:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">smbct‚Äôs blog</title><subtitle>Notes on computer science, programming, society and more.</subtitle><author><name>smbct</name></author><entry><title type="html">Un Paris - Stockholm en train üöÜ</title><link href="http://localhost:4000/voyage/train/climat/2024/05/27/stockholm_train.html" rel="alternate" type="text/html" title="Un Paris - Stockholm en train üöÜ" /><published>2024-05-27T10:00:00+02:00</published><updated>2024-05-27T10:00:00+02:00</updated><id>http://localhost:4000/voyage/train/climat/2024/05/27/stockholm_train</id><content type="html" xml:base="http://localhost:4000/voyage/train/climat/2024/05/27/stockholm_train.html"><![CDATA[<p>Cette ann√©e, mon travail m‚Äôa donn√© la chance d‚Äôassister √† une conf√©rence de recherche en Su√®de.
Malheureusement, les conf√©rences de chercheurs me renvoient une image de plus en plus n√©gative √† l‚Äôheure de l‚Äôurgence climatique.
Elles impliquent g√©n√©ralement que des centaines de personnes prennent l‚Äôavion pour passer quelques jours seulement √† l‚Äô√©tranger (potentiellement √† l‚Äôautre bout du monde) √† √©couter des pr√©sentations de travaux d‚Äôautres chercheurs.
L‚Äôimpacte individuel des d√©placements en avion en terme d‚Äô√©missions CO‚ÇÇ est √©norme.
Est-ce que ces d√©placements valent vraiment le coup dans un monde aux ressources fragiles, qui souffre √©norm√©ment de l‚Äôactivit√© humaine ?</p>

<p>En tout cas je suis d√©cid√© personnellement: aucuns de mes d√©placements ne justifient un impacte aussi n√©gatif.
Je choisis donc de me comporter de mani√®re stricte : soit j‚Äôeffectue mes d√©placements en train ou bus, soit je ne ne me d√©place pas !
Dans ce cas-ci, le laboratoire qui m‚Äôemploie n‚Äôa pas √©mis d‚Äôobjections pour que je m‚Äôy rende en train.
Une aubaine pour moi car ce type de voyage m‚Äôint√©ressait depuis un certain temps !</p>

<p><img src="/assets/stockholm/suede_1.jpg" alt="Un chemin de fer." /></p>

<h2 id="mon-plan-de-voyage">Mon plan de voyage</h2>

<p>J‚Äôai donc planifi√© mon Paris-Stockholm en train.
Plus pr√©cis√©ment, ma destination finale dans ce voyage est en fait Uppsala, une petite ville un peu plus au nord par rapport √† Stockholm.
Ce trajet est particuli√®rement opportun pour moi car, ayant des amis qui vivent √† Stockholm, j‚Äôai d√©cid√© de m‚Äôy arr√™ter quelques jours avant la conf√©rence.
Je pouvais ensuite rejoindre Uppsala en train pour un trajet de 40 minutes environ.</p>

<p>Le plus directe pour rejoindre Stockholm en train depuis la France est de passer par le Danemark.
En effet, il existe des ponts au Danemark et entre le Danemark et la Su√®de pour connecter les diff√©rentes √Æles, empruntables en voiture mais √©galement <a href="https://fr.wikipedia.org/wiki/Ligne_de_Copenhague_%C3%A0_Malm%C3%B6">en train</a> !</p>

<p><img src="https://upload.wikimedia.org/wikipedia/commons/0/06/%C3%96resundsbron_fr%C3%A5n_Lernacken.jpg" alt="Le pont de l'√òresund entre le Danemark et la Su√®de." />
Le <a href="https://fr.wikipedia.org/wiki/Pont_de_l%27%C3%98resund">pont de l‚Äô√òresund</a> entre le Danemark et la Su√®de.</p>

<p>Pour rejoindre le Danemark, il parait √©vident de passer par Hambourg, une des plus grandes villes d‚ÄôAllemagne et relativement proche de la fronti√®re avec le Danemark.
Voulant effectuer le trajet rapidement en √©vitant au maximum les nuits d‚Äôh√¥tel, j‚Äôai d√©cid√© d‚Äôeffectuer le trajet entre Hambourg et Stockholm de nuit, ce qui est possible gr√¢ce √† un train de nuit direct op√©r√© par la soci√©t√© ferroviaire su√©doise (la ligne compl√®te va en fait de Berlin √† Stockholm, et inversement).
L‚Äôautre partie du trajet consiste donc √† effectuer un Paris - Hambourg, ce qui est faisable √† la journ√©e.</p>

<p>Pour les non parisiens, il faut √©ventuellement rajouter √† cela une √©tape suppl√©mentaire que je ne d√©taille pas ici pour rejoindre Paris (soit la veille, soit suffisamment t√¥t).
Cette √©tape peut probablement √™tre saut√©e pour les personnes vivant dans l‚Äôest de la France.</p>

<p><img src="https://i.pinimg.com/originals/e3/b3/5c/e3b35c9e96b9c906e0b2c68ec5db783d.gif" alt="Carte des chemins de fer en Europe." />
Carte des chemins de fer en Europe, emprunt√©e de <a href="https://trainmaps.netlify.app/rail-europe-train-maps.html">Train World</a>.</p>

<p>Pour r√©capituler, l‚Äôid√©e est donc de partir de Paris au matin pour me rendre √† Hambourg en fin d‚Äôapr√®s-midi.
Ce trajet √©tait pr√©vu initialement avec une unique correspondance en Allemagne.
Apr√®s cela, le train de nuit au d√©part d‚ÄôHambourg me permet d‚Äôarriver √† Stockholm dans la matin√©e de la journ√©e suivante.
<strong>Plut√¥t simple, n‚Äôest-ce pas ?</strong></p>

<h3 id="les-premiers-soucis-avant-le-d√©part">Les premiers soucis avant le d√©part</h3>

<p>J‚Äô√©tais √©videmment conscient avant de partir qu‚Äôun tel trajet en train est assez risqu√© : il suffit qu‚Äôun train saute et qu‚Äôune correspondant ne soit pas possible pour que cela se r√©percute sur tous les autres trains.
Pire encore, le trajet √©tant compos√© par mes soins √† partir de deux parties distinctes, les diff√©rentes compagnies ferroviaires n‚Äôont aucune obligation d‚Äôassurer ces correspondances et de nous assister en cas de probl√®mes.</p>

<p>Pour anticiper les probl√®mes, j‚Äôai effectu√© les r√©servations le plus t√¥t possible et de mani√®re flexible, permettant d‚Äô√©changer les billets tardivement en cas de besoin.
Voyageant dans un cadre professionnel, je suis pass√© par le prestataire en contrat avec mon employeur
Des travaux pr√©vus sur les voies concern√©es ont cependant retard√© cette √©tape de r√©servation car</p>

<p>Les premiers soucis sur ce voyage se sont pr√©sent√©s avant le d√©part.
Un mail envoy√© le jour du d√©part (train de nuit le soir) de la part de la Deutsche Bahn indique que la correspondance du trajet pr√©vu le lendemain ne peut √™tre assur√©e et invite a choisir parmi 3 trajets alternatifs propos√©s.</p>

<p><img src="/assets/stockholm/db_message.png" alt="Le message en question." /></p>

<h2 id="le-voyage-all√©e-et-ses-gal√®res">Le voyage all√©e et ses gal√®res</h2>

<p>l‚ÄôAllemagne fait partie des pays ou il y a le plus de retards de train.</p>

<h3 id="laventure-avec-la-deutsche-bahn">L‚Äôaventure avec La Deutsche Bahn</h3>

<p>Une fois le stresse √©vacu√©, je peux enfin me poser dans le train, tapoter un peu sur l‚Äôordinateur et suivre assid√ªment le d√©filement des noms de grandes villes dont j‚Äôai d√©j√† entendu parler pour la plupart, pendant que le train effectue sa travers√©e de l‚ÄôAllemagne.</p>

<p><img src="/assets/stockholm/arrivee_hambourg.jpg" alt="Arriv√©e √† Hambourg !" />
Arriv√©e √† Hambourg !</p>

<h3 id="gal√®res-au-danemark">Gal√®res au Danemark</h3>

<h3 id="la-journ√©e-bonus">La journ√©e bonus</h3>

<p>Dans le train je rep√®re encore d‚Äôautres fran√ßais.
Je comprend alors que beaucoup doivent √™tre en train de voyager avec l‚Äôinter-rail, ce qui rend le trajet plus robuste et moins cher !</p>

<p><img src="/assets/stockholm/pont_danemark_suede.jpg" alt="Passage sur le pont de l'√òresund !" />
Passage sur le pont de l‚Äô√òresund !</p>]]></content><author><name>smbct</name></author><category term="voyage" /><category term="train" /><category term="climat" /><summary type="html"><![CDATA[Cette ann√©e, mon travail m‚Äôa donn√© la chance d‚Äôassister √† une conf√©rence de recherche en Su√®de. Malheureusement, les conf√©rences de chercheurs me renvoient une image de plus en plus n√©gative √† l‚Äôheure de l‚Äôurgence climatique. Elles impliquent g√©n√©ralement que des centaines de personnes prennent l‚Äôavion pour passer quelques jours seulement √† l‚Äô√©tranger (potentiellement √† l‚Äôautre bout du monde) √† √©couter des pr√©sentations de travaux d‚Äôautres chercheurs. L‚Äôimpacte individuel des d√©placements en avion en terme d‚Äô√©missions CO‚ÇÇ est √©norme. Est-ce que ces d√©placements valent vraiment le coup dans un monde aux ressources fragiles, qui souffre √©norm√©ment de l‚Äôactivit√© humaine ?]]></summary></entry><entry><title type="html">Solving a pokemon puzzle with SAT solvers</title><link href="http://localhost:4000/sat/logic/puzzle/games/model-checking/2023/05/15/pokemon-puzzle.html" rel="alternate" type="text/html" title="Solving a pokemon puzzle with SAT solvers" /><published>2023-05-15T10:00:00+02:00</published><updated>2023-05-15T10:00:00+02:00</updated><id>http://localhost:4000/sat/logic/puzzle/games/model-checking/2023/05/15/pokemon-puzzle</id><content type="html" xml:base="http://localhost:4000/sat/logic/puzzle/games/model-checking/2023/05/15/pokemon-puzzle.html"><![CDATA[<p>I recently came across an interesting logic puzzle found in a pokemon (unofficial) fangame.
As everyone knows, Pokemon is a famous role playing game license from nintendo where your goal is to train small creatures that fight each other.
While the core of pokemon gameplay is centered toward the training of pokemons, the player would encounter some logic puzzles on his way. For instance, the next image show one of these puzzles taken from pokemon emerald.</p>

<p><img src="https://lparchive.org/Pokemon-Emerald-(by-Crosspeice)/Update%2025/8-e23009.png" alt="A puzzle from the pokemon game emerald." /></p>

<p>While these puzzles are usually relatively simple and solvable by everyone, it is possible to find much more challenging ones in unofficial games.
The puzzle I am interesting in takes place in <a href="https://www.rebornevo.com/pr/index.html/">pokemon reborn</a>.
This particular puzzle caught my attention as it is similar to constraint problems in computer science.
I decided to apply techniques that I studied during my master degree to solve it.</p>

<hr />

<h1 id="the-puzzle">The puzzle</h1>

<h2 id="overview">Overview</h2>

<p>The puzzle in question is represented by two 3x3 grids of digits, as it is shown below.
The goal of the puzzle is to manipulate the grids throw a set of operations so that you end up with a sum of digits equal to 15 for each rows, each columns and each diagonal of the grids (these grids are called <a href="https://en.wikipedia.org/wiki/Magic_square">Magic Squares</a>).</p>

<p><img src="/assets/pokemon_puzzle.png" alt="The puzzle ingame." /></p>

<p>There are two type of operations in the grids.
First, it is possible to move a column down or up.
All the columns can be moved independently and when a digit is on the border of the grid, moving the olumn places it at the other extremity.
Second, it is possible to move the rows left or right.
For this operation, the two grids are connected together and when a digit leaves one grid, it appears on the second one.
This interconnection between the grids make the puzzle challenging as trying to satisfy one of the row or column on one grid may perturb the other one.
Here is one example for each operation:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4 9 6  .  1 2 5                                         5 9 6  .  1 2 5
5 8 3  .  7 7 9   Move First Column Left Grid Up -&gt;     2 8 3  .  7 7 9
2 4 1  .  6 3 8                                         4 4 1  .  6 3 8

-----------------------------------------------------------------------

5 9 6  .  1 2 5                                         5 9 6  .  1 2 5
2 8 3  .  7 7 9   Move Second Row Left -&gt;               8 3 7  .  7 9 2
4 4 1  .  6 3 8                                         4 4 1  .  6 3 8

</code></pre></div></div>

<h2 id="how-i-solve-it">How I solve it</h2>

<p>To solve this puzzle, I decided to use a type of program called <a href="https://en.wikipedia.org/wiki/SAT_solver">SAT Solvers</a>.
These programs are made to automatically solve logic formula: they search for <strong>true/false</strong> values for logic variables to make the formula true.
For instance, if the formula is <code class="language-plaintext highlighter-rouge">(a =&gt; b) and c</code>, this formula would be true when <code class="language-plaintext highlighter-rouge">a = false, b = false or true, c = true</code> or <code class="language-plaintext highlighter-rouge">a = true, b = true, c = true</code>. 
Finding the right values for the variables so that the formula is true is actually the goal of the so called SAT problem.</p>

<p>For this method, our goal is to create an <em>encoding</em> of the puzzle, in this case define a logic formula that is true when a solution of the puzzle is found.</p>

<hr />

<h1 id="encoding-the-puzzle-into-a-logic-formula">Encoding the puzzle into a logic formula</h1>

<p>The encoding of the problem consists in representing the sequence of operations performed on the grids with logic operations on logic variables, and ensuring that after the last operations the sums are verified on the rows and columns.
There are two parts in this step.
The first part is to decide what are the logic variables and how they represent the problem.
Once it is decided, the variables need to be linked between each other through logic operations, which is the second part.</p>

<h2 id="encoding-the-grids">Encoding the grids</h2>

<p>The main variables of the problem will represent its <strong>states</strong>.
In this context, the states of the puzzle are the two grids at different step of evolution.
Indeed, we need to keep track of each evolution of the grid in the formula to make sure that every transformation is valid.</p>

<p>To represent one grid in this problem, we can use 3*3 sets of 9 variables. For each cell of a grid, the 9 variables will represent all the digits, assuming the digit showing up in that cell will have its corresponding variable <strong>true</strong>.
This representation can be used to encode the two grids at each step of the operations.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
-------------------------------
|         |         |         |
| v_0_0_k | v_0_1_k | v_0_2_k |
|         |         |         |
-------------------------------   k = {1,..,9}
|         |         |         |
| v_1_0_k | v_1_1_k | v_1_2_k |             / true if the cell at row i and column j = k 
|         |         |         |   v_i_j_k =    
-------------------------------             \ false if the cell at row i and column j != k 
|         |         |         |
| v_2_0_k | v_2_1_k | v_2_2_k |
|         |         |         |
-------------------------------

</code></pre></div></div>

<p>In order to represent multiple operations performed on the grids, we will need more than one state.
Thus, we will decide a number <strong>n</strong> of states for our encoding, and create in total <strong>n</strong> group of state variables.
The first state will then represent the initial grids (as seen on the in game picture), and the n-th state will be the two grids verifying the sum constraints.</p>

<p>We will additionally add variables to represent the different operations performed on the grid.
There will be in total 18 variables for each step (6 * 2 variables for the columns operations (column index, Up Down) and 3*2 variables for the rows (row index and Left/Right)).
Hence, we will have (n-1) group of variables for the operations, one between each consecutive states:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> (state_1, operations_1) -&gt; (state_2, operations_2) -&gt; ... -&gt; (state_n, operations_n)
</code></pre></div></div>

<h2 id="encoding-the-operations">Encoding the operations</h2>

<p>Once the variables are decided, we need to link them with logic operations into a formula that would be true only if the values of the variables correspond to a solution of the puzzle.
This step can be interpreted as adding <strong>constraints</strong> to our formula. The different constraints will be linked with a <strong>And</strong> operation so that they will be all satisfied when the formula is true.</p>

<p>One way of looking at it this modeling task is to consider that with an empty formula, the values of the variables can be anything, it will always be true.
However, this will not likely correctly represent the states of our puzzle (for instance we may have two digits true in the same cell).
Hence, the logic operations will make sure that the representation is consistent.
The constraints needed here can be divided into thee parts: 1) setting the initial state of the puzzle, 2) imposing the sum constraints on the last state and 3) creating the transitions between each state.</p>

<h3 id="1-first-state-constraint">1) First state constraint</h3>

<p>The first step is straightforward. Given the initial grids shown in the game (see picture), we will create a <strong>And</strong> operation between the digits that needs to be true and the negation of the digits that need to be false.
For instance, for the upper left corner of the first grid, there is a 4, thus:
 <code class="language-plaintext highlighter-rouge">v_0_0_4 = true and v_0_0_1 = false and v_0_0_2 = false and v_0_0_3 = false and v_0_0_5 = false and .. and v_0_0_9 = false</code> will be our constraint for this first cell.
Since the variables are joined using a And, it is not necessary to make the true/false appear here, which gives:
<code class="language-plaintext highlighter-rouge">v_0_0_4 and (not v_0_0_1) and (not v_0_0_2) and (not v_0_0_3) and (not v_0_0_5) and .. and (not v_0_0_9)</code> as a final constraint.
This step can be repeated for all the cells of the initial state.</p>

<h3 id="2-last-state-constraints">2) Last state constraints</h3>

<p>For this last step, one difficulty is the translation of the numerical sum into a logic constraint. To simplify this step, we can introduce for each row, column and diagonal a set of 9 digit variables that will be independent from their position in the grid.
From this, it is possible to enumerate all the subsets of 3 digits that sum up to 15 and proceed similarly to step 1) to enforce one of this sum to be verified.
The digit variables can be linked to the grids from the last state by adding implications. For example <code class="language-plaintext highlighter-rouge">digit_5_row_0 =&gt; v_0_1_5 or v_0_2_5 or v_0_3_5</code>.</p>

<h3 id="3-transition-constraints">3) Transition constraints</h3>

<p>The last step is trickier.
Here, we need to somehow verify through logic constraints that any modification occurring on the grids between two states is consistent regarding the puzzle‚Äôs rules.
For this step we will once agin use implications, between consecutive states this time.
For instance, taking the upper left corner cell of the first grid, we need to verify that the digit that is true at state i+1 is either the result of an operation or was already true at state i.
In case the digit was true at state i, we also need to check that no operation was performed on the same row or column.</p>

<p>For example, having a 3 in the cell at row 1 and column 0 implies either:</p>

<ul>
  <li>there was already a 3 and the second row and the first column did not move</li>
  <li>the column moved and there was a 3 below or above</li>
  <li>the row moved and there was a three before or after this position</li>
</ul>

<p>Encoding the column move would be done as following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                           -------------                 
                           | 3 | _ | _ |                                  
                           -------------                                   
                           | _ | _ | _ |   and column operation Down               
                           -------------
-------------              | _ | _ | _ |
| _ | _ | _ |              -------------     
-------------               
| 3 | _ | _ |    Implies        or
-------------               
| _ | _ | _ |              ------------- 
-------------              | _ | _ | _ |
                           -------------                               
                           | _ | _ | _ |   and column operation Up    
                           -------------    
                           | 3 | _ | _ |      
                           -------------    
                               
State n                     State n-1
</code></pre></div></div>

<p>For the operations on the row, we will see something like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                                        -------------   -------------
                                        | _ | _ | _ |   | _ | _ | _ |
                                        -------------   -------------
                                        | _ | 3 | _ |   | _ | _ | _ |  and row operation Left
                                        -------------   -------------
-------------   -------------           | _ | _ | _ |   | _ | _ | _ |
| _ | _ | _ |   | _ | _ | _ |           -------------   -------------
-------------   -------------             
| 3 | _ | _ |   | _ | _ | _ |  Implies                or
-------------   -------------            
| _ | _ | _ |   | _ | _ | _ |           -------------   ------------- 
-------------   -------------           | _ | _ | _ |   | _ | _ | _ |
                                        -------------   -------------
                                        | _ | _ | _ |   | _ | _ | 3 |  and row operation Right
                                        -------------   ------------- 
                                        | _ | _ | _ |   | _ | _ | _ |   
                                        -------------   ------------- 
                               
           State n                                State n-1
</code></pre></div></div>

<h1 id="lets-code-the-program">Let‚Äôs code the program</h1>

<p>Now that the encoding is ready to be implemented, the last part consists in putting all the pieces together into one final program. 
The program will take as input the digits in the two cells and a number of steps to solve the puzzle.
From these data, it will automatically create the logic formula corresponding to the puzzle and will call a SAT solver to solve the formula.
Once it is done, the program can extract the solution and display it in a human readable form.
Without detailing everything in the implementations, I will still give few precisions.</p>

<h2 id="writing-the-automatic-encoding">Writing the automatic encoding</h2>

<p>Usually, the code necessary to implement an encoding is not the easiest to read and interpret.
Nonetheless, having well documented data structure really helps in the process.
The final goal of this task is the creation of the logic formula to be sent to the SAT solver.
One important thing is that SAT solvers usually take as input a specific form of logic formulas called <a href="https://en.wikipedia.org/wiki/Conjunctive_normal_form">Conjunctive Normal Form</a>.
Luckily, it is always possible to introduce new variable to transform any formula into this type.
For this project, I used a piece of code that I wrote during my studies that specifically perform this transformation.
It is based on that (approach)[https://en.wikipedia.org/wiki/Tseytin_transformation].</p>

<h2 id="finding-a-suitable-sat-solver">Finding a suitable SAT solver</h2>

<p>Finding a SAT solver able to solve the formula is not an easy task either.
I first started to experiment with a number of state equals to 20 in the encoding.
The resulting formula ends up having a very large number for logical variables, make it solution difficult to find.
It is although good to know that SAT competitions take place every year to encourage the development of performent SAT solvers.
I started looking at state of the art solvers from <a href="https://satcompetition.github.io/2022/">the 2022 edition</a> and I ended up selecting a solver called <a href="https://github.com/arminbiere/kissat">Kissat</a>. Kissat was able to solve the puzzle whin few minutes on my laptot.</p>

<h2 id="final-code-and-solution">Final code and solution</h2>

<p>The code that I wrote for this program is available on <a href="https://github.com/smbct/blog_code/tree/master/pokemon">github</a>.
The folder contains a c++ program creating the encoding with a sequence of 20 states and calling the sat solver to solve the formula.
It also contains an installation script which download the SAT solver and compile the program with gcc.</p>

<p>Here is a solution I found with kissat (states only):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4 9 6     1 2 5         4 4 6     1 2 5         4 4 1     1 2 5        4 4 1     1 2 5        4 4 1     7 2 5         4 1 7     2 5 4        4 1 6     2 5 4        4 1 6     2 5 4 
5 8 3     7 7 9   -&gt;    5 9 3     7 7 9   -&gt;    5 9 6     7 7 9   -&gt;   5 9 6     7 7 9   -&gt;   5 9 6     3 7 9    -&gt;   5 9 6     3 7 9   -&gt;   5 9 7     3 7 9   -&gt;   9 5 9     7 3 7    -&gt;   
2 4 1     6 3 8         2 8 1     6 3 8         2 8 3     6 3 8        8 3 6     3 8 2        8 3 6     1 8 2         8 3 6     1 8 2        8 3 6     1 8 2        8 3 6     1 8 2 


4 5 6     2 5 4         4 5 6     2 5 4         4 4 5     6 2 5        4 4 9     6 2 5        4 4 9     6 8 5         4 4 9     6 8 5        4 4 9     2 8 5        4 5 9     2 8 5 
9 3 9     7 3 7    -&gt;   9 3 6     7 3 7   -&gt;    9 3 6     7 3 7   -&gt;   9 3 5     7 3 7   -&gt;   9 3 5     7 2 7    -&gt;   3 5 7     2 7 9   -&gt;   3 5 7     1 7 9   -&gt;   3 1 7     1 7 9    -&gt;
8 1 6     1 8 2         8 1 9     1 8 2         8 1 9     1 8 2        8 1 6     1 8 2        8 1 6     1 3 2         8 1 6     1 3 2        8 1 6     6 3 2        8 4 6     6 3 2 


4 4 9     2 8 5         4 9 2     8 5 4         4 9 2     8 3 4 
3 5 7     1 7 9    -&gt;   3 5 7     1 7 9   -&gt;    3 5 7     1 5 9 
8 1 6     6 3 2         8 1 6     6 3 2         8 1 6     6 7 2

</code></pre></div></div>

<p>This solution contains 18 states and has been found in 145 seconds on my laptop by the kissat solver.</p>

<h1 id="final-word">Final word</h1>

<p>We can see that tools such as SAT solvers are available for automatic reasoning and hard problem solving.
Although this might not work all the time, having a try may usually be a (relatively fast) solution to obtain first hints into some problem.
In this case, the encoding aspect is not easy as SAT solvers speak a relatively basic language (logic formulas) and are not the most suitable tools for reasoning with numbers and spatial data (such as grids).</p>

<p>By searching on the internet it is possible to find much more elegant <a href="https://www.rebornevo.com/forums/topic/48625-magic-square-puzzle-guide/">solutions</a> to this problem.
The fact that this problem ends up being quite challenging for SAT solvers is a interesting.
The solving time may be improved by trying to reduce the size of the encoding.
However, using solvers more expressive than SAT (for example linear programming) may help on this puzzle as it is not easy to be expressed in pure logic.
There are also other automatic ways of solving it such as tree search algorithms like A* or Monte Carlo Tree Search.
This type of algorithms was actually historically used for making AI for chess and alike games.</p>

<p>A later interesting aspect of this puzzle is the process of its creation.
Indeed mathematical puzzles can emerge from various ideas and topics and it is not possible to know if there is a solution until either one is found or it is proven impossible.
In this example, it would have been possible to generate the puzzle by starting from the last state and applying reverse operations (as the operations are deterministic).
However, this seems not to be the origin of this puzzle as discussed in the solution link I mentioned above, and the original story seems more engaging.
Let‚Äôs see what would be my next challenging puzzles!</p>]]></content><author><name>smbct</name></author><category term="SAT" /><category term="logic" /><category term="puzzle" /><category term="games" /><category term="model-checking" /><summary type="html"><![CDATA[I recently came across an interesting logic puzzle found in a pokemon (unofficial) fangame. As everyone knows, Pokemon is a famous role playing game license from nintendo where your goal is to train small creatures that fight each other. While the core of pokemon gameplay is centered toward the training of pokemons, the player would encounter some logic puzzles on his way. For instance, the next image show one of these puzzles taken from pokemon emerald.]]></summary></entry><entry><title type="html">Can deep neural networks learn the rules of chess ?</title><link href="http://localhost:4000/deep-learning/chess/games/combinatorics/2022/05/30/chess-rules.html" rel="alternate" type="text/html" title="Can deep neural networks learn the rules of chess ?" /><published>2022-05-30T10:00:00+02:00</published><updated>2022-05-30T10:00:00+02:00</updated><id>http://localhost:4000/deep-learning/chess/games/combinatorics/2022/05/30/chess-rules</id><content type="html" xml:base="http://localhost:4000/deep-learning/chess/games/combinatorics/2022/05/30/chess-rules.html"><![CDATA[<p>As I recently defended my thesis, and since I am now looking for a job, I decided to dedicate to myself some time to study cutting edge computer science topics. Deep learning is one very famous (and somehow <a href="https://www.youtube.com/watch?v=fe9u6YQTsWY">controversial</a>) topic that I didn‚Äôt have the occasion to experiment with so far. Thus I started playing with dl frameworks such as pytorch and recently I decided to implement an old idea that I had back during my thesis: inducing the rules of chess using a machine learning algorithm.</p>

<p>To be clear, the goal here is not to create an algorithm able to <strong>play</strong> chess such as <a href="https://www.deepmind.com/research/highlighted-research/alphago">alphago</a>, but rather to create an algorithm able to <strong>discover</strong> the rules, and able to propose the next moves from a given board configuration. I got this idea from my PhD work on inductive logic programming, a form of machine learning applied to logical models. For example, imagine that you are looking at two people playing an unknown game: is it possible to understand the rules just by looking people play ?</p>

<hr />

<h1 id="introduction">Introduction</h1>

<p>For this project, I decided to use the deep learning framework <a href="https://pytorch.org/">pytorch</a>. I started by creating a python program that is able to show a board in different configurations using <a href="https://matplotlib.org/">matplotlib</a> with these <a href="https://commons.wikimedia.org/wiki/Category:PNG_chess_pieces/Standard_transparent">images</a>. I used the very nice <a href="https://python-chess.readthedocs.io/en/latest/">python-chess</a> package as a chess engine to simplify the work. With these elements, I was already able to visualize all the board configuration form a given game, with the possible moves for each piece (see below).</p>

<p><img src="/assets/chess_rules/chess_interface.png" alt="The chess interface" /></p>

<p>The chess interface.</p>

<h2 id="the-dataset">The dataset</h2>

<p>Since I needed a dataset for this project, I used this <em>csv</em> of <a href="https://www.kaggle.com/datasets/datasnaek/chess">chess games</a>, where the games are given in the form of lists of moves (easy to process with python-chess).</p>

<p>At this stage, I decided to simplify the learning task because predicting the possible (legal) moves from a board configuration implies using a model with a <strong>varying output size</strong>, something difficult to achieve with deep neural nets. I choose to <strong>simplify</strong> the problem by predicting only the possible destinations for a given pieces, ignoring the interaction with the other pieces (which is quite cheating considering the initial idea, but interesting as a first step). I made a <strong>second simplification</strong> assuming that all the possible moves from the board position are known (which is not the case in my previous description since only one possible move can be seen when someone plays).</p>

<blockquote class="prompt-info">
  <p>To sum up, if we take the illustration above, our main goal here is to produce a model able to predict a list of moves (the blue arrows) from a given board configuration (position of the pieces), assuming that from a given board configuration in the dataset, all the arrows are known.</p>
</blockquote>

<h2 id="fetching-the-model-inputsoutputs">Fetching the model inputs/outputs</h2>

<p>In order to obtain a usable dataset for fitting the model, I generated all the board configurations from the moves of all the games in the csv. I then generated all the possible moves from these configurations and I subsampled the data to limit its size.</p>

<hr />

<h1 id="encoding-the-data">Encoding the data</h1>

<p>A very important aspect of a deep learning application is the encoding of the data.
More precisely, neural networks would not be able to process high level information such as a list of moves and a board configuration with piece types.
For this reason, it is necessary to encode the data in such a way that the model will be able to link the input and the output through its complex computations.
For instance, coding the piece type on the board with an integer won‚Äôt be efficient since it would be too difficult for the model to decompose the integer.</p>

<h2 id="encoding-the-input">Encoding the input</h2>

<p>In our case, the input consists in a board configuration plus a piece to move.
An important aspect of chess is that the board is two-dimensional.
This means that the moves of one piece depend on the content of its surrounding squares.
For this reason, we are going to use <a href="https://deepai.org/machine-learning-glossary-and-terms/convolutional-neural-network">convolutional layers</a> for the model architecture, a type of function that is efficient for treating spatial data such as images (more on the model architecture below).
This implies that the encoding should conserve the spatial organisation of the board (with two dimensional data structures).</p>

<p>The input of the model is the hardest element to encode. As I said previously, piece types cannot be encoded as simple numbers, as they represent categorical variables.
One popular way to encode categorical variables in deep learning is the <a href="https://deepai.org/machine-learning-glossary-and-terms/one-hot-encoding">one hot encoding</a>, consisting in a vector of 0 and 1, with only one index equal to one depending on the class that is coded.
Our encoding here will be based on same principle, inspired from the encoding used in existing <a href="https://erikbern.com/2014/11/29/deep-learning-for-chess.html">chess AI‚Äôs</a> (including the alphazero model).
The categorical input will be implemented as a spatial dimension of the board in order to help the model consider several piece types at the same time.
Thus, the final encoding of a board will be a 3d array, where the depth dimension (depth = 2*6) represents the type of piece.
By doing so, the model will be able to perform computations involving different types of pieces at the same time.
You can visualize the idea of the board encoding on the figure below, where the first board layers have been shown for the white pieces.</p>

<p><img src="/assets/chess_rules/chess_encoding.png" alt="The input encoding." /></p>

<p>Additionally to the board, we will also represent as input the piece to move.
This will be encoded as a two dimensional 0/1 8x8 array, where the unique value 1 corresponds to the piece to move.
At the end, the input is a 3 dimensional array containing 8x8x(6+6+1) = 832 values.
This seems expensive but this representation is really important for the model.</p>

<h2 id="encoding-the-output">Encoding the output</h2>

<p>Our model output consists in all the possible moves for the piece given as input.
Since we are not considering encoding information such as piece capture, the output will simply consist of a 0/1 8x8 array with a 1 value for each possible destination of the piece.</p>

<hr />

<h1 id="creating-the-model-architecture">Creating the model architecture</h1>

<p>The model architecture is another crucial step here.
Once again, I took inspiration from existing models such as <a href="https://www.deepmind.com/blog/alphazero-shedding-new-light-on-chess-shogi-and-go">alphazero</a> for this design.
The first layer is a 3d convolutional layer applied to the input, with a kernel size equal to 13x3x3 so that all the depth layers are considered.
After that, the model contains 4 successive 2d convolutional modules, with a convolutional layer, a batch normalization layer and a zero padding layer.
This way, all the intermediate inputs are 8*8 arrays, and I also introduced residual connections between the these modules.
Finally, there are two transposed convolutional layers to obtain a final 8x8 output.</p>

<p><img src="/assets/chess_rules/chess_model.jpg" alt="The model architecture." /></p>

<hr />

<h1 id="testing-the-model">Testing the model</h1>

<p>Once the architecture is decided, it is time to fit the model on our dataset.
In this case, I used the cross entropy loss function which is usually applied to classification problems.
I then used the default stochastic gradient descent algorithm for the optimization of the model, with a batch size equal to 150.</p>

<h2 id="model-training">Model training</h2>

<p>Training the model was a little bit fastidious due to some bugs in the input encoding.
I finally obtained a working version achieving an accuracy of 97% on the test set, which is quite satisfying (the accuracy was computed as the number of correct values in the output).
I experimented with several parameters such as the number of outputs in the convolutional layers, the loss function, the optimization algorithm, and so on‚Ä¶
Initially, the dataset was composed of only the boards from the first games of the <em>csv</em> files, but I realized that it was not diverse enough since a board configuration would not evolve much from few moves
For the other parameters, I did not find any big differences between the trainings.</p>

<h2 id="model-testing">Model testing</h2>

<p>For testing the trained model, I selected a game and plotted both the moves proposed from the rules (blue arrows) and the moves proposed by the deep neural network (red arrows).
You can find a first comparison on the image below.
The result is quite satisfying, although it is not perfect.
It really gives the impression that the model learnt something, and that it is able to generalize on the data.</p>

<p><img src="/assets/chess_rules/chess_comp2.png" alt="First comparison between predicted moves versus legal moves." /></p>

<h2 id="observations">Observations</h2>

<p>You will find below few board comparisons from one particular game.
It is interesting to notice several particularities.
For instance the model allows pawns to move diagonally, which has been probably inferred from the captures.
The moves from the rooks are partially well predicted, but these seem difficult to compute
We can also see that illegal moves are not managed at all by the model.</p>

<p><img src="/assets/chess_rules/chess_comp1.png" alt="Second comparison between predicted moves versus legal moves." /></p>

<hr />

<h1 id="conclusion">Conclusion</h1>

<p>To conclude on this deep learning application, I find it interesting to see the good accuracy of the model at the end, and I am confident that the model can be further improved.
It will be for instance interesting to find a way to encode the capture and to infer the rules only from the moves of a set of games (instead of using the rules to generate all the moves each time).
Although this particular application does not seem to be really practically useful, it is still interesting to see what these models are capable of.
I personally find it fascinating that deep learning models are somehow able to make sense of very complex patterns such as board configurations.
This latter point was already shown by the unreasonable efficiency of the alphago model for the game of go.
Indeed, looking for the best move for a board game was a problem traditionally treated with tree search approaches.
Seeing the efficiency of neural nets makes me think we are far from understanding the possible connections between continuous models and symbolic computations.</p>

<h2 id="related-works">Related works</h2>

<p>Following this project, was curious to see if such problem has already been treated. So I searched for similar attempts online, even if my initial goal was to become more familiar with deep learning.
We may compare this task to the <a href="https://www.deepmind.com/blog/alphazero-shedding-new-light-on-chess-shogi-and-go">alphazero</a> algorithm which is able to learn playing a game board from scratch.
However, this is somehow different because alphazero is not designed to output a <a href="https://stackoverflow.com/questions/47847461/how-to-enforce-rules-like-move-legality-in-chess-at-the-output-of-a-neural-netwo">list of moves</a>.
So we may still think that from its playing, this type of model is somehow able to understand the rules, but whether it may output them remains unclear.
I found this <a href="https://www.reddit.com/r/chess/comments/p7gpgg/can_a_modern_machine_learning_algorithm_learn_the/">discussion</a> on the topic, and that <a href="https://softwareengineering.stackexchange.com/questions/92189/learning-the-rules-of-chess">one</a>, but no other deep learning model for the rules of chess.</p>

<h2 id="source-code">Source code</h2>

<p>The source code of this project is available on <a href="https://github.com/smbct/blog_code.git">github</a> (folder <code class="language-plaintext highlighter-rouge">chess_rules</code>).
The code includes the assets used for the graphical interface and the trained model with the selected architecture.
Please feel free to re-use and improve the model (and let me know if you are able to improve the result and get new ideas) !</p>]]></content><author><name>smbct</name></author><category term="deep-learning" /><category term="chess" /><category term="games" /><category term="combinatorics" /><summary type="html"><![CDATA[As I recently defended my thesis, and since I am now looking for a job, I decided to dedicate to myself some time to study cutting edge computer science topics. Deep learning is one very famous (and somehow controversial) topic that I didn‚Äôt have the occasion to experiment with so far. Thus I started playing with dl frameworks such as pytorch and recently I decided to implement an old idea that I had back during my thesis: inducing the rules of chess using a machine learning algorithm.]]></summary></entry><entry><title type="html">Soutenir sa th√®se en comodal en 2022</title><link href="http://localhost:4000/these/doctorat/covid/comodal/2022/04/26/soutenance-these.html" rel="alternate" type="text/html" title="Soutenir sa th√®se en comodal en 2022" /><published>2022-04-26T18:00:00+02:00</published><updated>2022-04-26T18:00:00+02:00</updated><id>http://localhost:4000/these/doctorat/covid/comodal/2022/04/26/soutenance-these</id><content type="html" xml:base="http://localhost:4000/these/doctorat/covid/comodal/2022/04/26/soutenance-these.html"><![CDATA[<p>Une soutenance de th√®se est un √©v√®nement particulier que l‚Äôon ne veut absolument pas louper en tant que doctorant/futur docteur. Il s‚Äôagit en effet de convaincre le jury de th√®se de la qualit√© de ses contributions scientifiques, mais √©galement de faire bonne figure devant sa famille et ses amis ! Des r√©p√©titions sont √©videmment au programme afin de proposer la pr√©sentation de ses travaux la plus claire et fluide possible, tout en respectant les 45 minutes qui nous sont accord√©es pour la pr√©sentation.</p>

<p>Cependant, covid oblige, les soutenances ont quelque peu √©volu√© depuis 2020. Par chance, ma soutenance ayant eu lieu en mars 2022, j‚Äôai eu la possibilit√© de la r√©aliser dans un amphith√©√¢tre contrairement √† d‚Äôautres qui ont √©t√© contraint de la faire depuis leur maison‚Ä¶ Celle-ci √©tait ouverte au public, √† l‚Äôinstar de la quasi totalit√© des soutenances. Par ailleurs, comme presque tous les doctorants qui soutiennent d√©sormais, j‚Äôai d√ª  m‚Äôadapter √† la pr√©sence de 2 membres de mon jury (sur 6) en distanciel. Cela m‚Äôa donn√© l‚Äôoccasion de r√©fl√©chir avec plusieurs amis √† une installation garantissant la meilleure exp√©rience possible. Voici donc quelques pistes pour soutenir sa th√®se √† l‚Äô√®re covid.</p>

<h1 id="organisation-de-la-soutenance">Organisation de la soutenance</h1>

<p>Les soutenance de th√®se suivent g√©n√©ralement la m√™me organisation. Le doctorant d√©fend son travail devant un public compos√© du jury, dans les premiers rangs, et de personnes ext√©rieures. La soutenance se d√©roule en deux parties. La premi√®re partie consiste en une pr√©sentation de 45 minutes sur les travaux r√©alis√©s et la deuxi√®me partie, qui encha√Æne directement et pouvant durer plusieurs heures, consiste en une s√©rie de questions pos√©es par chacun des membres du jury. Suite √† ces questions a lieu la d√©lib√©ration du jury. Dans mon cas, la d√©lib√©ration a eu lieu dans l‚Äôamphith√©√¢tre ce qui a contraint toutes les personnes ext√©rieures au jury √† le quitter. Enfin, lorsque la d√©lib√©ration est termin√©e, toutes les personnes retournent dans l‚Äôamphith√©√¢tre pour l‚Äôannonce des r√©sultats.</p>

<p>Au niveau du co-modal, il y a donc plusieurs pr√©cautions √† prendre. Dans un premier temps pour la pr√©sentation, il faut un moyen de filmer le doctorant et d‚Äôen capter le son pour les personnes √† distance. Mais ce n‚Äôest pas tout. Puisque le jury participe √©galement √† la soutenance, il est n√©cessaire de capter le son et la vid√©o des membres du jury en pr√©sentiel pour les personnes √† distance. Enfin, il est n√©cessaire de retransmettre dans l‚Äôamphith√©√¢tre le son et la vid√©o des membres du jury en distanciel. Pour l‚Äôannonce des r√©sultats √† la fin de la d√©lib√©ration, il peut √©galement √™tre int√©ressant de filmer le jury et le doctorant en m√™me temps. De mani√®re g√©n√©rale, l‚Äôorganisation entre le jury et le doctorant demande ainsi d‚Äô√™tre capable de filmer et capter le son √† deux endroits diff√©rents dans l‚Äôamphith√©√¢tre, et √† retransmettre dans tout l‚Äôamphith√©√¢tre le son et la vid√©o des membres √† distance.</p>

<h1 id="mat√©riel-disponible-et-installation-g√©n√©rale">Mat√©riel disponible et installation g√©n√©rale</h1>

<p>Ma soutenance de th√®se s‚Äôest d√©roul√©e dans un amphith√©√¢tre dans lequel il y avait un peu de mat√©riel √† disposition. Au niveau du mat√©riel, l‚Äôamphith√©√¢tre √©tait √©quip√© avec un vid√©oprojecteur, des enceintes et plusieurs micros. Il √©tait possible d‚Äôutiliser les enceintes et le vid√©oprojecteur √† partir d‚Äôun pc via un c√¢ble HDMI. Par ailleurs, il n‚Äôy avait pas la possibilit√© de r√©cup√©rer le signal des micros en entr√©e dans un ordinateur car celui-ci √©tait simplement envoy√© dans les enceintes de l‚Äôamphi. Enfin, il y avait √©galement un syst√®me de vid√©o-conf√©rence nomade avec un √©cran, une cam√©ra, un micro et une enceinte.</p>

<h1 id="solution-mise-en-place">Solution mise en place</h1>

<p>La solution mise en place a le d√©faut d‚Äô√™tre complexe mais celle-ci a relativement bien fonctionn√© le jour de la soutenance. Je vais d√©couper les diff√©rents aspects en plusieurs parties, et j‚Äôai ajout√© un sch√©ma r√©capitulatif de l‚Äôinstallation √† la fin du billet. Pour commencer, j‚Äôai effectu√© ma pr√©sentation de soutenance sur un pc portable √©quip√© d‚Äôubuntu, avec un support de pr√©sentation pdf g√©n√©r√© par beamer (powerpoint version LaTex). Pour la partie distanciel, j‚Äôai cr√©√© une r√©union Zoom g√©r√©e sur mon ordinateur de pr√©sentation.</p>

<h2 id="privil√®ges-zoom">Privil√®ges Zoom</h2>

<p>Premier d√©tail important, il a fallu trouver un moyen d‚Äôemp√™cher les personnes ext√©rieures au jury d‚Äôactiver micro ou cam√©ra pendant la pr√©sentation. Par chance, une option permettait de le faire dans la r√©union Zoom avec le compte Zoom utilis√© (option s√©curit√©). Malheureusement cette option emp√™che tout le monde d‚Äôactiver son son/image, y compris le jury. Pour y rem√©dier, nous avons fait pass√© les 2 membres √† distance en co-h√¥tes afin qu‚Äôils soient les seuls √† pouvoir communiquer. Par s√©curit√©, une personne suppl√©mentaire m‚Äôavait aid√© en gardant un ≈ìil sur le Zoom durant toute la soutenance.</p>

<h2 id="le-son">Le son</h2>

<p>Concernant le son, je n‚Äôai pas eu besoin de micro pour amplifier la voix. La difficult√© principale consistait par ailleurs √† capter √† la fois mon son et celui du jury √† l‚Äôint√©rieur de l‚Äôamphi. Le plus simple est d‚Äôutiliser deux micros via deux ordinateurs connect√©s √† la m√™me r√©union Zoom (ou en utilisant le syst√®me de vid√©oconf√©rence nomade disponible dans l‚Äôamphhi), mais lors des tests, cette solution conduisait √† un echo et un effet larsen tr√®s nuisible. Pour y rem√©dier, j‚Äôai d√©cid√© d‚Äôutiliser deux micros usb connect√©s sur mon pc, et mix√©s au niveau logiciel. Pour la partie logiciel, j‚Äôai trouv√© la solution <a href="https://askubuntu.com/questions/868817/collecting-and-mixing-sound-input-from-different-microphones">ici</a>. Par contre, cette solution est valable uniquement si le jury n‚Äôest pas trop √©loign√©, car les c√¢bles usb sont limit√©s √† 5m (on pourrait aussi utiliser un micro sans fil ceci dit). Au niveau de la retransmission dans l‚Äôamphith√©√¢tre, le son du Zoom √©tait directement envoy√© par mon pc dans les enceintes en HDMI.</p>

<h2 id="limage">L‚Äôimage</h2>

<p>Concernant la retransmission de l‚Äôimage, j‚Äôai utilis√© deux cam√©ras : une pour moi et une pour le jury. Me concernant, j‚Äôavais pr√©vu d‚Äôutiliser un appareil photo r√©flexe en tant que webcam pour la pr√©sentation (car la batterie ne tient pas beaucoup plus de 45 minutes), et de switcher sur la webcam du pc ensuite. La solution logicielle est <a href="https://maximevaillancourt.com/blog/canon-dslr-webcam-debian-ubuntu">ici</a>. Pour le jury, c‚Äôest la webcam du syst√®me Zoom nomade qui a √©t√© utilis√©e (le syst√®me √©tait donc connect√© √† la r√©union Zoom de la soutenance). Cette cam√©ra s‚Äôest r√©v√©l√©e pratique car elle se contr√¥lait via une t√©l√©commande g√©r√©e par la personne qui s‚Äôoccupait √©galement du Zoom. Concernant les membres √† distance, l‚Äôimage √©tait envoy√©e sur le syst√®me Zoom nomade. Les personnes √† distance n‚Äô√©taient donc pas visibles pour tout le monde dans l‚Äôamphi mais nous avions consid√©r√© que ce n‚Äô√©tait pas essentiel car ils √©taient entendus √† partir des enceintes.</p>

<p>Enfin, ma pr√©sentation pdf √©tait projet√©e via le vid√©oprojecteur et partag√©e via le partage d‚Äô√©cran Zoom. J‚Äôai utilis√© le super programme <a href="https://github.com/Cimbali/pympress">pympress</a> afin de dupliquer les slides sur mon √©cran de pc, pour ne pas avoir √† me retourner. Ce programme permet notamment d‚Äôavoir un timer, de visualiser les slides suivantes et d‚Äôutiliser un pointeur virtuel. Au niveau du pointeur, c‚Äôest justement celui de pympress que j‚Äôai utilis√© car un pointeur laser physique n‚Äôaurait pas √©t√© visible pour les personnes √† distance. Pour ce faire, j‚Äôai utilis√© un clavier et une souris pos√©s sur une table haute juste devant moi, ce qui me permettait de rester un minimum mobile (contrairement √† si j‚Äôavais √©t√© assis). J‚Äôai par ailleurs √©galement r√©alis√© un petit <a href="https://github.com/smbct/pympress.git">fork</a> de pympress apr√®s coup afin de rajouter une fonctionnalit√© int√©ressante pour les animations beamer.</p>

<p><img src="/assets/schema_soutenance.png" alt="Sch√©ma de la soutenance" />
Sch√©ma de l‚Äôinstallation de ma soutenance.</p>

<h1 id="bilan-et-am√©liorations-possibles">Bilan et am√©liorations possibles</h1>

<p>De mani√®re g√©n√©ral, j‚Äôai √©t√© tr√®s content de cette installation, et la soutenance s‚Äôest tr√®s bien d√©roul√©e. J‚Äôai seulement eu quelque soucis au d√©but car je n‚Äôarrivais pas r√©aliser le mixage des deux micros (un reboot a r√©solu le probl√®me), et l‚Äôappareil photo r√©flexe n‚Äôa pas fonctionn√© (j‚Äôignore pourquoi et je suis donc pass√© √† la webcam du pc directement). Ces d√©sagr√©ments m‚Äôont malheureusement fait oublier d‚Äôactiver le partage d‚Äô√©cran via Zoom au d√©but de la soutenance, ce qui a vite √©t√© corrig√© gr√¢ce √† la manifestation d‚Äôune personne du jury √† distance. J‚Äôavais par ailleurs pr√©vu d‚Äôenregistrer la pr√©sentation en utilisant la fonction de Zoom mais ces soucis techniques m‚Äôont √©galement fait oublier de lancer l‚Äôenregistrement.</p>

<p>Au niveau des am√©liorations, je pense que la partie logicielle est trop sensible car le moindre soucis technique peut rendre la soutenance infaisable. Le plus int√©ressant me semble l‚Äôutilisation des deux micros, m√™me si nous avons √©galement test√© la soutenance √† un seul micro qui pouvait fonctionner √©galement. Pour am√©liorer l‚Äôinstallation, on peut imaginer utiliser une table de mixage √† laquelle serait reli√© les diff√©rents micros, et m√™me avoir un micro cravate pour gagner en mobilit√©, mais cela demande plus de mat√©riel. Il serait √©galement int√©ressant d‚Äôavoir un pointeur laser √† la fois physique et num√©rique mais cela semble compliqu√© √† mettre en place en pratique.</p>

<p>√âvidemment, une soutenance plus simple aurait largement √©t√© possible mais je dois avouer que nous avons √©t√© pris au jeu de proposer le mise en place la plus int√©ressante possible. Dans tous les cas, pensez √† privil√©gier la simplicit√© afin d‚Äô√©viter les pannes de derni√®re minute. La r√©p√©tition de son installation permet √©galement de ne pas avoir √† r√©fl√©chir aux aspects techniques le jour de la soutenance, afin de se concentrer sur le contenu de la pr√©sentation.</p>]]></content><author><name>smbct</name></author><category term="these" /><category term="doctorat" /><category term="covid" /><category term="comodal" /><summary type="html"><![CDATA[Une soutenance de th√®se est un √©v√®nement particulier que l‚Äôon ne veut absolument pas louper en tant que doctorant/futur docteur. Il s‚Äôagit en effet de convaincre le jury de th√®se de la qualit√© de ses contributions scientifiques, mais √©galement de faire bonne figure devant sa famille et ses amis ! Des r√©p√©titions sont √©videmment au programme afin de proposer la pr√©sentation de ses travaux la plus claire et fluide possible, tout en respectant les 45 minutes qui nous sont accord√©es pour la pr√©sentation.]]></summary></entry><entry><title type="html">SAT, un probl√®me de logique</title><link href="http://localhost:4000/stage/logique/sat/sudoku/2018/03/04/SAT-logique.html" rel="alternate" type="text/html" title="SAT, un probl√®me de logique" /><published>2018-03-04T17:00:00+01:00</published><updated>2018-03-04T17:00:00+01:00</updated><id>http://localhost:4000/stage/logique/sat/sudoku/2018/03/04/SAT-logique</id><content type="html" xml:base="http://localhost:4000/stage/logique/sat/sudoku/2018/03/04/SAT-logique.html"><![CDATA[<p>Afin de pouvoir parler un peu plus en d√©tails de mon stage, je voulais aujourd‚Äôhui pr√©senter un probl√®me tr√®s connu en info. Ce probl√®me, SAT de son petit nom, tente de r√©pondre √† la question suivante : pour une formule logique donn√©e, existe-il une affectation des variables de cette formule permettant de la rendre vraie ?</p>

<p>Quelques explications s‚Äôimposent‚Ä¶</p>

<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

<h1 id="logique-maths-et-info">Logique, Maths et Info</h1>

<p>Il peut para√Ætre un peu bizarre de parler de logique sur un blog d‚Äôinformatique. En info, on essaie de r√©soudre des probl√®mes de calculs divers, allant du calcul de plus courts chemins √† l‚Äôanalyse d‚Äôavis clients sur les r√©seaux sociaux.</p>

<p>Seulement, les probl√®mes de logiques sont √©galement des probl√®mes calculatoires. La logique √† laquelle on s‚Äôint√©resse ici est la logique propositionnelle. Elle comprend un ensemble de r√®gles qui nous permettent de d√©finir ces probl√®mes de calcul.</p>

<blockquote class="prompt-info">
  <p>L‚Äôint√©r√™t dans tout √ßa ?</p>
</blockquote>

<p>L‚Äôint√©r√™t d‚Äô√©tudier ce genre de probl√®me est multiple. Tout d‚Äôabord, d‚Äôun point de vue th√©orique, ce sont les premiers probl√®mes que l‚Äôon a d√©montr√© comme √©tant ‚Äúdifficiles‚Äù. Cela signifie qu‚Äôon sait ces probl√®mes particuli√®rement compliqu√©s √† r√©soudre. Tellement compliqu√©s que si quelqu‚Äôun trouvait une m√©thode extr√™mement rapide pour y arriver, cela aurait un impacte majeur dans le monde, mais √ßa c‚Äôest un autre sujet.</p>

<p>Cela rejoint le c√¥t√© pratique de la chose. On est capable de montrer que SAT est √©quivalent √† beaucoup d‚Äôautres probl√®mes, il s‚Äôagit juste d‚Äôune histoire de transformation. Le probl√®me √† beau √™tre difficile √† r√©soudre, des chercheurs ont tout de m√™me cr√©√© des m√©thodes <strong>tr√®s</strong> efficaces pour les r√©soudre. Tellement efficaces qu‚Äôil peut √™tre int√©ressant de les utiliser afin de r√©soudre ces autres probl√®mes. Et c‚Äôest justement <strong>√ßa</strong> qui nous int√©resse ici !</p>

<h1 id="sat--mode-demplois">SAT : mode d‚Äôemplois</h1>

<p>Entrons dans le vif de sujet. SAT s‚Äôint√©resse √† ce qu‚Äôon appelle la logique propositionnelle, une des formes de logique les plus simples et brutes. J‚Äôai parl√© plus haut de formule et il faut bien comprendre par l√† formule au sens math√©matique. Voici donc les diff√©rents ingr√©dients de ces formules.</p>

<h2 id="les-variables">Les variables</h2>

<p>Qui dit formule dit variable, et on va commencer par √ßa. Une variable logique est donc une variable au sens math√©matique. Sa particularit√© est qu‚Äôelle peut prendre deux valeurs : <em>Vrai</em> ou <em>Faux</em>. Une variable logique repr√©sente donc un fait, dont on ne sait pas encore si il est av√©r√© ou non. Par exemple, on pourrait d√©finir une variable <strong>sport</strong> qui vaudrait <em>vraie</em> si on a pr√©vu une s√©ance de sport, et <em>faux</em> sinon. On peut de la m√™me mani√®re avoir une variable <strong>restau</strong> qui vaudrait <em>vraie</em> si on a pr√©vu d‚Äôaller manger dans un restaurant.</p>

<h2 id="les-op√©rateurs">Les op√©rateurs</h2>

<p>La deuxi√®me chose que l‚Äôon trouve dans une formule, ce sont les op√©rateurs, qui vont entre autre lier les variables entre elles. Des op√©rateurs logiques, il en existe √©norm√©ment. Cependant, pour la logique propositionnelle, on va se limiter √† 3 : le <strong>non</strong>, le <strong>et</strong> et le <strong>ou</strong>.</p>

<p>Les r√©sultat de l‚Äôapplication d‚Äôun op√©rateur logique peut √™tre repr√©sent√© par une <strong>table de v√©rit√©</strong>. Cette table indique les valeurs possibles pour les variables et le r√©sultat de l‚Äôop√©ration correspondant aux variables. Ces ce que l‚Äôon va utiliser pour expliquer la s√©mantique des op√©rateurs.</p>

<ul>
  <li>
    <h3 id="le-non">Le <strong>non</strong></h3>
  </li>
</ul>

<p>L‚Äôop√©rateur <strong>non</strong> (not√© \(\neg\)) est l‚Äôop√©rateur de n√©gation. Cet op√©rateur s‚Äôapplique a une seule variable (il est unaire). Il a pour but d‚Äôexprimer la n√©gation de la variable. La formule logique sera donc vrai uniquement si la variable est fausse. La table de v√©rit√© de cet op√©rateur est donc :</p>

<table>
  <tbody>
    <tr>
      <td>\(a\)</td>
      <td>\(\neg a\)</td>
    </tr>
    <tr>
      <td>\(0\)</td>
      <td>\(1\)</td>
    </tr>
    <tr>
      <td>\(1\)</td>
      <td>\(0\)</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>
    <h3 id="le-et">Le <strong>et</strong></h3>
  </li>
</ul>

<p>L‚Äôop√©rateur <strong>et</strong> (not√© \(\land\)) indique une conjonction entre deux variable. Il exprime le fait que les deux variables doivent avoir la valeur <em>vraie</em>. La formule \(sport \land restau\) mod√©lise le fait d‚Äôaller √† la fois au sport et au restau. La table de v√©rit√© est alors :</p>

<table>
  <tbody>
    <tr>
      <td>\(sport\)</td>
      <td>\(restau\)</td>
      <td>\(sport \land restau\)</td>
    </tr>
    <tr>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>
    <h3 id="le-ou">Le <strong>ou</strong></h3>
  </li>
</ul>

<p>L‚Äôop√©rateur <strong>ou</strong> (not√© \(\lor\)) mod√©lise une disjonction. Il repr√©sente le fait que l‚Äôune des deux variables peut √™tre vraie pas pas n√©cessairement les deux en m√™me temps. Cela donne :</p>

<table>
  <tbody>
    <tr>
      <td>\(sport\)</td>
      <td>\(restau\)</td>
      <td>\(sport \lor restau\)</td>
    </tr>
    <tr>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <td>1</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<blockquote class="prompt-info">
  <p>Notez bien que le ou que l‚Äôon d√©crit ici n‚Äôa pas le m√™me sens que celui que l‚Äôon utilise quotidiennement. En effet, si je pose la question : ‚Äútu vas au sport ou au resto ?‚Äù on ne s‚Äôattend pas √† ce que les deux faits soit av√©r√©s, mais seulement un des deux. Il s‚Äôagit d‚Äôun ou ‚Äúexclusif‚Äù.</p>
</blockquote>

<ul>
  <li>
    <h3 id="limplication">L‚Äôimplication</h3>
  </li>
</ul>

<p>L‚Äôimplication (\(\rightarrow\)) est un op√©rateur √©galement tr√®s utile qui permet de mod√©liser une con√©quence. Il signifie que si la fait correspondant √† la cause est <em>vrai</em>, alors celui correspondant √† la cons√©quence est <em>vrai</em> aussi. Par exemple, si je veux repr√©senter le fait que je ne veuille pas aller au restau apr√®s le sport, je peux utiliser la formule : \(sport \rightarrow \neg restau\). Pour que la formule soit <em>vraie</em> dans le cas ou sport est <em>vrai</em>, il faudra donc que \(\neg restau\) soit <em>vrai</em>, ce qui revient √† \(restau\) <em>faux</em>. La table de cette op√©rateur donne :</p>

<table>
  <tbody>
    <tr>
      <td>\(a\)</td>
      <td>\(b\)</td>
      <td>\(a \rightarrow b\)</td>
    </tr>
    <tr>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<p>L‚Äôimplication peut ne pas √™tre consid√©r√©e comme un ingr√©dient de base du calcul propositionnel. En effet, il s‚Äôexprime tr√®s simplement √† l‚Äôaide des autres op√©rations. Par exemple, \(a \rightarrow b\) peut √™tre r√©√©crit en \(\neg a \lor b\) (on peut le v√©rifier facilement avec une table de v√©rit√©). De la m√™me mani√®re, on peut se passer de <strong>et</strong> en utilisant uniquement des <strong>ou</strong> et des <strong>non</strong> et inversement pour les <strong>ou</strong>. Cependant, consid√©rer touts ces op√©rateurs √† la fois facilite les mod√©lisation.</p>

<h1 id="ecrire-et-manipuler-des-formules-sat">Ecrire et manipuler des formules SAT</h1>

<p>Maintenant que nous savons de quoi est constitu√©e une formule SAT, on va pouvoir regarder comment faire des calculs dessus en pratique.</p>

<p>Pour les exemples suivants, on peut d√©finir les variables logiques $a$, $b$, $c$, $d$ et $e$.</p>

<h2 id="v√©rifier-la-validit√©-dune-formule">V√©rifier la validit√© d‚Äôune formule</h2>

<p>Une premi√®re chose que l‚Äôon peut faire est v√©rifi√©e si une formule est vraie √©tant donn√© une affectation pour ses variables. Partons par exemple de la formule : \(((a \land \neg b) \rightarrow c) \lor d\)</p>

<p>Si je fixe \(a = Faux\), \(b = Vrai\), \(c = Vrai\) et \(d = Vrai\), qu‚Äôobtient-on ?</p>

<p>Pour r√©pondre √† cette question on peut proc√©der par √©tape. Tout d‚Äôabord, on peut remplacer les variables par leurs valeurs dans la formule : \(((F \land \neg V) \rightarrow V) \lor V\)</p>

<p>Ensuite, on va √©valuer chacune des op√©rations en partant des op√©rations les plus <em>√† l‚Äôint√©rieur</em> de la formule, c‚Äôest √† dire celles dont les op√©randes ne sont pas compos√©es de sous-op√©rations. Pour savoir comment √©valuer, il suffit de regarder les tables de v√©rit√©. La premi√®re chose √† √©valuer est donc \(\neg V\) qui est √©gale √† \(F\). On se retrouver ensuite avec \(F \land F\) que l‚Äôon peut replacer par \(F\).</p>

<p>A ce stade, la formule a la forme : \((F \rightarrow V) \lor V\). On poursuit donc en √©valuant \(F \rightarrow V\) qui est vrai. Il reste enfin la derni√®re op√©ration √† √©valuer : \(V \lor V\) qui est Vraie. On a donc montr√© que la formule √©tait vraie pour cette affectation de variable.</p>

<p>Vous pouvez noter que cette v√©rification est tr√®s simple √† faire. Elle peut ais√©ment √™tre impl√©ment√©e dans une programme et ce n‚Äôest pas cet aspect qui rend le probl√®me difficile.</p>

<h2 id="trouver-des-affectations-satisfaisantes">Trouver des affectations satisfaisantes</h2>

<p>Une autre chose que l‚Äôon cherche souvent √† faire est trouver les affectations de variables pour lesquelles la formule est vraie.</p>

<p>Vous avez peut-√™tre remarqu√© dans la v√©rification pr√©c√©dente qu‚Äôon aurait pu r√©pondre Vrai directement en regardant simplement la valeur de \(d\) d√®s le d√©but. On va se servir de √ßa ici pour trouver d√©j√† affirmer que peu importe la valeur des autres variables, √† partir du moment o√π \(d\) est vraie, la formule sera vraie.</p>

<blockquote class="prompt-info">
  <p>Et si d est faux, √ßa donne quoi ?</p>
</blockquote>

<p>Venons-en justement. Il lorsque \(d\) est faux, la partie droite de a formule : \((a \land \neg b) \rightarrow c\) doit √™tre vraie. On peut reprendre la table de v√©rit√© de l‚Äôimplication pour se rendre compte que lorsque la partie gauche est fausse, la formule est vraie. La formule sera donc v√©rifi√©e lorsque \(a \land \neg b\) est faux, c‚Äôest √† dire lorsque \(a\) est faux ou \(b\) est vrai (vous pouvez v√©rifier par vous-m√™me !).</p>

<p>Enfin, si la partie gauche de la derni√®re implication est vraie, alors $c$ doit √™tre vraie, ce qui nous donne la derni√®re affectation : \(a = V\), \(b = F\), \(c = V\) et \(d = F\). Et c‚Äôest tout, on a √©num√©r√© de mani√®re implicite chaque affectation permettant de rendre la formule vraie.</p>

<h2 id="r√©solution-de-sat">R√©solution de SAT</h2>

<p>Dans la partie pr√©c√©dente, on a vu comment proc√©der de mani√®re m√©thodologique pour satisfaire la formule. C‚Äôest justement ce calcul qui nous int√©resse en pratique. Cependant, il y a des cas o√π cette m√©thodologie se ram√®ne √† tester toutes les affectations possibles de variables. C‚Äôest particuli√®rement emb√™tant car des affectations possibles, il y en a trop. Pour \(n\) variables, elles sont au nombre de \(2^n\). Cela signifie qu‚Äôa partir de 20 variables, on d√©passe d√©j√† le million d‚Äôaffectation (et je peux vous assurer que 20 variables, c‚Äôest tr√®s peu !).</p>

<p>Heureusement, les cas probl√©matiques sont tr√®s difficiles √† rencontrer en pratique. En effet, la mod√©lisation en SAT des probl√®mes que l‚Äôon cherche √† r√©soudre donne √† la formule une structure particuli√®re qui est en g√©n√©ral plus facile √† r√©soudre. Il faut aussi compte sur le fait que les solveurs SAT ont a la r√©putation d‚Äô√™tre tr√®s tr√®s efficaces et permettent de r√©soudre en pratique des formules √©normes. C‚Äôest d‚Äôailleurs la raison pour laquelle on transforme nos probl√®mes en probl√®mes SAT.</p>

<h1 id="sat-pour-r√©soudre-des-probl√®mes">SAT pour r√©soudre des probl√®mes</h1>

<p>J‚Äôen parle depuis le d√©but, ce qui nous int√©resse avec SAT, c‚Äôest la possibilit√© de l‚Äôutiliser pour r√©soudre d‚Äôautres probl√®mes. On appel cela un <em>encodage SAT du probl√®me</em>. Pour illustrer cela, je vous propose de r√©soudre la petite √©nigme <a href="http://matoumatheux.ac-rennes.fr/tous/qui/possede.htm">suivante</a>.</p>

<h2 id="les-variables-1">Les variables</h2>

<p>La premi√®re √©tape pour faire un encodage SAT est de d√©terminer les variables. Il n‚Äôy a en g√©n√©ral pas qu‚Äôune bonne r√©ponse et trouver les bonnes variables est une affaire de savoir faire.</p>

<p>Pour d√©finir les variables ici, on peut √©tudier les diff√©rents <em>choix</em> ou <em>possibilit√©s</em> de r√©ponse que nous avons face au probl√®me. La difficult√© de se probl√®me r√©side dans sa combinatoire, c‚Äôest √† dire le nombre de combinaisons d‚Äô√©l√©ments de r√©ponse. Un √©l√©ment de r√©ponse dans ce cas-ci est une proposition de la forme : tel objet va avec telle personne. C‚Äôest justement √ßa que l‚Äôon va utiliser comme variable.</p>

<p>Les variables que l‚Äôon peut d√©finir sont donc :</p>

<ul>
  <li>\(v_g\) valant vraie si Val√©rie poss√®de la guitare</li>
  <li>\(s_g\) valant vraie si Sylvie poss√®de la guitare</li>
  <li>\(v_l\) valant vraie si Val√©rie poss√®de le luth</li>
  <li>\(s_l\) valant vraie si Sylvie poss√®de le luth</li>
  <li>\(v_f\) valant vraie si Val√©rie poss√®de le ballon de foot</li>
  <li>\(s_f\) valant vraie si Sylvie poss√®de le ballon de foot</li>
  <li>\(v_t\) valant vraie si Val√©rie poss√®de la balle de tennis</li>
  <li>\(s_t\) valant vraie si Sylvie poss√®de la balle de tennis</li>
  <li>\(v_{cn}\) valant vraie si Val√©rie poss√®de le chien</li>
  <li>\(s_{cn}\) valant vraie si Sylvie poss√®de le chien</li>
  <li>\(v_{ct}\) valant vraie si Val√©rie poss√®de le chat</li>
  <li>\(s_{ct}\) valant vraie si Sylvie poss√®de le chat</li>
</ul>

<p>On pourrait ici se passer de certaines variables (je vous laisse trouver comment) mais les expliciter toutes dans le mod√®le rend la mod√©lisation plus claire.</p>

<h2 id="contraintes-du-probl√®me">Contraintes du probl√®me</h2>

<p>Un peu comme en programmation lin√©aire, on retrouve une partie que j‚Äôappelle <em>contrainte</em> dans la mod√©lisation. Ici, ce sont des formules logiques qui vont lier les variables entre elles et faire respecter les conditions du probl√®me.</p>

<h3 id="contrainte-1">Contrainte 1</h3>

<p>La premi√®re contrainte nous apprend que si Val√©rie poss√®de la guitare, le chat doit √™tre avec la balle de tennis, c‚Äôest √† dire qu‚Äôils sont poss√©d√©s par la m√™me personne. La forme ‚ÄúSi‚Ä¶ alors‚Ä¶‚Äù est typiquement une implication. En effet, la seule chose qui ne sera pas possible dans cette indication est que Val√©rie poss√®de la guitare et que le chat ne soit pas avec la balle de tennis (une seule possibilit√© d‚Äôobtenir faux avec l‚Äôimplication, cf tables de v√©rit√©s).</p>

<p>Pour repr√©senter cette contrainte avec une formule logique, on peut d‚Äôabord voir comment √©crire la partie droite : le chat est avec la balle de tennis. Avec nos variables, deux possibilit√©s s‚Äôoffrent √† nous : \(v_{ch}\) et \(v_t\) sont vraies en m√™me temps ou bien \(s_{ch}\) et \(s_t\) sont vraies en m√™me temps. On va donc mod√©liser cette partie par : \((v_{ch} \land v_t) \lor (s_{ch} \land s_t)\).</p>

<p>Le reste de la formule est facile √† mod√©liser car il s‚Äôexprimer facilement √† partir des variables d√©finies. On obtient donc :</p>

\[v_g \rightarrow ((v_{ct} \land v_t) \lor (s_{ct} \land s_t))\]

<h3 id="contrainte-2">Contrainte 2</h3>

<p>On remarque que la contraint 2 a la m√™me forme que la premi√®re. Cela nous permet d‚Äô√©crire les formules sans trop de peine. On obtient :</p>

\[s_{ct} \rightarrow ((v_{cn} \land v_t) \lor (s_{cn} \land s_t))\]

<h3 id="contrainte-3">Contrainte 3</h3>

<p>La contrainte 3 est l√©g√®rement diff√©rente. En effet, la partie gauche de l‚Äôimplcation est cette fois similaire √† la partie droite. Cela tombe bien, on a d√©j√† vu comment la mod√©liser. On obtient :</p>

\[((v_{cn} \land v_f) \lor (s_{cn} \land s_f)) \rightarrow ((v_t \land v_l) \lor (s_t \land s_l))\]

<h3 id="contrainte-4">Contrainte 4</h3>

<p>La contrainte 4 reprend le m√™me principe que la pr√©c√©dente :</p>

\[((v_{ct} \land v_f) \lor (s_{ct} \land s_f)) \rightarrow ((v_t \land v_g) \lor (s_t \land s_g))\]

<h3 id="contrainte-5">Contrainte 5</h3>

<p>La contrainte 5 apporte une petite diff√©rence. Cette fois, la partie droite de l‚Äôimplication signifie qu‚Äôun objet ne doit pas √™tre avec un autre. Pour mod√©liser cela, rien de plus simple, il suffit de rajouter une n√©gation sur une des deux variables ou encore utiliser la variable correspondant √† l‚Äôautre personne. On obtient par exemple :</p>

\[((v_g \land v_f) \lor (s_g \land s_f)) \rightarrow ((v_t \land \neg v_{ct}) \lor (s_t \land \neg s_{ct}))\]

<h3 id="contraintes-additionnelles">Contraintes additionnelles</h3>

<p>Il reste encore √† ajouter certaines contraintes qui n‚Äôapparaissent pas dans l‚Äô√©nonc√©. En effet, il  parait √©vident et ce n‚Äôest pas pr√©cis√© qu‚Äôune personne poss√®de un seul des deux objets de chaque type et que les deux personnes ne peuvent pas poss√©der le m√™me objet. Il n‚Äôy a cependant rien qui emp√™che cela dans les variables. De plus, rien n‚Äôoblige les personnes √† poss√©der un des deux objets.</p>

<p>Pour forcer une personne √† ne poss√©der qu‚Äôun seul des deux objets, on peut ajouter des contraintes du style :</p>

\[\neg(personne_{objet1} \land personne_{objet2})\]

<p>Pour emp√™cher un objet d‚Äôappartenir √† deux personnes, la contrainte est tr√®s similaire :</p>

\[\neg(personne1_{objet} \land personne2_{objet})\]

<p>Enfin, pou qu‚Äôune personne poss√®de au moins un objet, on ajoute des contraintes du genre :</p>

\[\neg(personne_{objet1} \lor personne_{objet2})\]

<blockquote class="prompt-info">
  <p>Certaines contraintes sont peut-√™tre redondantes. Cependant, la mod√©lisation n‚Äôest pas fait pour √™tre parfait, elle doit seulement d√©crire de la mani√®re la plus exacte possible le probl√®me.</p>
</blockquote>

<h2 id="r√©solution">R√©solution</h2>

<p>Nous avons donc tous les √©l√©ments pour r√©soudre le probl√®me. Cependant, vous vous demander ce que l‚Äôon va faire de toutes ces formules, car le probl√®me SAT s‚Äôexprime avec une seule formule. Et bien ce que l‚Äôon cherche √† obtenir c‚Äôest des valeurs pour nos variables telles que <strong>toutes</strong> les formules soient satisfaites en m√™me temps. Pour les satisfaire, il suffit de les ajouter √† la suite en utiliser des <strong>et</strong> logiques. On obtient donc la formule suivante :</p>

\[\begin{align*}
		&amp;v_g \rightarrow ((v_{ct} \land v_t) \lor (s_{ct} \land s_t)) \land \\
        &amp;s_{ct} \rightarrow ((v_{cn} \land v_t) \lor (s_{cn} \land s_t)) \land \\
        &amp;((v_{cn} \land v_f) \lor (s_{cn} \land s_f)) \rightarrow ((v_t \land v_l) \lor (s_t \land s_l)) \land \\
        &amp;((v_{ct} \land v_f) \lor (s_{ct} \land s_f)) \rightarrow ((v_t \land v_g) \lor (s_t \land s_g)) \land \\
        &amp;((v_g \land v_f) \lor (s_g \land s_f)) \rightarrow ((v_t \land \neg v_{ct}) \lor (s_t \land \neg s_{ct})) \land \\
        &amp;\neg(v_{g} \land v_{l}) \land \\
        &amp;\neg(v_{f} \land v_{t}) \land \\
        &amp;... \land \\
        &amp;\neg(v_{g} \land s_{g}) \land \\
        &amp;\neg(v_{l} \land s_{l}) \land \\
        &amp;... \land \\
        &amp;v_g \lor v_l \land \\
        &amp;s_f \lor s_t \land \\
        &amp;...
	\end{align*}\]

<h1 id="sat-dans-mon-stage">SAT dans mon stage</h1>

<p>Pfiuou ! √ßa fait beaucoup non ? Il y aurait encore √©norm√©ment de choses √† dire sur SAT mais je voulais pr√©senter le principal pour pouvoir parler de ce que je fais en stage.</p>

<p>Je l‚Äôannon√ßais d√®s le d√©but, on s‚Äôint√©resse √† SAT car les solvers qui permettent de r√©soudre les formules sont extr√™mement efficaces. L‚Äôintuition de mes encadrants, derri√®re la proposition de stage √† laquelle j‚Äôai r√©pondue, est qu‚Äôen d√©terminant un encodage SAT intelligent pour les probl√®mes sur lesquels ils travaillent, ils allaient pouvoir √™tre plus performants et r√©soudre plus de probl√®mes.</p>

<p>Justement, ces probl√®mes je ne les ai pas encore pr√©sent√©s. J‚Äôy viendrais la prochaine fois et cela me donnera l‚Äôoccasion de pr√©senter un peu les travaux de mon √©quipe. Et je vous promet, ils font des trucs bien styl√©s!</p>]]></content><author><name>smbct</name></author><category term="stage" /><category term="logique" /><category term="SAT" /><category term="sudoku" /><summary type="html"><![CDATA[Afin de pouvoir parler un peu plus en d√©tails de mon stage, je voulais aujourd‚Äôhui pr√©senter un probl√®me tr√®s connu en info. Ce probl√®me, SAT de son petit nom, tente de r√©pondre √† la question suivante : pour une formule logique donn√©e, existe-il une affectation des variables de cette formule permettant de la rendre vraie ?]]></summary></entry><entry><title type="html">Plus court chemin et graphe</title><link href="http://localhost:4000/optimisation/graphes/file/algorithme/2017/07/12/court-chemin.html" rel="alternate" type="text/html" title="Plus court chemin et graphe" /><published>2017-07-12T18:00:00+02:00</published><updated>2017-07-12T18:00:00+02:00</updated><id>http://localhost:4000/optimisation/graphes/file/algorithme/2017/07/12/court-chemin</id><content type="html" xml:base="http://localhost:4000/optimisation/graphes/file/algorithme/2017/07/12/court-chemin.html"><![CDATA[<p>Trouver un chemin, ou m√™me le plus court chemin, est un probl√®me courant en informatique. Parmi les applications concr√®tes de ce probl√®me, on peut tout d‚Äôabord penser √† l‚Äôitin√©raire le plus court, donn√© par un dispositif GPS. Ce n‚Äôest cependant pas la seule application r√©elle. On peut par exemple chercher un plus court chemin pour une IA dans un jeu ou encore trouver la mani√®re la plus rapide de mettre deux personnes en relation dans un r√©seau professionnel.</p>

<blockquote class="prompt-info">
  <p>Un probl√®me facile ?</p>
</blockquote>

<p>Le probl√®me du plus court chemin est un probl√®me tr√®s connu et tr√®s √©tudi√©. En r√©alit√©, il y a pleins de variantes possibles. Certaines peuvent √™tre faciles √† r√©soudre, comme trouver le meilleur itin√©raire avec un GPS. D‚Äôautres au contraire peuvent √™tre extr√™mement difficiles, comme trouver le chemin le plus court passant par un ensemble de villes, pour effectuer des livraisons par exemple (probl√®me du voyageur de commerce/tourn√©es de v√©hicules). Nous allons voir ici un algorithme simple pour r√©soudre un probl√®me similaire √† celui de l‚Äôitin√©raire.</p>

<h1 id="pr√©sentation-du-probl√®me">Pr√©sentation du probl√®me</h1>

<p>Imaginons que nous connaissons certaines personnes qui d√©tiennent une m√™me information cruciale que nous voulons r√©cup√©rer. Le soucis est que ces personnes ne nous donneront pas ce message directement, par manque de confiance. En effet, elle ne font confiance qu‚Äô√† leurs amis directs et le confieront seulement √† eux.</p>

<p>Si on consid√®re notre cercle d‚Äôamis, nous sommes connect√©s √† un certain nombre de personnes qui sont elles-m√™me connect√©es √† d‚Äôautres personnes par des relations d‚Äôamiti√©. Notre d√©fi est de r√©cup√©rer cette information le plus rapidement possible, en la faisant transmettre d‚Äôamis en amis. Pour ce faire, nous allons donc demander √† nos amis proches de demander a leurs amis de demander √† leurs amis etc‚Ä¶ jusqu‚Äô√† ce qu‚Äôun personne diffuse l‚Äôinformation dans le sens inverse pour qu‚Äôelle revienne vers nous.</p>

<p>L‚Äôobjectif est donc de trouver le lien le plus court entre nous et l‚Äôinformation, c‚Äôest √† dire de trouver une suite de personne Alice - Bob - Charles - ‚Ä¶ la plus courte telle que deux personnes successives sont amies, la premi√®re personne de la liste √©tant nous et la derni√®re √©tant une personne qui d√©tient l‚Äôinfo.</p>

<h1 id="d√©tour-par-les-graphes">D√©tour par les graphes</h1>

<p>Les donn√©es de notre probl√®mes constituent un r√©seau d‚Äôamis. Nous avons les noms des personnes, ainsi que leurs relations, c‚Äôest √† dire avec quelles autres personnes elle sont amies. Une bonne fa√ßon de manipuler nos donn√©es est de les repr√©senter sous forme d‚Äôun graphe.</p>

<p>Un graphe est un objet math√©matique qui peut √™tre utilis√© pour manipuler des donn√©es comportant une relation.
Cet objet est constitu√© de <strong>sommets</strong> (ici les diff√©rentes personnes) et d‚Äô<strong>ar√™tes</strong>, qui repr√©sentent les liens entre les diff√©rents sommets (ici ce sont les liens d‚Äôamiti√©).</p>

<h1 id="algorithme-de-r√©solution">Algorithme de r√©solution</h1>

<p>L‚Äôalgorithme de r√©solution du probl√®me est un algorithme qui effectue un <strong>parcours en largeur</strong> du graphe. Cela signifie qu‚Äôil va parcourir tous les sommets du graphe, en commen√ßant du plus proches du sommet de d√©part au plus √©loign√©s. Dire que deux sommets sont proches signifie ici qu‚Äôils sont connect√©s par un petit nombre d‚Äô<strong>ar√™tes</strong>.</p>

<h2 id="d√©roulement-de-lalgorithme">D√©roulement de l‚Äôalgorithme</h2>

<p>L‚Äôalgorithme utilise une file d‚Äôattente (souvent appel√© <strong>file</strong> en info) contenant les sommets (amis) √† <em>visiter</em>. Au tout d√©but, cette file d‚Äôattente contient le sommet qui nous r√©pr√©sente dans le graphe. Ensuite, une m√™me √©tape est r√©p√©t√©e tant que la file d‚Äôattente n‚Äôest pas vide : le <strong>premier</strong> sommet ajout√© dans la file est retir√© et l‚Äôalgorithme v√©rifie si il contient l‚Äôinfo recherch√©e. Si c‚Äôest le cas, il peut s‚Äôarr√™ter, sinon il retire ce sommet et ajoute tous les amis de ce sommet.
Une seule r√®gle doit √™tre respect√©e : les amis d‚Äôun sommet sont ajout√©s √† la file uniquement s‚Äôils n‚Äôont pas d√©j√† √©t√© visit√©s par l‚Äôalgorithme.</p>

<p>L‚Äôalgorithme va donc parcourir progressivement le graphe en partant d‚Äôun sommet et en allant vers ses amis. Concr√®tement, il va d‚Äôabord consid√©rer le premier sommet, celui qui nous correspond. Il va ensuite chercher tous les amis de ce sommet et les ajouter √† une file d‚Äôattente. Ces amis seront ensuite consid√©r√©s et l‚Äôalgorithme va v√©rifier si l‚Äôinfo est d√©tenu par l‚Äôun d‚Äôeux. Enfin les amis de cet ami consid√©r√© seront ajout√©s √† la file d‚Äôattente √©galement.</p>

<p>Il y a encore une chose dont on a pas parl√©. Avec les √©tapes pr√©c√©dentes, on est capable de trouver l‚Äôinfo mais on ne peut pas encore afficher le chemin qui permet de l‚Äôatteindre (c‚Äôest √† dire la liste des personnes). On a cependant d√©j√† fait le plus gros du travail. Pour retrouver le chemin on proc√®de en plusieurs √©tapes. Dans une premier temps, on indique pour chaque sommet √† partir de quel sommet on l‚Äôa visit√©. Par exemple, si on visite le sommet A et on ajoute son ami B √† la file, on indique alors que B est obtenu √† partir de A. La deuxi√®me √©tape consiste √† prendre le sommet contenant l‚Äôinfo une fois sorti de la boucle, et a remonter successivement vers le sommet d‚Äôorigine pour finir vers le sommet nous repr√©sentant.</p>

<h2 id="un-mot-sur-les-files">Un mot sur les files</h2>

<p>L‚Äôalgorithme que je propose pour r√©soudre ce probl√®me utilise une structure de donn√©e appel√©e file (la fameuse file d‚Äôattente). En quelque mots, une file est une liste d‚Äô√©l√©ments, ici de sommets ou de personnes. Le premier √©l√©ment est appel√© la t√™te et le dernier la queue.</p>

<p>Elle respecte deux propri√©t√©s :</p>

<ul>
  <li>lorsqu‚Äôun √©l√©ment est ajout√© √† la file, il est ajout√© √† la fin et il devient ainsi la queue</li>
  <li>le seul √©l√©ment qui peut √™tre consult√© et retir√© est le premier √©l√©ment, c‚Äôest √† dire la t√™te.</li>
</ul>

<p>Cette structure de donn√©e est g√©n√©ralement appel√©e FIFO (First In First Out). En effet, dans une telle structure, c‚Äôest le premier √©l√©ment ajout√© dans la file qui sera retir√© en premier. Pensez donc √† la file d‚Äôattente de la caisse d‚Äôun magasin. On ne peut s‚Äôins√©rer qu‚Äô√† la fin de la file (en g√©n√©ral!) et c‚Äôest la premi√®re personne arriv√©e qui est servie en premier.</p>

<p>Cr√©er les m√©canismes d‚Äôune file est assez simple. Il y a plusieurs fa√ßon de le faire et tous les langages de programmation proposent directement ce genre d‚Äôoutil.</p>

<h2 id="algorithme-en-pseudo-code">Algorithme en pseudo code</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ajout √† file du sommet nous correspondant

TANT QUE l'info n'est pas trouv√©e et que la file n'est pas vide FAIRE

    sommet &lt;- t√™te de la file
    retirer la t√™te de la file

    SI le sommet contient l'info ALORS
        sortir de la boucle
    SINON
        ajouter √† la file ses amis non visit√©s
        indiquer aux sommets amis que leur sommet d'origine est le sommet visit√©
    FIN SI

FIN TANT QUE

SI l'info a √©t√© trouv√©e ALORS
    afficher l'info
    reconstruire le chemin √† partir des sommets d'origines
FIN SI  

</code></pre></div></div>

<h2 id="explications-sur-lalgorithme">Explications sur l‚Äôalgorithme</h2>

<p>Il n‚Äôest pas forc√©ment √©vident au premiers abords de comprendre r√©ellement ce que l‚Äôalgorithme fait. Je rappelle qu‚Äôon cherche ici un plus court chemin. Si le chemin trouv√© est bien le plus court (ou un des plus court) c‚Äôest pour une unique raison. Ce qu‚Äôil faut garder √† l‚Äôesprit, c‚Äôest que tous les amis des sommets visit√©s sont ajout√©s √† la <strong>fin</strong> de la liste d‚Äôattente. Cela signifie qu‚Äôils seront visit√©s seulement apr√®s tous les sommets pr√©sents avant dans la liste. De plus, les sommets ajout√©s en fin de liste auront toujours une distance sup√©rieure √† ceux ajout√©s avant (la distance est le nombre d‚Äôamis interm√©diaires qui s√©pare Moi du sommet). De ce fait, lorsqu‚Äôun sommet contenant l‚Äôinfo est trouv√©, tous les sommets de distance inf√©rieur ont d√©j√† √©t√© visit√©s.</p>

<h1 id="exemple-pas-√†-pas">Exemple pas √† pas</h1>

<p>Voici un exemple de graphe d‚Äôamis. Le sommet nous repr√©sentant est le sommet <em>Moi</em> et le sommet contenant l‚Äôinfo est le sommet avec la pastille jaune (Jackorah). Nous allons ici d√©rouler toutes les √©tapes de la r√©solution du probl√®me. La liste des sommets d‚Äôorigines est pr√©sente √† la fin de l‚Äôexemple.</p>

<p><img src="/assets/graphe_exemple.png" alt="Un exemple" /></p>

<p>Comme dit pr√©c√©demment, un tout d√©but, la file d‚Äôattente contient uniquement le sommet nous repr√©sentant :</p>

<p>-&gt; Moi</p>

<p>On entre ensuite dans la boucle et on retire ce sommet de la file. Ce sommet n‚Äôest pas un sommet contenant l‚Äôinfo, on ne sort donc pas de la boucle. On ajoute donc les sommets amis de ce sommet. On n‚Äôoublie pas de pr√©ciser pour les amis que Moi est leur sommet d‚Äôorigine. Cela donne :</p>

<p>-&gt; Ley ; Ricnath ; Joanea</p>

<p>Nouveau tour de boucle, l‚Äôalgorithme retire le premier sommet de la file (le seul accessible pour cette structure de donn√©e). Manque de chance, Ley ne d√©tient pas l‚Äôinfo non plus, on ajoute donc ses amis √† la fin de la file.</p>

<p>-&gt; Ricnath ; Joenea ; Kimi</p>

<p>On recommence encore une fois, cette fois c‚Äôest Ricnath qui est visit√©, il ne d√©tient pas l‚Äôinfo, ses amis sont ajout√©s.</p>

<p>-&gt; Joanea ; Kimi ; Here‚Äôchet</p>

<p>Au tour de Jonea d√©sormais. Toujours pas d‚Äôinfo, on ajoute ses amis‚Ä¶ Ah mince ! Here‚Äôchet a d√©j√† √©t√© ou est pr√©sent dans la file, on ne l‚Äôajoute donc pas !</p>

<p>-&gt; Kimi ; Here‚Äôchet</p>

<p>Au tour de Kimi, pas d‚Äôinfo ni d‚Äôamis, on passe vite dessus.</p>

<p>-&gt; Here‚Äôchet</p>

<p>Le fameux Here‚Äôchet d√©sormais. Ah toujours rien ! Mais il a un amis, on l‚Äôajoute donc √† la file.</p>

<p>-&gt; Jackorah</p>

<p>Notre derni√®re chance, car il n‚Äôa pas d‚Äôamis et si la liste est vide alors l‚Äôalgo s‚Äôarr√™te. Ouf ! Il a bien l‚Äôinfo, on peut la r√©cup√©rer.</p>

<p>Voici le tableau des sommets d‚Äôorigine :</p>

<hr />

<table style="width:100%">
 <tr>
   <th>Sommet</th>
   <th>Ley</th>
   <th>Kimi</th>
   <th>Ricnath</th>
   <th>Joanea</th>
   <th>Here'chet</th>
   <th>Jackorah</th>
 </tr>
 <tr>
   <td>Sommet d'origine</td>
   <td>Moi</td>
   <td>Ley</td>
   <td>Moi</td>
   <td>Moi</td>
   <td>Ricnath</td>
   <td>Here'chet</td>
 </tr>
</table>

<hr />

<p>Ceci nous permet donc de reconstruire la liste. On part donc du sommet sur lequel on a trouv√© l‚Äôinfo : Jackorah. On remonte vers le sommet d‚Äôorigine, cela donne Here‚Äôchet. On continue avec le sommet d‚Äôorigine de Here‚Äôchet, cela donne Ricnath. Et on termine enfin car le sommet d‚Äôorigine de Ricnath est Moi.</p>

<p>Finalement on obtient donc la liste : Moi -&gt; Ricnath -&gt; Here‚Äôchet -&gt; Jackorah</p>

<p>On a donc une liste de 4 personnes, et il n‚Äôest pas possible de faire plus court. On peut n√©anmoins remarquer qu‚Äôil y avait un autre chemin de m√™me longueur possible. Le chemin retourn√© par l‚Äôalgorithme d√©pend en fait de l‚Äôordre dans lequel sont ajout√© les amis d‚Äôun sommet.</p>

<h1 id="d√©tails-sur-limpl√©mentation">D√©tails sur l‚Äôimpl√©mentation</h1>

<p>Certains d√©tails n‚Äôont toujours pas √©t√© √©clair√©s dans l‚Äôalgorithme. Comme pr√©cis√© pr√©c√©demment, les files sont pr√©sentes dans tous les langages, donc pas besoin de les reprogrammer. Cependant, les graphes sont des structures un peu plus sophistiqu√©es et il y a de nombreuses fa√ßon de les impl√©menter.</p>

<p>Dans l‚Äôimpl√©mentation que je propose plus bas, j‚Äôai choisi de programmer le graphe en utilisant une <strong>liste de successeurs</strong>. Cela signifie que chaque sommet du graphe contient un lien vers la liste des sommets qui lui sont connect√©s. En faisant comme ceci, on peut alors acc√©der facilement aux sommets connect√©s. Le seul probl√®me est que si on cherche un ami en particulier, il faut parcourir toute la liste d‚Äôamis pour le trouver. Avec cette impl√©mentation, il faut √©galement garder √† l‚Äôesprit que la liste des amis contient uniquement des <strong>liens</strong> vers les sommets amis, et que la m√©moire n‚Äôest pas recopi√©es dans toutes les listes.</p>

<p>Il y a beaucoup d‚Äôautre fa√ßons d‚Äôimpl√©menter des graphes. Une autre fa√ßon de faire est d‚Äôutiliser un tableau indiquant pour chaque couple de sommet si ils sont connect√©s (ou amis) ou non. Cette fa√ßon de faire utilise plus de m√©moire car il y a autant de variables que de connexions possibles dans le graphe.</p>

<p>Enfin, concernant l‚Äôimpl√©mentation, on peut √©galement parler de l‚Äôobtention de la liste finale √† partir des sommets d‚Äôorigine. Pour la liste des sommets d‚Äôorigines, on peut utiliser une liste d‚Äôassociation qui associe √† chaque sommet un lien vers un autre sommet qui est son sommet d‚Äôorigine. Ensuite, pour construire le chemin, il suffit d‚Äô√©crire une boucle qui bascule vers le sommet d‚Äôorigine et va cherche son propre sommet d‚Äôorigine √† chaque √©tape.</p>

<h1 id="code">Code</h1>

<p>Vous pouvez retrouver une impl√©mentation de l‚Äôalgorithme <a href="https://github.com/smbct/blog_code/tree/master/graphe_secret">ici</a>. L‚Äôimpl√©mentation a √©t√© faite en python. Elle permet de g√©n√©rer al√©atoirement un graphe d‚Äôamis √† partir d‚Äôune liste de noms et calcule le plus court chemin pour r√©cup√©rer l‚Äôinformation dans le graphe. Le code est comment√© et le fichier readme donne les d√©tails pour l‚Äôex√©cution du programme.</p>

<h1 id="vers-les-algorithmes-dintelligence-artificielle">Vers les algorithmes d‚Äôintelligence artificielle</h1>

<p>En conclusion, nous avons vu ici un algorithme de base mais qui est √©galement fondamental en informatique. On a fait du parcours de graphe, ce que l‚Äôon retrouve dans de nombreux probl√®mes. Il y a beaucoup de fa√ßons de parcourir un graphe, par exemple en largeur, ce qui est pr√©sent√© ici, ou encore en profondeur, en ajoutant les amis en d√©but de liste d‚Äôattente. Ces types de parcours peuvent √™tre utilis√©s dans de nombreux types de graphes. On consid√®re souvent des parcours d‚Äô<strong>arbres</strong> lorsqu‚Äôun un sommet n‚Äôest jamais visit√© deux fois.</p>

<p>Lorsqu‚Äôon essaie de r√©soudre des probl√®mes de plus en plus complexes, ce qu‚Äôon pourrait appeler intelligence artificielle, ces parcours de graphes reviennent tr√®s souvent. Par exemple, si on veut cr√©er un programme jouant aux √©checs, on va alors explorer le graphe des coups possibles, et essayer de s√©lectionner le meilleur coup possible. On ne cherche alors plus une simple information mais on cherche √† maximiser le score. Dans ce genre de probl√®me, l‚Äôalgorithme pr√©sent√© ici est malheureusement tr√®s inefficace √† cause de la taille du graphe/de l‚Äôarbre consid√©r√©. Mais des algorithmes tr√®s efficaces existent, dont on aura peut-√™tre l‚Äôoccasion de reparler.</p>]]></content><author><name>smbct</name></author><category term="optimisation" /><category term="graphes" /><category term="file" /><category term="algorithme" /><summary type="html"><![CDATA[Trouver un chemin, ou m√™me le plus court chemin, est un probl√®me courant en informatique. Parmi les applications concr√®tes de ce probl√®me, on peut tout d‚Äôabord penser √† l‚Äôitin√©raire le plus court, donn√© par un dispositif GPS. Ce n‚Äôest cependant pas la seule application r√©elle. On peut par exemple chercher un plus court chemin pour une IA dans un jeu ou encore trouver la mani√®re la plus rapide de mettre deux personnes en relation dans un r√©seau professionnel.]]></summary></entry><entry><title type="html">Optimisation et sudoku</title><link href="http://localhost:4000/optimisation/ia/jeux/2016/08/02/sudoku.html" rel="alternate" type="text/html" title="Optimisation et sudoku" /><published>2016-08-02T15:20:33+02:00</published><updated>2016-08-02T15:20:33+02:00</updated><id>http://localhost:4000/optimisation/ia/jeux/2016/08/02/sudoku</id><content type="html" xml:base="http://localhost:4000/optimisation/ia/jeux/2016/08/02/sudoku.html"><![CDATA[<p>La programmation lin√©aire est un formalisme permettant de traiter des probl√®mes tr√®s larges. C‚Äôest ce que je voudrais montrer aujourd‚Äôhui en donnant la mod√©lisation sous forme d‚Äôun programme lin√©aire de la r√©solution d‚Äôun sudoku. La mod√©lisation va donc √™tre moins √©vidente qu‚Äôavec l‚Äôexemple pr√©sent√© dans l‚Äôarticle sur la programmation lin√©aire.</p>

<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

<h2 id="pr√©sentation-du-probl√®me">Pr√©sentation du probl√®me</h2>

<p>La r√©solution du sudoku consiste √† trouver des valeurs pour les cases vides d‚Äôune grille de telle sorte que plusieurs contraintes soient respect√©es. On cherche donc a repr√©senter ce probl√®me sous forme d‚Äôun programme lin√©aire. Plus pr√©cis√©ment, on veut trouver un ensemble de de variable traduisant les d√©cisions √† prendre pour r√©soudre le probl√®me. Les d√©cisions sont ici les chiffres √† ins√©rer dans les cases vides.</p>

<blockquote class="prompt-info">
  <p>Et en quoi c‚Äôest un probl√®me d‚Äôoptimisation ?</p>
</blockquote>

<p>Ce n‚Äôest tout simplement pas un probl√®me d‚Äôoptimisation. On cherche une valeur pour chaque case telle que la grille soit correcte. Cependant, la programmation lin√©aire peut tout de m√™me nous venir en aide. M√™me s‚Äôil y avait plusieurs solutions possibles, seule une nous int√©resse. On peut √©videmment d√©finir une fonction objectif pour obtenir des conditions suppl√©mentaires sur le r√©sultat mais √ßa n‚Äôaurait pas d‚Äôint√©r√™t pratique. Le fait est que trouver une solution r√©alisable (c‚Äôest √† dire une grille valide) est facile √† faire lorsqu‚Äôon sait trouver la solution optimale d‚Äôun probl√®me. Donc bien que l‚Äôoptimisation n‚Äôait pas vraiment de sens ici, on utilise un outil que l‚Äôon sait efficace pour r√©pondre √† une question plus facile.</p>

<h2 id="rappels-sur-le-jeu">Rappels sur le jeu</h2>

<p>Le probl√®me consiste donc √† remplir la grille de sudoku de taille 9*9 avec des valeurs valides. Les donn√©es du probl√®me sont donc un ensemble de valeur comprises entre 1 et 9 et les positions de ces valeurs dans la grille.</p>

<p>Voil√† la grille d‚Äôexemple que nous allons r√©soudre :</p>

<table>
  <tbody>
    <tr>
      <td>¬†</td>
      <td>¬†</td>
      <td>¬†</td>
      <td>*</td>
      <td>4</td>
      <td>¬†</td>
      <td>¬†</td>
      <td>*</td>
      <td>8</td>
      <td>7</td>
      <td>¬†</td>
    </tr>
    <tr>
      <td>¬†</td>
      <td>4</td>
      <td>7</td>
      <td>*</td>
      <td>¬†</td>
      <td>9</td>
      <td>2</td>
      <td>*</td>
      <td>¬†</td>
      <td>5</td>
      <td>¬†</td>
    </tr>
    <tr>
      <td>2</td>
      <td>¬†</td>
      <td>¬†</td>
      <td>*</td>
      <td>6</td>
      <td>¬†</td>
      <td>¬†</td>
      <td>*</td>
      <td>¬†</td>
      <td>3</td>
      <td>¬†</td>
    </tr>
    <tr>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
    </tr>
    <tr>
      <td>9</td>
      <td>7</td>
      <td>¬†</td>
      <td>*</td>
      <td>5</td>
      <td>¬†</td>
      <td>¬†</td>
      <td>*</td>
      <td>2</td>
      <td>¬†</td>
      <td>3</td>
    </tr>
    <tr>
      <td>5</td>
      <td>¬†</td>
      <td>8</td>
      <td>*</td>
      <td>¬†</td>
      <td>2</td>
      <td>4</td>
      <td>*</td>
      <td>7</td>
      <td>¬†</td>
      <td>6</td>
    </tr>
    <tr>
      <td>6</td>
      <td>¬†</td>
      <td>4</td>
      <td>*</td>
      <td>¬†</td>
      <td>¬†</td>
      <td>7</td>
      <td>*</td>
      <td>¬†</td>
      <td>8</td>
      <td>5</td>
    </tr>
    <tr>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
    </tr>
    <tr>
      <td>¬†</td>
      <td>9</td>
      <td>¬†</td>
      <td>*</td>
      <td>3</td>
      <td>¬†</td>
      <td>8</td>
      <td>*</td>
      <td>¬†</td>
      <td>¬†</td>
      <td>7</td>
    </tr>
    <tr>
      <td>¬†</td>
      <td>¬†</td>
      <td>3</td>
      <td>*</td>
      <td>2</td>
      <td>4</td>
      <td>¬†</td>
      <td>*</td>
      <td>1</td>
      <td>6</td>
      <td>¬†</td>
    </tr>
    <tr>
      <td>¬†</td>
      <td>1</td>
      <td>2</td>
      <td>*</td>
      <td>¬†</td>
      <td>¬†</td>
      <td>¬†</td>
      <td>*</td>
      <td>¬†</td>
      <td>9</td>
      <td>¬†</td>
    </tr>
  </tbody>
</table>

<p>J‚Äôai rajouter des cases suppl√©mentaires afin de visualiser les diff√©rentes zones. On veut donc trouver des valeurs pour les cases vides tout en respectant certaines contraintes :</p>

<ol>
  <li>Les valeurs des cases sont comprises entre 1 et 9</li>
  <li>Sur chaque ligne, on ne peut pas trouver plusieurs cases ayant la m√™me valeur</li>
  <li>Sur chaque colonne, on ne peut pas trouver non plus plusieurs cases ayant la m√™me valeur</li>
  <li>Dans chaque bloc de 3*3 cases mat√©rialis√© dans la grille ci-dessus, on ne peut encore pas trouver plusieurs fois la m√™me valeur</li>
</ol>

<h2 id="mod√©lisation-du-probl√®me">Mod√©lisation du probl√®me</h2>

<p>Comme pour la mod√©lisation de l‚Äôarticle sur la programmation lin√©aire, on va proc√©der par √©tape. Tout d‚Äôabord, on va choisir les variables du probl√®me et ensuite on √©crira les diff√©rentes contraintes. La mod√©lisation sera ensuite termin√©s car il n‚Äôy a pas de fonction objectif. Il est toutefois possible d‚Äôen mettre une quelconque. Cela peut √™tre n√©cessaire si le solver utilis√© (le programme de r√©solution) ne permet pas de r√©soudre des probl√®mes sans fonction objectif. Mais encore une fois, peu importe la fonction objectif. A partir du moment o√π les contraintes sont respect√©es et la mod√©lisation est correcte, la r√©solution donnera une solution correcte √† notre probl√®me.</p>

<h3 id="les-variables">Les variables</h3>

<p>Lorsque j‚Äôai commenc√© √† r√©fl√©chir au probl√®me, j‚Äôai voulu choisir une variable par case. Comme cela, on obtenait √† la fin de la r√©solution directement la valeur de chaque case. Ce choix me semblait naturel mais la mod√©lisation qui en r√©sultait n‚Äô√©tait pas simple. En effet, de cette fa√ßon, toutes les contraintes ne sont pas faciles √† traduire en terme de programme lin√©aire. Bien s√ªr, la contrainte n¬∞1 est tr√®s simple mais pour les contraintes suivantes, ce n‚Äôest pas la m√™me chose. On veut exprimer le fait qu‚Äôune variable ne peut pas √™tre √©gale √† une autre variable ou √† une constant.</p>

<p>Par exemple, si on se situe dans la case en haut √† gauche de la grille et on consid√®re la premi√®re colonne, on ne pourra pas choisir 2, 9, 5 et 6 comme valeur. On voudrait donc √©crire quelque chose comme : \(var \neq 2\), \(var \neq 9\), etc‚Ä¶  Ces in√©galit√©s ne sont pas valides en programmation lin√©aire. On pourrait les remplacer par quelque chose comme \(var &lt; 2\) ou \(var &gt; 2\) pour la premi√®re. Encore une fois, on se heurte √† plusieurs obstacles. Premi√®rement, les in√©galit√©s de programmes lin√©aires sont seulement des in√©galit√©s larges. Ici, comme on ne manipule uniquement des entiers, on peut √©crire √† la place : \(var \leq 1\) <em>ou</em> \(var \geq 3\). On peut alors sembler √™tre tir√© d‚Äôaffaire mais‚Ä¶ toujours pas ! Il faut en effet se rappeler que les contraintes d‚Äôun programme lin√©aire doivent √™tre v√©rifi√©e simultan√©ment. C‚Äôest donc le <em>ou</em> qui pose probl√®me ici. Enfin, le nombre de contrainte √† √©crire devient tr√®s important. En effet, pour chaque variable, on a besoin de 19 contraintes. Face √† tous ces inconv√©nients, on va donc chercher un meilleur moyen de mod√©liser le soduko.</p>

<blockquote class="prompt-info">
  <p>En r√©alit√©, il existe une astuce pour mod√©liser un <em>ou</em>. Celle-ci repose sur l‚Äôutilisation d‚Äôune variable interm√©diaire et la technique utilis√©e n‚Äôest pas forc√©ment √©l√©gante. De plus, vu le nombre de contrainte, il est pr√©f√©rable de laisser √ßa de c√¥t√©.</p>
</blockquote>

<p>La mod√©lisation alternative profite d‚Äôune particularit√© du probl√®me : le nombre de valeur que peut prendre chaque case est assez limit√©. On va utiliser des variables que l‚Äôon appelle variables binaires. Contrairement aux variables classiques, celles-ci ne peuvent prendre que deux valeurs possibles : 0 ou 1. Ces variables apparaissent naturellement dans beaucoup de probl√®mes d‚Äôoptimisation car elles repr√©sentent le fait de prendre ou de ne pas prendre une d√©cision. On peut obtenir le m√™me type de r√©sultat en utilisant des variables enti√®res et en les bornant mais il faut garder √† l‚Äôesprit qu‚Äôil existe des m√©thodes particuli√®res pour traiter ces variables de mani√®re efficace.</p>

<p>Pour revenir √† notre probl√®me, au lieu d‚Äôutiliser une variable par case, on va en utiliser 9 ! Pour chaque case, une des 9 variables aura la valeur <em>1</em> et c‚Äôest le num√©ro de cette variable qui sera ins√©r√© dans la grille. Par exemple, consid√©rons la 5i√®me variable de la premi√®re case. Elle repr√©sente la d√©cision de choisir 5 comme valeur pour la premi√®re case. Si cette variable est affect√©e √† 1, on choisit 5, sinon, on ne choisit pas 5.</p>

<blockquote class="prompt-info">
  <p>Minute ! √ßa veut dire que pour une m√™me case, on peut choisir plusieurs valeurs en m√™me temps ?</p>
</blockquote>

<p>Dans l‚Äô√©tat oui. Mais on n‚Äôa pas encore commenc√© √† √©crire les contraintes. C‚Äôest justement ce que l‚Äôon s‚Äôappr√™te √† faire. Et nous allons voir que √ßa se fait plut√¥t bien finalement. Pour la suite, on consid√®re que la variable \(x_{i/j_k}\) repr√©sente le fait de choisir la valeur k pour la case (i,j). i repr√©sente la ligne de la grille et j la colonne. On consid√®re √©galement que la case en haut √† gauche a pour coordonn√©e (0,0) et que les indices sont croissants quand on se d√©place vers le bas ou vers la droite.</p>

<h3 id="les-contraintes">Les contraintes</h3>

<p>On peut commencer par remarquer que la premi√®re contrainte n‚Äôest plus n√©cessaire. En effet, la nature des variables a une incidence directe sur les contraintes et il n‚Äôest plus possible de choisir une valeur non permise pour une case.</p>

<p>La premi√®re contrainte qui peut venir √† l‚Äôesprit concerne le fait de choisir plusieurs valeurs pour une case. Cette contrainte est tr√®s simple a √©crire. √âtant donn√© que toutes les variables concernant une case ne peuvent avoir pour valeur uniquement 0 ou 1 et qu‚Äôune seule de ces variables doit √™tre √† 1, il suffit d‚Äô√©crire \(\sum\limits_{k=1}^9 x_{i,j/k} = 1\).</p>

<p>Ensuite, on veut traduire le fait qu‚Äôune valeur ne peut appara√Ætre deux fois dans une ligne. Comme pr√©c√©demment, il suffit de tester si la somme des variables concernant la <em>m√™me valeur</em> dans une colonne est √©gale √† 1. On obtient \(\sum\limits_{j=0}^8 x_{i,j/k} = 1\).</p>

<p>On veut enfin le faire pour les colonnes et les les blocs 3*3. Pour les colonnes, cela donne \(\sum\limits_{i=0}^8 x_{i,j/k} = 1\). Pour le premier bloc, c‚Äôest \(\sum\limits_{i=0}^2 \sum\limits_{j=0}^2 (x_{i,j/k} = 1)\).</p>

<h2 id="le-programme-lin√©aire">Le programme lin√©aire</h2>

<p>On peut donc r√©capituler tout √ßa sous forme d‚Äôun programme lin√©aire. Une petite r√©flexion cependant √† propos des variables : Pour simplifier l‚Äô√©criture du programme, on peut d√©cider de d√©finir les 9 variable pour <em>toutes</em> les cases. Or, certaines cases ont une valeur fix√©e par les donn√©es de la grille. Pour ces cases, les contraintes seront donc des √©galit√©s qui fixeront les valeurs. Ces variables sont √† priori inutiles mais cela permet de gagner du temps sur l‚Äô√©criture du solver.</p>

<p>On obtient donc finalement le programme lin√©aire suivant :</p>

\[max \,z = 0\\
	 \begin{align*}
		s.c. \sum\limits_{k=1}^9 x_{i,j/k} &amp;= 1, i \in \{0, .., 8\}, j \in \{0, .., 8\} \\
            \sum\limits_{j=0}^8 x_{i,j/k} &amp;= 1, i \in \{0, .., 8\}, k \in \{1, .., 9\} \\
            \sum\limits_{i=0}^8 x_{i,j/k} &amp;= 1, j \in \{0, .., 8\}, k \in \{1, .., 9\} \\
            \sum\limits_{i=l}^{l+2} \sum\limits_{j=m}^{m+2} (x_{i,j/k} &amp;= 1), l, m \in \{0,3,6\}, k \in \{1, .., 9\} \\
			x_{i,j/k} &amp;\in \{0, 1\}
	\end{align*}\]

<h2 id="conclusion">Conclusion</h2>

<p>Cet exemple nous montre donc que la programmation lin√©aire qui semblait plut√¥t limit√©e permet en fait de mod√©liser un large √©ventail de probl√®me.
Plus les probl√®mes sont complexes, plus il faut avoir recours √† des astuces afin de r√©ussir √† les mod√©liser correctement.
Il faut aussi faire attention √† ce que le nombre de contrainte ne soit pas trop important. En effet, cela peut compromettre la r√©solution car les solvers ne sont pas infaillibles et ces probl√®mes restent des probl√®mes difficiles en informatique.
On peut par exemple citer le probl√®me du voyageur de commerce avec son nombre tr√®s important de contrainte qui le rend particuli√®rement difficile √† r√©soudre.</p>

<p>J‚Äôai cr√©√© un programme se basant sur ce billet pour r√©soudre des grilles de sudoku.
Le code source est disponible <a href="https://github.com/smbct/blog_code/tree/master/sudoplex">ici</a>.
Le programme a √©t√© √©crit en c++ et utilise la biblioth√®que <a href="https://www.gnu.org/software/glpk/">glpk</a> pour la r√©solution du probl√®me.
Les d√©tails pour le compiler se trouvent dans le readme. On peut remarquer en testant le programme que le temps de r√©solution est tr√®s court, malgr√© un nombre important de contrainte.</p>

<p>Enfin, il faut tout de m√™me garder √† l‚Äôesprit que la programmation lin√©aire n‚Äôest pas le seul moyen de r√©soudre ce probl√®me et qu‚Äôil n‚Äôest pas le plus adapt√©.
Il donne ici un bon exemple de ce qu‚Äôil est possibles de faire en mod√©lisation avec des variables binaires mais ce n‚Äôest pas forc√©ment la m√©thode la plus rapide.</p>

<p>Pour finir je vous donne le r√©sultat de la r√©solution de la grille donn√©e plus haut.
Et bien s√ªr, elle a √©t√© r√©solue avec le programme lin√©aire !</p>

<table>
  <tbody>
    <tr>
      <td>1</td>
      <td>6</td>
      <td>9</td>
      <td>*</td>
      <td>4</td>
      <td>5</td>
      <td>3</td>
      <td>*</td>
      <td>8</td>
      <td>7</td>
      <td>2</td>
    </tr>
    <tr>
      <td>3</td>
      <td>4</td>
      <td>7</td>
      <td>*</td>
      <td>8</td>
      <td>9</td>
      <td>2</td>
      <td>*</td>
      <td>6</td>
      <td>5</td>
      <td>1</td>
    </tr>
    <tr>
      <td>2</td>
      <td>8</td>
      <td>5</td>
      <td>*</td>
      <td>6</td>
      <td>7</td>
      <td>1</td>
      <td>*</td>
      <td>4</td>
      <td>3</td>
      <td>9</td>
    </tr>
    <tr>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
    </tr>
    <tr>
      <td>9</td>
      <td>7</td>
      <td>1</td>
      <td>*</td>
      <td>5</td>
      <td>8</td>
      <td>6</td>
      <td>*</td>
      <td>2</td>
      <td>4</td>
      <td>3</td>
    </tr>
    <tr>
      <td>5</td>
      <td>3</td>
      <td>8</td>
      <td>*</td>
      <td>9</td>
      <td>2</td>
      <td>4</td>
      <td>*</td>
      <td>7</td>
      <td>1</td>
      <td>6</td>
    </tr>
    <tr>
      <td>6</td>
      <td>2</td>
      <td>4</td>
      <td>*</td>
      <td>1</td>
      <td>3</td>
      <td>7</td>
      <td>*</td>
      <td>9</td>
      <td>8</td>
      <td>5</td>
    </tr>
    <tr>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
    </tr>
    <tr>
      <td>4</td>
      <td>9</td>
      <td>6</td>
      <td>*</td>
      <td>3</td>
      <td>1</td>
      <td>8</td>
      <td>*</td>
      <td>5</td>
      <td>2</td>
      <td>7</td>
    </tr>
    <tr>
      <td>7</td>
      <td>5</td>
      <td>3</td>
      <td>*</td>
      <td>2</td>
      <td>4</td>
      <td>9</td>
      <td>*</td>
      <td>1</td>
      <td>6</td>
      <td>8</td>
    </tr>
    <tr>
      <td>8</td>
      <td>1</td>
      <td>2</td>
      <td>*</td>
      <td>7</td>
      <td>6</td>
      <td>5</td>
      <td>*</td>
      <td>3</td>
      <td>9</td>
      <td>4</td>
    </tr>
  </tbody>
</table>]]></content><author><name>smbct</name></author><category term="optimisation" /><category term="IA" /><category term="jeux" /><summary type="html"><![CDATA[La programmation lin√©aire est un formalisme permettant de traiter des probl√®mes tr√®s larges. C‚Äôest ce que je voudrais montrer aujourd‚Äôhui en donnant la mod√©lisation sous forme d‚Äôun programme lin√©aire de la r√©solution d‚Äôun sudoku. La mod√©lisation va donc √™tre moins √©vidente qu‚Äôavec l‚Äôexemple pr√©sent√© dans l‚Äôarticle sur la programmation lin√©aire.]]></summary></entry><entry><title type="html">Programmation lin√©aire</title><link href="http://localhost:4000/optimisation/2016/04/16/programmation-lineaire.html" rel="alternate" type="text/html" title="Programmation lin√©aire" /><published>2016-04-16T21:20:33+02:00</published><updated>2016-04-16T21:20:33+02:00</updated><id>http://localhost:4000/optimisation/2016/04/16/programmation-lineaire</id><content type="html" xml:base="http://localhost:4000/optimisation/2016/04/16/programmation-lineaire.html"><![CDATA[<p>Pour un premier article, j‚Äôai choisi de parler d‚Äôun sujet que je vais avoir probablement l‚Äôoccasion d‚Äô√©voquer √† nouveau par la suite : la programmation lin√©aire.
Pour commencer, clarifions un peu les termes. Le mot programmation ne signifie pas ici √©crire des lignes de code, contrairement √† ce que l‚Äôon pourrait penser. Programmer veut ici dire planifier. La programmation lin√©aire (ou encore optimisation lin√©aire) regroupe un ensemble de probl√®mes d‚Äôoptimisation, et des m√©thodes efficaces pour les traiter.</p>

<blockquote class="prompt-info">
  <p>Mais au fait, c‚Äôest quoi l‚Äôoptimisation finalement ?</p>
</blockquote>

<p>Optimiser, c‚Äôest essayer de faire de la meilleure fa√ßon possible. Cela peut concerner le fait de partir d‚Äôune fa√ßon de faire, d‚Äôune proc√©dure, d‚Äôun plan, et trouver des moyens de l‚Äôam√©liorer pour traiter au mieux une situation. Cela peut aussi concerner le fait de pr√©voir √† l‚Äôavance quelle va √™tre la meilleure strat√©gie pour attaquer un probl√®me. L‚Äôam√©liorer peut alors vouloir dire gagner du temps, r√©duire des d√©penses, maximiser ses chances, etc‚Ä¶</p>

<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

<h2 id="loptimisation-en-maths-et-en-info">L‚Äôoptimisation en maths et en info</h2>

<p>En math√©matiques, l‚Äôoptimisation est une notion tr√®s pr√©cise. Optimiser signifie trouver les valeurs maximale et minimale que peut atteindre une fonction.</p>

<blockquote class="prompt-info">
  <p>Et pourquoi un maximum ou un minimum ?</p>
</blockquote>

<p>Il n‚Äôest pas forc√©ment √©vident aux premiers abords qu‚Äôun probl√®me d‚Äôoptimisation est un probl√®me de recherche de maximum ou de minimum. Cependant, en y r√©fl√©chissant, derri√®re tout probl√®me d‚Äôoptimisation se cache un min ou un max. Par exemple, dans certaines situations, on veut optimiser le temps mis pour faire une action. Cela veut alors dire prendre le moins de temps possible. On cherche bien un minimum. Dans d‚Äôautres contextes, on peut aussi chercher √† optimiser un gain. On cherche alors √† obtenir le gain maximum.</p>

<p>Donc si l‚Äôon veut traduire un probl√®me d‚Äôoptimisation naturel en probl√®me math√©matique, cela consiste donc √† trouver une fonction qui exprime le mieux possible la quantit√© √† optimiser (que √ßa soit du temps, de l‚Äôargent, etc‚Ä¶)</p>

<p>Passer d‚Äôun probl√®me r√©el √† un probl√®me math√©matique, c‚Äôest l‚Äôaction de mod√©liser. Une des premi√®re chose √† faire pour mod√©liser un probl√®me, c‚Äôest identifier les variables. Les variables sont impliqu√©es de le calcul de la fonction √† optimiser. Elles correspondent pour le probl√®me r√©el aux diff√©rentes d√©cisions que l‚Äôon peut prendre (par exemple, ‚Äúcombien d‚Äôunit√© produire ?‚Äù ou encore ‚Äúdoit-on activer cette option ?‚Äù).</p>

<p>Une autre chose que l‚Äôon doit prendre en compte lorsque l‚Äôon optimise est la pr√©sence de contraintes. En effet, les variables de notre fonction (que l‚Äôon appelle variables de d√©cision) ne peuvent pas prendre n‚Äôimporte quelles valeurs ! Par exemple, si nos variables concernent un nombre d‚Äôunit√© √† produire, on ne peut pas √©videmment pas produire en quantit√© infinie. Les ressources disponibles entre donc en compte dans ce type de probl√®me. Par ailleurs, les contraintes apparaissent parfois de mani√®re plus subtile.</p>

<blockquote class="prompt-info">
  <p>Mais alors, pourquoi parler d‚Äôinformatique ?</p>
</blockquote>

<p>Comme on l‚Äôa vu pr√©c√©demment, les math√©matiques nous offrent des outils puissants pour traiter les probl√®mes d‚Äôoptimisation. En effet, une fois que le probl√®me est mod√©lis√©, on peut appliquer des th√©or√®mes pour calculer le maximum ou le minimum de fonctions.</p>

<p>Cependant, les probl√®mes que l‚Äôon veut r√©soudre peuvent parfois comporter des milliers de variables. On ne peut donc plus esp√©rer r√©soudre ces probl√®mes √† la main. C‚Äôest pourquoi il a fallut mettre en place des algorithmes capable de calculer ce genre de chose le plus rapidement possible.</p>

<p>Impl√©menter des m√©thodes de calculs automatiques ne suffit toutefois pas √† r√©soudre tous les probl√®mes. Certains probl√®mes sont en effet par nature tr√®s difficiles √† r√©soudre et les algorithmes g√©n√©raux prennent √©norm√©ment de temps. Les outils math√©matiques sont limit√©s pour ces probl√®mes. Il est donc n√©cessaire de les √©tudier en profondeur afin de trouver des techniques algorithmiques adapt√©es pour la r√©solution.</p>

<blockquote class="prompt-info">
  <p>Une des caract√©ristiques du domaine est qu‚Äôil n‚Äôexiste pas de m√©thode g√©n√©rale efficace pour traiter n‚Äôimporte quel probl√®me.</p>
</blockquote>

<h2 id="la-programmation-lin√©aire-dans-tout-√ßa">La programmation lin√©aire dans tout √ßa</h2>

<p>La programmation lin√©aire d√©signe un ensemble de r√®gles que l‚Äôon se donne pour repr√©senter sous forme math√©matique un probl√®me r√©el. Le but du jeu est de repr√©senter notre probl√®me concret sous forme d‚Äôune fonction math√©matique et d‚Äôun ensemble de contraintes, en respectant ces r√®gles.</p>

<p>En programmation lin√©aire, on consid√®re donc une fonction √† optimiser, sous plusieurs contrainte. La limite impos√©e est le fait que la fonction et les contraintes doivent √™tre lin√©aires. Cela signifie que, dans l‚Äôexpression de la fonction et des contraintes a la forme d‚Äôune somme de variables multipli√©es par de coefficients. On ne peut ainsi pas multiplier deux variables, diviser deux variables, appliquer une racine, etc‚Ä¶</p>

<p>Ces limitations peuvent para√Ætre tr√®s contraignantes. Cependant, un tr√®s grand nombre de probl√®mes r√©els peuvent se mod√©liser de cette fa√ßon. Parfois, il faut avoir recours √† certains tricks mais ceux-ci sont facilement int√©gr√©s par exp√©rience. Il faut enfin retenir que si l‚Äôon se contraint, c‚Äôest parceque les m√©thodes algorithmiques disponibles pour ces probl√®mes sont tr√®s efficaces. Il vaut donc mieux se creuser la t√™te et trouver une bonne mod√©lisation en programmation lin√©aire plut√¥t que d‚Äôavoir √† r√©soudre un probl√®me non lin√©aire.</p>

<h2 id="un-premier-exemple-de-mod√©lisation">Un premier exemple de mod√©lisation</h2>

<p>Prenons un premier exemple de mod√©lisation.</p>

<p><img src="/assets/cookies.jpg" alt="Des cookies !" /></p>

<p>Partons d‚Äôune situation simple : nous allons recevoir des invit√©s et nous voulons leur pr√©parer deux types de petits biscuits. Les deux demandent les m√™mes ingr√©dients : de la farine et du sucre.</p>

<p>Mais voil√†, nous disposons de ces deux ingr√©dients en quantit√© limit√© malheureusement. De plus, les convives √† qui sont destin√©s ces biscuits n‚Äôont pas tous les m√™mes go√ªts. Ainsi, il ne faut pas produire les deux types de biscuits en m√™me quantit√©. La question est alors : combien de biscuit de chaque type produire ? Dans l‚Äôexemple pr√©sent√©, les donn√©es sont issues de recettes respectives de madeleines et de biscuits √† la cannelle.</p>

<h3 id="les-variables-du-probl√®me">Les variables du probl√®me</h3>

<p>La premi√®re √©tape de la mod√©lisation consiste √† trouver les variables du probl√®me. Ici, les variables sont faciles √† trouver. La question concerne directement le nombre de biscuit √† produire. On d√©finit donc deux variables : \(x_1\) repr√©sentant le nombre de biscuit de type 1 que l‚Äôon veut cr√©er et \(x_2\) repr√©sentant le nombre de biscuit de type 2.</p>

<h3 id="les-contraintes">Les contraintes</h3>

<p>Une fois les variables trouv√©es, on peut regarder les contraintes. Pour ce probl√®me, il y a deux contraintes li√©es aux ressources disponible (farine et sucre), une contrainte concernant les convives et enfin des contraintes plus g√©n√©rales, et enfin des contraintes structurelles.</p>

<p>Tout d‚Äôabord, on peut d√©finir la contrainte pour la farine. On suppose que l‚Äôon dispose d‚Äôun kilogramme de farine. La recette nous indique √©galement qu‚Äôil faut 4.2 g de farine pour un biscuit de type 1 et 15 g de farine pour les biscuits de type 2. On en d√©duit donc la contrainte \(4.2 x_1 + 15 x_2 \leq 1000\).</p>

<p>On proc√®de de mani√®re similaire pour le sucre. On obtient : \(5.8 x_1 + 7.5 x_2 \leq 1000\).</p>

<p>La contrainte suivante traduit une pr√©f√©rence des convives. On suppose qu‚Äôun quart de invit√©s n‚Äôaime pas les biscuits du type 1. Par ailleurs, il n‚Äôy a pas de pr√©f√©rence pour ceux du type 2. On en d√©duit : \(x_1 \leq \frac{1}{4} (x_1 + x_2)\)</p>

<p>Enfin, on ne peut pas produire un nombre n√©gatif de biscuit. On a donc \(x_1, x_2 \geq 0\). De plus, on ne peut pas produire de demi-biscuit. Heureusement, en programmation lin√©aire, nous pouvons r√©soudre des probl√®mes avec des variables dites enti√®res. On a donc comme derni√®re contrainte : \(x_1, x_2 \in \mathbb{Z}\).</p>

<h3 id="la-fonction-objectif">La fonction objectif</h3>

<p>Il ne reste plus qu‚Äô√† √©crire la fonction √† optimiser. Ici, on veut maximiser la nombre de g√¢teau produit. La fonction est donc \(z = x_1 + x_2\).</p>

<p>On peut donc r√©capituler le mod√®le de notre probl√®me :</p>

\[\text{max} \,z = x_{1} + x_{2}\\
	 \begin{align*}
		s.c.\quad 4.2 x_1 + 15 x_2 &amp;\leq 1000 \\
			5.8 x_1 + 7.5 x_2 &amp;\leq 1000 \\
			x_1 &amp;\leq \frac{1}{4} (x_1 + x_2) \\
			x_1, x_2 &amp;\in \mathbb{N}
	\end{align*}\]

<p>Je passe les d√©tails de la r√©solution de ce probl√®me car cela n√©cessiterait plusieurs articles. Elle est n√©anmoins bas√©e sur la m√©thode du branch and bound et l‚Äôalgorithme du simplexe. Apr√®s r√©solution, on trouve \(x_1 = 20\) et \(x_2 = 61\). Nous allons donc pouvoir confectionner 81 g√¢teaux pour nos invit√©s.</p>

<h2 id="conclusion">Conclusion</h2>

<p>La programmation lin√©aire est donc un outil tr√®s int√©ressant pour l‚Äôoptimisation. Malheureusement, ce n‚Äôest pas un outil infaillible. M√™me si les algorithmes utilis√©s pour r√©soudre ces probl√®mes sont tr√®s efficaces en variable continues (c‚Äôest √† dire lorsque les variables ne sont pas forc√©ment des entiers), ce n‚Äôest pas la m√™me chose pour les variables enti√®res ou binaires. L‚Äôid√©e est alors de profiter de toutes les sp√©cificit√©s du probl√®me que l‚Äôon traite afin d‚Äôen tirer avantage et de proposer des m√©thodes de r√©solution d√©di√©es. Parfois, on d√©cide carr√©ment de quitter le formalisme de la programmation lin√©aire et de traiter le probl√®me avec un autre outil mieux adapt√© (ex : les graphes). Les probl√®mes d‚Äôoptimisation sont donc loin d‚Äô√™tre parfaitement ma√Ætris√©s et cet article n‚Äôeffleure que tr√®s l√©g√®rement toutes les choses que l‚Äôon peut faire en optimisation.</p>

<h2 id="cr√©dit">Cr√©dit</h2>

<p>photo credit: <a href="http://www.flickr.com/photos/7702423@N04/26056556830">297/365/2853 (April 3, 2016) - Chocolate Coconut Cookies</a> via <a href="http://photopin.com">photopin</a> <a href="https://creativecommons.org/licenses/by-nc-sa/2.0/">(license)</a></p>]]></content><author><name>smbct</name></author><category term="optimisation" /><summary type="html"><![CDATA[Pour un premier article, j‚Äôai choisi de parler d‚Äôun sujet que je vais avoir probablement l‚Äôoccasion d‚Äô√©voquer √† nouveau par la suite : la programmation lin√©aire. Pour commencer, clarifions un peu les termes. Le mot programmation ne signifie pas ici √©crire des lignes de code, contrairement √† ce que l‚Äôon pourrait penser. Programmer veut ici dire planifier. La programmation lin√©aire (ou encore optimisation lin√©aire) regroupe un ensemble de probl√®mes d‚Äôoptimisation, et des m√©thodes efficaces pour les traiter.]]></summary></entry></feed>