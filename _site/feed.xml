<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://smbct.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://smbct.github.io/" rel="alternate" type="text/html" /><updated>2024-06-25T23:07:01+02:00</updated><id>https://smbct.github.io/feed.xml</id><title type="html">smbctâ€™s blog</title><subtitle>Notes on computer science, programming, society and more.</subtitle><author><name>smbct</name></author><entry><title type="html">Un Paris - Stockholm en train ğŸš†</title><link href="https://smbct.github.io/blog/stockholm_train/" rel="alternate" type="text/html" title="Un Paris - Stockholm en train ğŸš†" /><published>2024-06-07T10:00:00+02:00</published><updated>2024-06-07T10:00:00+02:00</updated><id>https://smbct.github.io/blog/stockholm_train</id><content type="html" xml:base="https://smbct.github.io/blog/stockholm_train/"><![CDATA[<p>Cette annÃ©e, mon travail mâ€™a donnÃ© la chance dâ€™assister Ã  une confÃ©rence de recherche en SuÃ¨de ğŸ‡¸ğŸ‡ª.
Malheureusement, les confÃ©rences de chercheurs ğŸ§‘â€ğŸ”¬ me renvoient une image de plus en plus nÃ©gative Ã  lâ€™heure de lâ€™urgence climatique.
Elles impliquent gÃ©nÃ©ralement que des centaines de personnes prennent lâ€™avion pour passer quelques jours seulement Ã  lâ€™Ã©tranger (potentiellement Ã  lâ€™autre bout du monde) Ã  Ã©couter des prÃ©sentations de travaux dâ€™autres chercheurs.
Lâ€™impacte individuel des dÃ©placements en avion en terme dâ€™Ã©missions COâ‚‚ est Ã©norme.
Est-ce que ces dÃ©placements valent vraiment le coup dans un monde aux ressources fragiles, qui souffre Ã©normÃ©ment de lâ€™activitÃ© humaine ?</p>

<p>En tout cas je suis dÃ©cidÃ© personnellement: aucuns de mes dÃ©placements ne justifient un impact aussi nÃ©gatif âŒ.
Je choisis donc de me comporter de maniÃ¨re stricte : soit jâ€™effectue mes dÃ©placements en train ou bus, soit je ne ne me dÃ©place pas !
Dans ce cas-ci, le laboratoire qui mâ€™emploie nâ€™a pas Ã©mis dâ€™objections pour que je mâ€™y rende en train âœ….
Une aubaine pour moi car ce type de voyage mâ€™intÃ©ressait depuis un certain temps !</p>

<p><img src="/assets/stockholm/suede_1.jpg" alt="Un chemin de fer." /></p>

<h2 id="mon-plan-de-voyage">Mon plan de voyage</h2>

<p>Jâ€™ai donc planifiÃ© mon Paris-Stockholm en train.
Plus prÃ©cisÃ©ment, ma destination finale dans ce voyage est en fait Uppsala, une petite ville un peu plus au nord par rapport Ã  Stockholm.
Ce trajet est particuliÃ¨rement opportun pour moi car, ayant des amis qui vivent Ã  Stockholm, jâ€™ai dÃ©cidÃ© de mâ€™y arrÃªter quelques jours avant la confÃ©rence.
Je pouvais ensuite rejoindre Uppsala en train pour un trajet de 40 minutes environ.</p>

<p>Le plus directe pour rejoindre Stockholm en train depuis la France est de passer par le Danemark.
En effet, il existe des ponts ğŸŒ‰ au Danemark et entre le Danemark et la SuÃ¨de pour connecter les diffÃ©rentes Ã®les, empruntables en voiture mais Ã©galement <a href="https://fr.wikipedia.org/wiki/Ligne_de_Copenhague_%C3%A0_Malm%C3%B6">en train</a> !</p>

<p><img src="https://upload.wikimedia.org/wikipedia/commons/0/06/%C3%96resundsbron_fr%C3%A5n_Lernacken.jpg" alt="Le pont de l'Ã˜resund entre le Danemark et la SuÃ¨de." />
<span style="font-size:0.7em;">Le <a href="https://fr.wikipedia.org/wiki/Pont_de_l%27%C3%98resund">pont de lâ€™Ã˜resund</a> entre le Danemark et la SuÃ¨de, image empruntÃ©e de <a href="https://fr.wikipedia.org/wiki/Pont_de_l%27%C3%98resund#/media/Fichier:%C3%96resundsbron_fr%C3%A5n_Lernacken.jpg">WikipÃ©dia</a>.</span></p>

<p>Pour rejoindre le Danemark, il parait Ã©vident de passer par Hambourg, une des plus grandes villes dâ€™Allemagne et relativement proche de la frontiÃ¨re avec le Danemark.
Voulant effectuer le trajet rapidement en Ã©vitant au maximum les nuits dâ€™hÃ´tel, jâ€™ai dÃ©cidÃ© dâ€™effectuer le trajet entre Hambourg et Stockholm de nuit, ce qui est possible grÃ¢ce Ã  un train de nuit direct opÃ©rÃ© par la sociÃ©tÃ© ferroviaire suÃ©doise (la ligne complÃ¨te va en fait de Berlin Ã  Stockholm, et inversement).
Lâ€™autre partie du trajet consiste donc Ã  effectuer un Paris - Hambourg, ce qui est faisable Ã  la journÃ©e.</p>

<p>Pour les non parisiens, il faut Ã©ventuellement rajouter Ã  cela une Ã©tape supplÃ©mentaire que je ne dÃ©taille pas ici pour rejoindre Paris (soit la veille, soit suffisamment tÃ´t).
Cette Ã©tape peut probablement Ãªtre sautÃ©e pour les personnes vivant dans lâ€™est de la France.</p>

<p><img src="https://i.pinimg.com/originals/e3/b3/5c/e3b35c9e96b9c906e0b2c68ec5db783d.gif" alt="Carte des chemins de fer en Europe." />
<span style="font-size:0.7em;">Carte des chemins de fer en Europe, empruntÃ©e de <a href="https://trainmaps.netlify.app/rail-europe-train-maps.html">Train World</a>.</span></p>

<p>Pour rÃ©capituler, lâ€™idÃ©e est donc de partir de Paris au matin pour me rendre Ã  Hambourg en fin dâ€™aprÃ¨s-midi.
Ce trajet Ã©tait prÃ©vu initialement avec une unique correspondance en Allemagne.
AprÃ¨s cela, le train de nuit au dÃ©part dâ€™Hambourg me permet dâ€™arriver Ã  Stockholm dans la matinÃ©e de la journÃ©e suivante.
<strong>PlutÃ´t simple, nâ€™est-ce pas ?</strong></p>

<h4 id="les-premiers-soucis-avant-le-dÃ©part">Les premiers soucis avant le dÃ©part</h4>

<p>Jâ€™Ã©tais Ã©videmment conscient avant de partir quâ€™un tel trajet en train est assez risquÃ© : il suffit quâ€™un train saute ou quâ€™une correspondance ne soit pas possible pour que cela se rÃ©percute sur tous les autres trains ğŸ€Ÿ.
Pire encore, le trajet Ã©tant composÃ© par mes soins avec deux parties distinctes, les diffÃ©rentes compagnies ferroviaires nâ€™ont aucune obligation dâ€™assurer les correspondances entre ces deux parties et de nous assister en cas de problÃ¨mes.</p>

<p>Pour anticiper les problÃ¨mes, jâ€™ai effectuÃ© les rÃ©servations le plus tÃ´t possible et de maniÃ¨re flexible, permettant dâ€™Ã©changer les billets tardivement en cas de besoin.
Voyageant dans un cadre professionnel, je suis passÃ© par le prestataire en contrat avec mon employeur ce qui a un peu ralenti et compliquÃ© le processus car les informations Ã©taient transmises de maniÃ¨re indirecte.
Des travaux prÃ©vus sur les voies pour le trajet entre Hambourg et Stockholm ont notamment retardÃ© la prÃ©paration du voyage car les billets nâ€™Ã©taient pas disponibles Ã  la vente quand jâ€™ai commencÃ© Ã  planifier le voyage.</p>

<p>Les premiers soucis sur ce voyage se sont par ailleurs prÃ©sentÃ©s peu de temps avant le dÃ©part.
Un mail envoyÃ© un jour plus tÃ´t de la part de la Deutsche Bahn (compagnie ferroviaire allemande) a en effet prÃ©venu que la correspondance du trajet entre Paris et Hambourg ne peut pouvait Ãªtre assurÃ©e et invitait a choisir parmi <strong>3 trajets alternatifs</strong> proposÃ©s.</p>

<p><img src="/assets/stockholm/db_message.png" alt="Le message en question." />
<span style="font-size:0.7em;">Le message envoyÃ© par la Deutsche Bahn avant le dÃ©part.</span></p>

<p>Jâ€™ai eu de premiers doutes en recevant ce message car les trajets alternatifs proposÃ©s impliquaient dâ€™emprunter des trains eurostar (ex <a href="https://www.eurostar.com/fr-fr/a-propos-deurostar/thalys-devient-eurostar">thalys</a>) Ã  Paris.
Il me paraissait suspect que mon billet de train allemand soit rÃ©ellement recevable sur ces trainsâ€¦
Peu importe, le trajet Ã©tait prÃ©vu donc je dÃ©cidai de voir sur place Ã  Paris le lendemain !</p>

<h2 id="le-voyage-allÃ©e-et-ses-galÃ¨res">Le voyage allÃ©e et ses galÃ¨res</h2>

<p>Le jour de mon voyage Paris-Hambourg, jâ€™arrive donc Ã  Paris avec comme premier objectif dâ€™Ã©claircir cette histoire de correspondance dâ€™un trajet Deutsche Bahn (DB) sur un eurostar.
Cependant, le trajet initial Ã©tait prÃ©vu gare de lâ€™est alors que les trajets alternatifs proposÃ©s sont au dÃ©part de la gare du nord.
Ces gares Ã©tant toutes proches, commence alors pour moi une sÃ©rie dâ€™allers-retours Ã  pied entre les deux gares avec mes bagages pour Ã©claircir la situation ğŸ’ !</p>

<h4 id="laventure-avec-la-deutsche-bahn">Lâ€™aventure avec la Deutsche Bahn</h4>

<p>AprÃ¨s renseignement auprÃ¨s dâ€™eurostar en gare du Nord, jâ€™apprend alors quâ€™en effet mon billet de train allemand nâ€™est pas censÃ© Ãªtre utilisÃ© sur ce train (je mâ€™en doutais un peu).
Jâ€™en profite pour me renseigner auprÃ¨s dâ€™agents SNCF en gare de lâ€™est : le train que je devais prendre est bien prÃ©vu Ã  lâ€™heure et eux ne savent pas pour la suite du trajet.
Malheureusement, personne de la DB nâ€™est prÃ©sent sur place.</p>

<p>Il mâ€™a alors fallu dÃ©cider si je tentais de prendre un billet pour lâ€™eurostar ou bien si je prenais le train allemand prÃ©vu initialement avec le risque de ne pas pouvoir continuer au moment de la correspondance.
Lâ€™eurostar cependant nâ€™Ã©tait plus rÃ©servable mais la personne du guichet mâ€™a quand mÃªme autorisÃ© Ã  aller voir la chef de bord avant le dÃ©part pour expliquer la situation.
Entre-temps, jâ€™ai Ã©tÃ© appelÃ© par le prestataire sâ€™occupant de la rÃ©servation de mon trajet qui mâ€™a donnÃ© des informations supplÃ©mentaires : le trajet initialement prÃ©vu avec la DB Ã©tait en fait encore rÃ©servable.
AprÃ¨s maintes hÃ©sitations, il mâ€™a finalement semblÃ© moins risquÃ© dâ€™emprunter ce fameux train ICE allemand initialement prÃ©vu dans mon trajet.
Câ€™est donc parti pour lâ€™Allemagne !</p>

<p><img src="/assets/stockholm/en_route_allemagne.jpg" alt="En route vers l'Allemagne !" />
<span style="font-size:0.7em;">En route vers lâ€™Allemagne ! ğŸšƒ </span></p>

<p>ArrivÃ© Ã  ma premiÃ¨re destination allemande ğŸ‡©ğŸ‡ª, je me renseigne donc cette fois-ci auprÃ¨s dâ€™un agent de la DB au sujet de mon trajet initial prÃ©vu.
Jâ€™apprend donc que le trajet est toujours prÃ©vu et que la correspondance est possible mais que celui-ci arrive bien plus tard que prÃ©vu Ã  Hambourg ğŸ˜– ! 
Il me propose donc un trajet alternatif arrivant plus tÃ´t, avec une correspondance ultra-tendue mais qui devrait Ãªtre tout de mÃªme possible car se faisant sur la voie en face de celle de mon arrivÃ©e.
La politique de la DB en cas de problÃ¨me est donc : si il y a une perturbation sur votre trajet, vous pouvez prendre nâ€™importe quel autre train permettant dâ€™arriver Ã  destination (et mÃªme ceux dâ€™autres compagnies mÃªme si Ã§a nâ€™est pas une bone idÃ©e ğŸ˜…) !
Je dÃ©cide de tenter cette correspondance.</p>

<p>Et câ€™est finalement une correspondance rÃ©ussie ğŸ•“ !
Une fois le stresse Ã©vacuÃ©, je peux enfin me poser dans le train suivant pour plusieurs heures, tapoter un peu sur lâ€™ordinateur et suivre assidÃ»ment le dÃ©filement des noms de grandes villes dont jâ€™ai dÃ©jÃ  entendu parler pour la plupart, pendant que le train effectue sa traversÃ©e de lâ€™Allemagne.
Jâ€™en profite alors pour installer une superbe appli qui mâ€™aurait Ã©tÃ© bien utile avant : <a href="https://int.bahn.de/fr/informations-reservation/application-db-navigator">DB Navigator</a> ğŸ“± !
Il sâ€™agit dâ€™un Ã©quivalent de SNCF connect pour les trains allemands mais qui donne plus dâ€™informations sur les correspondances, notamment le numÃ©ro de voie Ã  lâ€™avance pour nâ€™importe quel trajet et le temps des correspondances Ã  jour en fonction des retards.</p>

<p>Sur le chemin, je remarque notamment un train de nuit Ã  destination dâ€™Innsbruck en Autriche â›°ï¸ ! 
Le train de nuit, que je jâ€™ai dÃ©couvert assez rÃ©cemment en France pour ma part, est en fait bien prÃ©sent en Europe.
Je trouve dommage que ceux de la SNCF relient forcÃ©ment Paris, mais il sâ€™agit dâ€™une option intÃ©ressante pour les longs trajets : cela permet dâ€™Ã©conomiser Ã  la fois du temps et de lâ€™argent !</p>

<p><img src="/assets/stockholm/train_innsbruck.jpg" alt="Un train de nuit vers Innsbruck." />
<span style="font-size:0.7em;">Un train de nuit vers Innsbruck.</span></p>

<p>Jâ€™arrive finalement Ã  Hambourg en dÃ©but de soirÃ©e.</p>

<p><img src="/assets/stockholm/arrivee_hambourg.jpg" alt="L'arrivÃ©e Ã  Hambourg !" />
<span style="font-size:0.7em;">Lâ€™arrivÃ©e Ã  Hambourg !</span></p>

<h4 id="une-note-sur-la-ponctualitÃ©-des-trains">Une note sur la ponctualitÃ© des trains</h4>

<p>Au sujet de la ponctualitÃ© des trains en Europe, des articles <a href="https://www.lesechos.fr/industrie-services/tourisme-transport/ponctualite-des-trains-la-france-a-toujours-du-retard-1367996">de presse</a> ont circulÃ© pointant du doigt la France.
Jâ€™entend aussi beaucoup de personnes se plaindre (parfois avec raison) de retards ou dâ€™annulation trÃ¨s contraignantes sur des trajets en train.
Jâ€™ai pour ma part eu trÃ¨s peu de soucis de retards avec la SNCF alors que jâ€™effectue la quasi intÃ©gralitÃ© de mes trajets longue distance en train.</p>

<p>On peut trouver des Ã©tudes classant la France dans des positions assez bonnes au niveau europÃ©en, comme la suivante sur les TGV (pourcentage des trains Ã  lâ€™heure) :</p>

<p><img src="https://www.epf.eu/wp/wp-content/uploads/2021/01/Picture2.png" alt="" />
<span style="font-size:0.7em;">Ã€ lâ€™Ã©chelle de lâ€™Europe, lâ€™Allemagne est mal classÃ©e par rapport Ã  la France en terme de <a href="https://www.epf.eu/wp/10929-2/">retards de train longue-distance</a>.</span></p>

<p>En tout cas, me concernant sur ce trajet jâ€™ai surtout Ã©tÃ© dÃ©Ã§u de la DB pour les informations aussi contradictoires quâ€™elle envoie aux voyageurs.
Ce qui me donne envie de rappeler que la SNCF propose une bonne prise en charge des voyageurs en cas de problÃ¨me, en rÃ©servant notamment un hÃ´tel en cas de besoin.</p>

<h4 id="la-partie-2-du-voyage">La partie 2 du voyage</h4>

<p>Me voilÃ  donc Ã  Hambourg prÃªt Ã  emprunter le train de nuit vers Stockholm !</p>

<p>Ã€ la gare dâ€™Hambourg, jâ€™aperÃ§ois quelque chose que je nâ€™ai jamais vu en France : un flixtrain !
Bien que le marchÃ© du train franÃ§ais soit ouvert Ã  la concurrence depuis <a href="https://www.radiofrance.fr/franceinter/l-ouverture-du-rail-a-la-concurrence-une-realite-qui-peine-a-se-mettre-en-place-2085650">dÃ©cembre 2020</a>, les concurrents Ã©mergent lentement.
En faisant une petite recherche, je me rend compte quâ€™il y a en fait <a href="https://rail.cc/fr/compagnie-ferroviaire/allemagne/de">beaucoup de compagnies</a> diffÃ©rentes prÃ©sentes en Allemagne.</p>

<p><img src="/assets/stockholm/flix_train.jpg" alt="Un flixtrain Ã  Hambourg." />
<span style="font-size:0.7em;">Un flixtrain Ã  Hambourg.</span></p>

<p>Je profite Ã©galement de ma longue correspondance pour faire un ravitaillement en eau avec ma gourde ğŸš°.
Malheureusement, impossible de trouver un point dâ€™eau !
Je me renseigne auprÃ¨s dâ€™un agent en gare et il mâ€™invite Ã  tester dans les toilettes.
Je suis un peu dÃ©Ã§u de devoir payer 1â‚¬ pour y accÃ©der et remplir ma gourde, les gares parisiennes ayant gÃ©nÃ©ralement en comparaison des points dâ€™eau en libre accÃ¨s (bien que parfois difficiles Ã  trouver) !</p>

<p>Jâ€™attend ensuite avec impatience lâ€™arrivÃ©e de mon train de nuit pour la SuÃ¨de !
Je ne mesure Ã  ce moment lÃ  pas trÃ¨s bien le type de trajet que je vais effectuer.
Ã‰tant donnÃ© la distance, je me dis que ce trajet de 12h ne peut se faire quâ€™avec un train type TGV, et je me demande alors ce que Ã§a fait de passer une nuit dans un TGV en couchette !
En rÃ©alitÃ©, Ã§a nâ€™est pas du tout le cas !
Il sâ€™agit dâ€™un train de nuit type TER que je vois arriver sur le quai.</p>

<p><img src="/assets/stockholm/train_nuit_aller.jpg" alt="Le train de nuit vers la SuÃ¨de." />
<span style="font-size:0.7em;">Le train de nuit vers la SuÃ¨de.</span></p>

<p>Lâ€™entrÃ©e dans le train de nuit se fait comme dans un TER : il nâ€™y a pas de contrÃ´le de billet Ã  lâ€™extÃ©rieur comme avec la CNCF, un check-in se fait au contraire Ã  lâ€™intÃ©rieur au moment du dÃ©part ğŸ›‚. 
Je dÃ©couvre donc ma couchette ğŸ›ï¸ dans le compartiment qui est en fait trÃ¨s similaire Ã  ceux quâ€™on trouve dans les trains de nuits de la SNCF.
Par contre, pas de kit de nuit contrairement Ã  ces derniers.
Je dÃ©couvre une unique briquette dâ€™eau ğŸ’§ Ã  destination des voyageurs.
Câ€™est donc Ã  nous de prÃ©voir un supplÃ©ment eau (pour 12h !), des bouchons dâ€™oreille et autres instruments indispensables pour la survie de nuit en train.</p>

<p>Je suis alors convaincu que je vais me rÃ©veiller le lendemain en SuÃ¨de et que mon trajet aller sera fini.
Maisâ€¦ Ã§a aurait Ã©tÃ© trop simple !
Une annonce ğŸ“¢ intervient peu de temps aprÃ¨s notre entrÃ©e dans le train : le train ne circulera pas cette nuit entre Hambourg et Stockholm Ã  cause dâ€™une panne ! ğŸ˜± ğŸ˜­
On nous invite tout de mÃªme Ã  rester dans le train pour y passer la nuitâ€¦ dans la gare ! Concept Ã©trange ğŸ¤·â€â™‚ï¸
Je termine donc cette journÃ©e Ã  lâ€™arrÃªt, dans lâ€™attente dâ€™une prochaine annonce proposant une solution Ã  ce trajet annulÃ©.</p>

<h4 id="la-partie-3-en-bonus">La partie 3 en bonus</h4>

<p>Le lendemain, je suis donc parti pour une journÃ©e de voyage bonus vers Stockholm.
Une annonce trÃ¨s matinale nous invite Ã  prendre un train pour aller jusquâ€™Ã  Copenhague.
Je comprend mal lâ€™annonce et prend un billet de train supplÃ©mentaire pour Ãªtre certain dâ€™avoir une place.
En fait, il faut savoir quâ€™en Allemagne et dans dâ€™autres pays, contrairement Ã  la France, un trajet peut Ãªtre rÃ©servÃ© sans siÃ¨ge et vice-versa ğŸ«.
Le retard Ã©tant pris en charge par la compagnie de train, il mâ€™aurait en fait suffit de faire une simple rÃ©servation de siÃ¨ge pour avoir ma place (et il restait possible dâ€™emprunter le train sans billet).</p>

<p><img src="/assets/stockholm/vers_copenhague.jpg" alt="En route vers Copenhague." />
<span style="font-size:0.7em;">En route vers Copenhague.</span></p>

<p>Sur le chemin de Copenhague, le train me fait donc traverser un nouveau pays : le Danemark.
Il faut savoir que câ€™est lâ€™unique pays de ce trajet susceptible dâ€™effectuer un contrÃ´le dâ€™identitÃ© ğŸªª.
Il me semble que cela nâ€™est pas censÃ© Ãªtre le cas Ã  lâ€™intÃ©rieur de lâ€™<a href="https://fr.wikipedia.org/wiki/Espace_Schengen">espace Schengen</a> mais en pratique, les voyageurs mâ€™apprennent que les contrÃ´les sont toutefois de mise.
Dans mon cas, le train sâ€™arrÃªte effectivement durant le trajet avec une annonce de contrÃ´le mais finalement nous repartons sans voir un seul agent dans notre voiture.</p>

<p>Une fois Ã  Copenhague, câ€™est la course pour prendre un second train vers Stockholm cette fois-ci ğŸƒâ€â™‚ï¸.
Je suis dâ€™autres personnes ayant eu les mÃªmes soucis que moi avec le train de nuit de la veille, ce qui me permet dâ€™arriver pour la premiÃ¨re fois dans un train SuÃ©dois !</p>

<p><img src="/assets/stockholm/train_copenhague_suede.jpg" alt="Le train Ã  destination de Stockholm." />
<span style="font-size:0.7em;">Le train Ã  destination de Stockholm.</span></p>

<p>Ã‡a y est, je peux enfin entamer la derniÃ¨re partie de mon voyage !
En fait, lâ€™annulation de mon train de nuit a un bon cÃ´tÃ© : effectuant dÃ©sormais le trajet de jour, je peux admirer les diffÃ©rentes vues Ã  mesure que je progresse vers Stockholm.
En particulier, jâ€™Ã©tais trÃ¨s enthousiaste Ã  lâ€™idÃ©e de passer sur le pont entre le Danemark et la SuÃ¨de !</p>

<p><img src="/assets/stockholm/pont_danemark_suede.jpg" alt="Passage sur le pont de l'Ã˜resund !" />
<span style="font-size:0.7em;">Passage sur le pont de lâ€™Ã˜resund !</span></p>

<p>Je dÃ©couvre ensuite les paysages suÃ©dois : entre lacs, forÃªts et maisons rouges.</p>

<p><img src="/assets/stockholm/suede_2.jpg" alt="ArrivÃ©e en SuÃ¨de." />
<span style="font-size:0.7em;">ArrivÃ©e en SuÃ¨de.</span></p>

<p><img src="/assets/stockholm/campagne_suede.jpg" alt="La campagne suÃ©doise." />
<span style="font-size:0.7em;">La campagne suÃ©doise.</span></p>

<p>Dans le train je repÃ¨re plusieurs franÃ§ais allant Ã©galement Ã  Stockholm.
Il ne sâ€™agit pas des premiers que jâ€™aperÃ§ois et je suis heureux de voir que tout le monde ne mise pas sur lâ€™avion pour ce genre de voyage !
Je comprend alors que beaucoup doivent Ãªtre en train de voyager avec <a href="https://www.interrail.eu/fr">lâ€™Interrail</a>, ce qui jâ€™imagine rend le trajet plus fiable et moins cher cat il peut Ãªtre prÃ©vu au dernier moment !</p>

<p>Lâ€™arrivÃ©e Ã  Stockholm se fait finalement en soirÃ©e.
Je suis soulagÃ© en descendant du train aprÃ¨s ces diffÃ©rentes mÃ©saventures.</p>

<p><img src="/assets/stockholm/stockholm_central.jpg" alt="ArrivÃ©e Ã  Stockholm !" />
<span style="font-size:0.7em;">ArrivÃ©e Ã  Stockholm !</span></p>

<p>Il me reste encore un dernier â€œpetitâ€ train local Ã  emprunter pour rejoindre mes amis et profiter de la destination !
Les jours suivants me permettent donc de dÃ©couvrir Stockholm et prendre un peu de repos avant la confÃ©rence.</p>

<p><img src="/assets/stockholm/stockholm.jpg" alt="Visite de Stockholm." />
<span style="font-size:0.7em;">Visite de Stockholm.</span></p>

<h2 id="le-retour-vers-la-france">Le retour vers la France</h2>

<p>AprÃ¨s une semaine de confÃ©rence, le moment est venu de retourner en France en train.
Mon trajet retour est vraiment similaire au trajet aller : je rejoins Stockholm en train, jâ€™emprunte le train de nuit vers Hambourg et ensuite je fais un Hambourg-Paris Ã  la journÃ©e.
Avec les soucis de lâ€™aller, jâ€™apprÃ©hende un peu ce retour mais je rÃªve dÃ©jÃ  de me retrouver chez moi et de profiter dâ€™un peu de repos.</p>

<p>Le trajet vers Stockholm ne pose pas de problÃ¨me particulier.
En gare de Stockholm, jâ€™effectue un ravitaillement en eau ğŸš° : toujours pas de point dâ€™eau mais la personne qui gÃ¨re lâ€™entrÃ©e des toilettes me donne lâ€™accÃ¨s sans payer.</p>

<p>Jâ€™entre donc dans le train de nuit pour Hambourg en espÃ©rant vivement que celui-ci circule bien.
Il y a cependant une diffÃ©rence avec le trajet aller : les places en couchettes nâ€™Ã©taient pas disponibles, et câ€™est donc une place assise ğŸ’º qui est indiquÃ©e sur mon billet.
Or, surprise Ã  mon entrÃ©e : la place assise est en fait une place dans un compartiment couchette avec les couchettes du milieu abaissÃ©es
En me renseignant, je comprend alors que nous sommes libres dâ€™installer les couchettes si les autres occupants du compartiment sont dâ€™accord !
Je finis donc par dormir sur une des couchettes supÃ©rieures ğŸ›ï¸ !
Câ€™est donc une bonne surprise sur ce retour, malgrÃ© lâ€™absence de couverture par rapport aux places en couchette qui mâ€™a donnÃ© un peu froid, jâ€™ai tout de mÃªme probablement bien mieux dormi que prÃ©vu.</p>

<p>Pendant ce trajet, jâ€™ai lâ€™occasion dâ€™apercevoir le fret ferroviaire que jâ€™avais dÃ©jÃ  remarquÃ© auparavant.
Je le vois rarement en France donc jâ€™ai Ã©tÃ© surpris de le voir aussi prÃ©sent en Allemagne, au Danemark et en SuÃ¨de.
En lâ€™occurrence, le train que jâ€™ai croisÃ© Ã  ce moment lÃ  permettait dâ€™embarquer directement les remorques des camions. ğŸš›
PlutÃ´t efficace !</p>

<p><img src="/assets/stockholm/fret.jpg" alt="Le fret ferroviaire." />
<span style="font-size:0.7em;">Le fret ferroviaire.</span></p>

<p>Jâ€™arrive donc le lendemain matin Ã  Hambourg.
Concernant le trajet retour de Hambourg Ã  Paris, rebelote !
La DB envoie un second message indiquant que le train prÃ©vu au dÃ©part de Hambourg part une heure plus tÃ´t que prÃ©vu pour cause de travaux !
Il sâ€™agit dÃ©cidÃ©ment de la premiÃ¨re fois pour moi que mon train part plus tÃ´t que prÃ©vu ğŸ¤·â€â™€ï¸ !
Je commence donc mon trajet avec une nouvelle source de stresse par rapport Ã  une correspondance qui sâ€™annonce tendue.
Heureusement, mon changement de train se passe finalement sans problÃ¨mes et je finis par arriver tranquillement Ã  Paris Ã  lâ€™heure prÃ©vue.
Ouf ğŸ¥³ !</p>

<h2 id="conclusion">Conclusion</h2>

<p>Un mot de fin sur cette aventure Ã  travers lâ€™Europe ğŸ‡ªğŸ‡º.
Dans lâ€™ensemble, bien que cette expÃ©rience mâ€™ait Ã©puisÃ©, je suis trÃ¨s heureux dâ€™avoir eu lâ€™occasion de la rÃ©aliser !
En particulier, je suis reconnaissant envers mon employeur de mâ€™avoir autorisÃ© Ã  rÃ©aliser ce trajet en train et de mâ€™avoir accordÃ© des jours de repos en compensation Ã  mon retour (il sâ€™agit dâ€™une formalitÃ© prÃ©vue pour les dÃ©placements professionnels mais celle-ci nâ€™avait pas Ã©tÃ© confrontÃ©e Ã  un voyage aussi complexe).
Je dÃ©plore tout de mÃªme de voir aussi peu de chercheurs conscientisÃ© par lâ€™impact du transport âœˆï¸ Ã©tant donnÃ© lâ€™urgence climatique.</p>

<p>Vient donc la question finale : referais-je un tel trajet ?
Oui Ã©videmment !
Pour rappeler ma position initiale : lâ€™urgence climatique me semble telle que pour moi câ€™est soit un dÃ©placement bas carbone, soit pas de dÃ©placement !
En terme dâ€™Ã©missions COâ‚‚, le <a href="https://impactco2.fr/transport?km=2032">calculateur de lâ€™ADEME</a> indique que ce trajet aller-retour en train a Ã©mis dans les <strong>46 kg</strong> de COâ‚‚, contre environ <strong>950 kg</strong> pour un avion !
Il y a par ailleurs plusieurs bÃ©nÃ©fices Ã  ce type de trajet.
Il sâ€™agit dâ€™une expÃ©rience suffisamment intense pour quâ€™elle nous limite naturellement en terme de frÃ©quence, limitant par consÃ©quent notre impact climatique individuel.
De plus, ce type de dÃ©placement donne <strong>vraiment</strong> lâ€™impression de voyager : on peut assister au changement des paysages, des maisons, au passage dâ€™Ã®le en Ã®le, etcâ€¦</p>

<p>Il y a tout de mÃªme certaines choses que je ferais diffÃ©remment pour un tel trajet.
Tout dâ€™abord, pour un trajet plus long je choisirais probablement de mâ€™arrÃªter en chemin et ne pas tenter les nuits successives en train.
Bien quâ€™on puisse dormir en couchette, il sâ€™agit dâ€™un trajet autrement plus Ã©puisant quâ€™une nuit en hÃ´tel ğŸ˜´ !
En comparaison, je trouve cette <a href="https://www.youtube.com/watch?v=r1i6hMQbkx8">vidÃ©o</a> (en anglais) trÃ¨s intÃ©ressante Ã  propos dâ€™un trajet encore plus long Ã  travers lâ€™Europe, sur plusieurs jours.
Ensuite, le train est connu pour Ãªtre particuliÃ¨rement cher.
Je vois deux alternatives : le Pass Interrail, qui est fait pour ce type de gros trajets, et lâ€™alternance entre trains et bus de voyages ğŸš qui sont eux moins chers et qui restent raisonnables du point de vue des <a href="https://impactco2.fr/transport?km=2032">Ã©missions COâ‚‚</a>.</p>

<p>Dans tous les cas, le voyage reste un loisir privilÃ©giÃ© et je pense quâ€™il est bon de se rappeler que tout le monde nâ€™a pas les moyens dâ€™en profiter.
Il ne nous reste quâ€™Ã  le rÃ©aliser de maniÃ¨re humble et responsable, et Ã  en tirer les meilleures expÃ©riences possibles !</p>

<p><img src="/assets/stockholm/suede_3.jpg" alt="Un lac suÃ©dois." />
<!-- <span style="font-size:0.7em;">Un lac suÃ©dois.</span> --></p>]]></content><author><name>smbct</name></author><category term="society" /><category term="voyage" /><category term="train" /><category term="climat" /><summary type="html"><![CDATA[Cette annÃ©e, mon travail mâ€™a donnÃ© la chance dâ€™assister Ã  une confÃ©rence de recherche en SuÃ¨de ğŸ‡¸ğŸ‡ª. Malheureusement, les confÃ©rences de chercheurs ğŸ§‘â€ğŸ”¬ me renvoient une image de plus en plus nÃ©gative Ã  lâ€™heure de lâ€™urgence climatique. Elles impliquent gÃ©nÃ©ralement que des centaines de personnes prennent lâ€™avion pour passer quelques jours seulement Ã  lâ€™Ã©tranger (potentiellement Ã  lâ€™autre bout du monde) Ã  Ã©couter des prÃ©sentations de travaux dâ€™autres chercheurs. Lâ€™impacte individuel des dÃ©placements en avion en terme dâ€™Ã©missions COâ‚‚ est Ã©norme. Est-ce que ces dÃ©placements valent vraiment le coup dans un monde aux ressources fragiles, qui souffre Ã©normÃ©ment de lâ€™activitÃ© humaine ?]]></summary></entry><entry><title type="html">Solving a pokemon puzzle with SAT solvers</title><link href="https://smbct.github.io/blog/pokemon-puzzle/" rel="alternate" type="text/html" title="Solving a pokemon puzzle with SAT solvers" /><published>2023-05-15T10:00:00+02:00</published><updated>2023-05-15T10:00:00+02:00</updated><id>https://smbct.github.io/blog/pokemon-puzzle</id><content type="html" xml:base="https://smbct.github.io/blog/pokemon-puzzle/"><![CDATA[<p>I recently came across an interesting logic puzzle found in a pokemon (unofficial) fangame.
As everyone knows, Pokemon is a famous role playing game license from nintendo where your goal is to train small creatures that fight each other.
While the core of pokemon gameplay is centered toward the training of pokemons, the player would encounter some logic puzzles on his way. For instance, the next image show one of these puzzles taken from pokemon emerald.</p>

<p><img src="https://lparchive.org/Pokemon-Emerald-(by-Crosspeice)/Update%2025/8-e23009.png" alt="A puzzle from the pokemon game emerald." /></p>

<p>While these puzzles are usually relatively simple and solvable by everyone, it is possible to find much more challenging ones in unofficial games.
The puzzle I am interesting in takes place in <a href="https://www.rebornevo.com/pr/index.html/">pokemon reborn</a>.
This particular puzzle caught my attention as it is similar to constraint problems in computer science.
I decided to apply techniques that I studied during my master degree to solve it.</p>

<hr />

<h1 id="the-puzzle">The puzzle</h1>

<h2 id="overview">Overview</h2>

<p>The puzzle in question is represented by two 3x3 grids of digits, as it is shown below.
The goal of the puzzle is to manipulate the grids throw a set of operations so that you end up with a sum of digits equal to 15 for each rows, each columns and each diagonal of the grids (these grids are called <a href="https://en.wikipedia.org/wiki/Magic_square">Magic Squares</a>).</p>

<p><img src="/assets/pokemon_puzzle.png" alt="The puzzle ingame." /></p>

<p>There are two type of operations in the grids.
First, it is possible to move a column down or up.
All the columns can be moved independently and when a digit is on the border of the grid, moving the olumn places it at the other extremity.
Second, it is possible to move the rows left or right.
For this operation, the two grids are connected together and when a digit leaves one grid, it appears on the second one.
This interconnection between the grids make the puzzle challenging as trying to satisfy one of the row or column on one grid may perturb the other one.
Here is one example for each operation:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4 9 6  .  1 2 5                                         5 9 6  .  1 2 5
5 8 3  .  7 7 9   Move First Column Left Grid Up -&gt;     2 8 3  .  7 7 9
2 4 1  .  6 3 8                                         4 4 1  .  6 3 8

-----------------------------------------------------------------------

5 9 6  .  1 2 5                                         5 9 6  .  1 2 5
2 8 3  .  7 7 9   Move Second Row Left -&gt;               8 3 7  .  7 9 2
4 4 1  .  6 3 8                                         4 4 1  .  6 3 8

</code></pre></div></div>

<h2 id="how-i-solve-it">How I solve it</h2>

<p>To solve this puzzle, I decided to use a type of program called <a href="https://en.wikipedia.org/wiki/SAT_solver">SAT Solvers</a>.
These programs are made to automatically solve logic formula: they search for <strong>true/false</strong> values for logic variables to make the formula true.
For instance, if the formula is <code class="language-plaintext highlighter-rouge">(a =&gt; b) and c</code>, this formula would be true when <code class="language-plaintext highlighter-rouge">a = false, b = false or true, c = true</code> or <code class="language-plaintext highlighter-rouge">a = true, b = true, c = true</code>. 
Finding the right values for the variables so that the formula is true is actually the goal of the so called SAT problem.</p>

<p>For this method, our goal is to create an <em>encoding</em> of the puzzle, in this case define a logic formula that is true when a solution of the puzzle is found.</p>

<hr />

<h1 id="encoding-the-puzzle-into-a-logic-formula">Encoding the puzzle into a logic formula</h1>

<p>The encoding of the problem consists in representing the sequence of operations performed on the grids with logic operations on logic variables, and ensuring that after the last operations the sums are verified on the rows and columns.
There are two parts in this step.
The first part is to decide what are the logic variables and how they represent the problem.
Once it is decided, the variables need to be linked between each other through logic operations, which is the second part.</p>

<h2 id="encoding-the-grids">Encoding the grids</h2>

<p>The main variables of the problem will represent its <strong>states</strong>.
In this context, the states of the puzzle are the two grids at different step of evolution.
Indeed, we need to keep track of each evolution of the grid in the formula to make sure that every transformation is valid.</p>

<p>To represent one grid in this problem, we can use 3*3 sets of 9 variables. For each cell of a grid, the 9 variables will represent all the digits, assuming the digit showing up in that cell will have its corresponding variable <strong>true</strong>.
This representation can be used to encode the two grids at each step of the operations.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
-------------------------------
|         |         |         |
| v_0_0_k | v_0_1_k | v_0_2_k |
|         |         |         |
-------------------------------   k = {1,..,9}
|         |         |         |
| v_1_0_k | v_1_1_k | v_1_2_k |             / true if the cell at row i and column j = k 
|         |         |         |   v_i_j_k =    
-------------------------------             \ false if the cell at row i and column j != k 
|         |         |         |
| v_2_0_k | v_2_1_k | v_2_2_k |
|         |         |         |
-------------------------------

</code></pre></div></div>

<p>In order to represent multiple operations performed on the grids, we will need more than one state.
Thus, we will decide a number <strong>n</strong> of states for our encoding, and create in total <strong>n</strong> group of state variables.
The first state will then represent the initial grids (as seen on the in game picture), and the n-th state will be the two grids verifying the sum constraints.</p>

<p>We will additionally add variables to represent the different operations performed on the grid.
There will be in total 18 variables for each step (6 * 2 variables for the columns operations (column index, Up Down) and 3*2 variables for the rows (row index and Left/Right)).
Hence, we will have (n-1) group of variables for the operations, one between each consecutive states:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> (state_1, operations_1) -&gt; (state_2, operations_2) -&gt; ... -&gt; (state_n, operations_n)
</code></pre></div></div>

<h2 id="encoding-the-operations">Encoding the operations</h2>

<p>Once the variables are decided, we need to link them with logic operations into a formula that would be true only if the values of the variables correspond to a solution of the puzzle.
This step can be interpreted as adding <strong>constraints</strong> to our formula. The different constraints will be linked with a <strong>And</strong> operation so that they will be all satisfied when the formula is true.</p>

<p>One way of looking at it this modeling task is to consider that with an empty formula, the values of the variables can be anything, it will always be true.
However, this will not likely correctly represent the states of our puzzle (for instance we may have two digits true in the same cell).
Hence, the logic operations will make sure that the representation is consistent.
The constraints needed here can be divided into thee parts: 1) setting the initial state of the puzzle, 2) imposing the sum constraints on the last state and 3) creating the transitions between each state.</p>

<h3 id="1-first-state-constraint">1) First state constraint</h3>

<p>The first step is straightforward. Given the initial grids shown in the game (see picture), we will create a <strong>And</strong> operation between the digits that needs to be true and the negation of the digits that need to be false.
For instance, for the upper left corner of the first grid, there is a 4, thus:
 <code class="language-plaintext highlighter-rouge">v_0_0_4 = true and v_0_0_1 = false and v_0_0_2 = false and v_0_0_3 = false and v_0_0_5 = false and .. and v_0_0_9 = false</code> will be our constraint for this first cell.
Since the variables are joined using a And, it is not necessary to make the true/false appear here, which gives:
<code class="language-plaintext highlighter-rouge">v_0_0_4 and (not v_0_0_1) and (not v_0_0_2) and (not v_0_0_3) and (not v_0_0_5) and .. and (not v_0_0_9)</code> as a final constraint.
This step can be repeated for all the cells of the initial state.</p>

<h3 id="2-last-state-constraints">2) Last state constraints</h3>

<p>For this last step, one difficulty is the translation of the numerical sum into a logic constraint. To simplify this step, we can introduce for each row, column and diagonal a set of 9 digit variables that will be independent from their position in the grid.
From this, it is possible to enumerate all the subsets of 3 digits that sum up to 15 and proceed similarly to step 1) to enforce one of this sum to be verified.
The digit variables can be linked to the grids from the last state by adding implications. For example <code class="language-plaintext highlighter-rouge">digit_5_row_0 =&gt; v_0_1_5 or v_0_2_5 or v_0_3_5</code>.</p>

<h3 id="3-transition-constraints">3) Transition constraints</h3>

<p>The last step is trickier.
Here, we need to somehow verify through logic constraints that any modification occurring on the grids between two states is consistent regarding the puzzleâ€™s rules.
For this step we will once agin use implications, between consecutive states this time.
For instance, taking the upper left corner cell of the first grid, we need to verify that the digit that is true at state i+1 is either the result of an operation or was already true at state i.
In case the digit was true at state i, we also need to check that no operation was performed on the same row or column.</p>

<p>For example, having a 3 in the cell at row 1 and column 0 implies either:</p>

<ul>
  <li>there was already a 3 and the second row and the first column did not move</li>
  <li>the column moved and there was a 3 below or above</li>
  <li>the row moved and there was a three before or after this position</li>
</ul>

<p>Encoding the column move would be done as following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                           -------------                 
                           | 3 | _ | _ |                                  
                           -------------                                   
                           | _ | _ | _ |   and column operation Down               
                           -------------
-------------              | _ | _ | _ |
| _ | _ | _ |              -------------     
-------------               
| 3 | _ | _ |    Implies        or
-------------               
| _ | _ | _ |              ------------- 
-------------              | _ | _ | _ |
                           -------------                               
                           | _ | _ | _ |   and column operation Up    
                           -------------    
                           | 3 | _ | _ |      
                           -------------    
                               
State n                     State n-1
</code></pre></div></div>

<p>For the operations on the row, we will see something like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                                        -------------   -------------
                                        | _ | _ | _ |   | _ | _ | _ |
                                        -------------   -------------
                                        | _ | 3 | _ |   | _ | _ | _ |  and row operation Left
                                        -------------   -------------
-------------   -------------           | _ | _ | _ |   | _ | _ | _ |
| _ | _ | _ |   | _ | _ | _ |           -------------   -------------
-------------   -------------             
| 3 | _ | _ |   | _ | _ | _ |  Implies                or
-------------   -------------            
| _ | _ | _ |   | _ | _ | _ |           -------------   ------------- 
-------------   -------------           | _ | _ | _ |   | _ | _ | _ |
                                        -------------   -------------
                                        | _ | _ | _ |   | _ | _ | 3 |  and row operation Right
                                        -------------   ------------- 
                                        | _ | _ | _ |   | _ | _ | _ |   
                                        -------------   ------------- 
                               
           State n                                State n-1
</code></pre></div></div>

<h1 id="lets-code-the-program">Letâ€™s code the program</h1>

<p>Now that the encoding is ready to be implemented, the last part consists in putting all the pieces together into one final program. 
The program will take as input the digits in the two cells and a number of steps to solve the puzzle.
From these data, it will automatically create the logic formula corresponding to the puzzle and will call a SAT solver to solve the formula.
Once it is done, the program can extract the solution and display it in a human readable form.
Without detailing everything in the implementations, I will still give few precisions.</p>

<h2 id="writing-the-automatic-encoding">Writing the automatic encoding</h2>

<p>Usually, the code necessary to implement an encoding is not the easiest to read and interpret.
Nonetheless, having well documented data structure really helps in the process.
The final goal of this task is the creation of the logic formula to be sent to the SAT solver.
One important thing is that SAT solvers usually take as input a specific form of logic formulas called <a href="https://en.wikipedia.org/wiki/Conjunctive_normal_form">Conjunctive Normal Form</a>.
Luckily, it is always possible to introduce new variable to transform any formula into this type.
For this project, I used a piece of code that I wrote during my studies that specifically perform this transformation.
It is based on that (approach)[https://en.wikipedia.org/wiki/Tseytin_transformation].</p>

<h2 id="finding-a-suitable-sat-solver">Finding a suitable SAT solver</h2>

<p>Finding a SAT solver able to solve the formula is not an easy task either.
I first started to experiment with a number of state equals to 20 in the encoding.
The resulting formula ends up having a very large number for logical variables, make it solution difficult to find.
It is although good to know that SAT competitions take place every year to encourage the development of performent SAT solvers.
I started looking at state of the art solvers from <a href="https://satcompetition.github.io/2022/">the 2022 edition</a> and I ended up selecting a solver called <a href="https://github.com/arminbiere/kissat">Kissat</a>. Kissat was able to solve the puzzle whin few minutes on my laptot.</p>

<h2 id="final-code-and-solution">Final code and solution</h2>

<p>The code that I wrote for this program is available on <a href="https://github.com/smbct/blog_code/tree/master/pokemon">github</a>.
The folder contains a c++ program creating the encoding with a sequence of 20 states and calling the sat solver to solve the formula.
It also contains an installation script which download the SAT solver and compile the program with gcc.</p>

<p>Here is a solution I found with kissat (states only):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4 9 6     1 2 5         4 4 6     1 2 5         4 4 1     1 2 5        4 4 1     1 2 5        4 4 1     7 2 5         4 1 7     2 5 4        4 1 6     2 5 4        4 1 6     2 5 4 
5 8 3     7 7 9   -&gt;    5 9 3     7 7 9   -&gt;    5 9 6     7 7 9   -&gt;   5 9 6     7 7 9   -&gt;   5 9 6     3 7 9    -&gt;   5 9 6     3 7 9   -&gt;   5 9 7     3 7 9   -&gt;   9 5 9     7 3 7    -&gt;   
2 4 1     6 3 8         2 8 1     6 3 8         2 8 3     6 3 8        8 3 6     3 8 2        8 3 6     1 8 2         8 3 6     1 8 2        8 3 6     1 8 2        8 3 6     1 8 2 


4 5 6     2 5 4         4 5 6     2 5 4         4 4 5     6 2 5        4 4 9     6 2 5        4 4 9     6 8 5         4 4 9     6 8 5        4 4 9     2 8 5        4 5 9     2 8 5 
9 3 9     7 3 7    -&gt;   9 3 6     7 3 7   -&gt;    9 3 6     7 3 7   -&gt;   9 3 5     7 3 7   -&gt;   9 3 5     7 2 7    -&gt;   3 5 7     2 7 9   -&gt;   3 5 7     1 7 9   -&gt;   3 1 7     1 7 9    -&gt;
8 1 6     1 8 2         8 1 9     1 8 2         8 1 9     1 8 2        8 1 6     1 8 2        8 1 6     1 3 2         8 1 6     1 3 2        8 1 6     6 3 2        8 4 6     6 3 2 


4 4 9     2 8 5         4 9 2     8 5 4         4 9 2     8 3 4 
3 5 7     1 7 9    -&gt;   3 5 7     1 7 9   -&gt;    3 5 7     1 5 9 
8 1 6     6 3 2         8 1 6     6 3 2         8 1 6     6 7 2

</code></pre></div></div>

<p>This solution contains 18 states and has been found in 145 seconds on my laptop by the kissat solver.</p>

<h1 id="final-word">Final word</h1>

<p>We can see that tools such as SAT solvers are available for automatic reasoning and hard problem solving.
Although this might not work all the time, having a try may usually be a (relatively fast) solution to obtain first hints into some problem.
In this case, the encoding aspect is not easy as SAT solvers speak a relatively basic language (logic formulas) and are not the most suitable tools for reasoning with numbers and spatial data (such as grids).</p>

<p>By searching on the internet it is possible to find much more elegant <a href="https://www.rebornevo.com/forums/topic/48625-magic-square-puzzle-guide/">solutions</a> to this problem.
The fact that this problem ends up being quite challenging for SAT solvers is a interesting.
The solving time may be improved by trying to reduce the size of the encoding.
However, using solvers more expressive than SAT (for example linear programming) may help on this puzzle as it is not easy to be expressed in pure logic.
There are also other automatic ways of solving it such as tree search algorithms like A* or Monte Carlo Tree Search.
This type of algorithms was actually historically used for making AI for chess and alike games.</p>

<p>A later interesting aspect of this puzzle is the process of its creation.
Indeed mathematical puzzles can emerge from various ideas and topics and it is not possible to know if there is a solution until either one is found or it is proven impossible.
In this example, it would have been possible to generate the puzzle by starting from the last state and applying reverse operations (as the operations are deterministic).
However, this seems not to be the origin of this puzzle as discussed in the solution link I mentioned above, and the original story seems more engaging.
Letâ€™s see what would be my next challenging puzzles!</p>]]></content><author><name>smbct</name></author><category term="AI" /><category term="puzzle" /><category term="SAT" /><category term="logic" /><category term="puzzle" /><category term="games" /><category term="model-checking" /><summary type="html"><![CDATA[I recently came across an interesting logic puzzle found in a pokemon (unofficial) fangame. As everyone knows, Pokemon is a famous role playing game license from nintendo where your goal is to train small creatures that fight each other. While the core of pokemon gameplay is centered toward the training of pokemons, the player would encounter some logic puzzles on his way. For instance, the next image show one of these puzzles taken from pokemon emerald.]]></summary></entry><entry><title type="html">A series on x86 assembly programming</title><link href="https://smbct.github.io/blog/assembly-x86-series/" rel="alternate" type="text/html" title="A series on x86 assembly programming" /><published>2023-05-15T10:00:00+02:00</published><updated>2023-05-15T10:00:00+02:00</updated><id>https://smbct.github.io/blog/assembly-x86-series</id><content type="html" xml:base="https://smbct.github.io/blog/assembly-x86-series/"><![CDATA[<p>This is an announce that I am currently working on a series of posts about assembly programming.
For this occasion, I created the <strong>series</strong> section in the blog ğŸ“‘ : a place dedicated to articles that intend to deeply explore ğŸ” some specific topics with advanced explanations and hands-on examples.</p>

<p>In my first series, I will hence explore assembly programming : namely programming directly with the processorsâ€™ instruction sets ğŸ§‘â€ğŸ’».
x86 being the most common processor architecture on desktop and laptop computers ğŸ’», I will solely focus on this platform.
The idea is to progress step by step toward the goal of being able to implement practical programs directly in assembly.</p>

<p>My interest in assembly programming and more generally in low level programming comes from the impression that modern softwares have a very intensive use of resources for many avoidable tasks âš¡ (as a rebound effect due to the increase of computing power).
The idea is to understand more deeply how softwares work and apprehend their use of computing resources.
I am also concerned by planned obsolescence that could come from softwares becoming unusable after system upgrade for instance.
For this reason, I am also interested in the idea of retro-compatibility and the possibility to patch softwares without any source code by manipulating its assembly instructions ğŸ’¾.
For instance, see this <a href="https://www.youtube.com/watch?v=eQOOx4mmY6I">example</a> about patching an old game to make it work on modern operating systems.
Slowly, theses different concerns got me into the topic of assembly and more generally low level programming.</p>

<p>This series will be written as I learn on the topic, with potential mistakes and imprecisions made along the way ğŸ¤.
I take some time to write about it as a ways to compile knowledge that can be sometimes difficult to find on the web, and also to rise the interest in this approach.
The series would be more adapted to someone already familiar with programming, preferably with a low level language like C.</p>

<p>The first few posts of this series are available in this <a href="/series/x86_64_assembly/headline">page</a>.
I will also update the links directly here :</p>

<ul>
  <li>
    <p><a href="/series/x86_64_assembly/pt1">part 1 : Hello, world!</a></p>
  </li>
  <li>
    <p><a href="/series/x86_64_assembly/pt2">Part 2 : drawing a square</a></p>
  </li>
  <li>
    <p><a href="/series/x86_64_assembly/pt3">Part 3 : drawing a circle</a></p>
  </li>
  <li>
    <p><a href="/series/x86_64_assembly/pt4">Part 4 : recursive power</a></p>
  </li>
  <li>
    <p><a href="/series/x86_64_assembly/pt5">Part 5 : printing arrays</a></p>
  </li>
  <li>
    <p><a href="/series/x86_64_assembly/pt6">Part 6 : sorting arrays</a></p>
  </li>
</ul>

<p>Enjoy!</p>]]></content><author><name>smbct</name></author><category term="programming" /><category term="low-level" /><category term="assembly" /><category term="x86" /><category term="programming" /><category term="low-level" /><summary type="html"><![CDATA[This is an announce that I am currently working on a series of posts about assembly programming. For this occasion, I created the series section in the blog ğŸ“‘ : a place dedicated to articles that intend to deeply explore ğŸ” some specific topics with advanced explanations and hands-on examples.]]></summary></entry><entry><title type="html">Can deep neural networks learn the rules of chess ?</title><link href="https://smbct.github.io/blog/chess-rules/" rel="alternate" type="text/html" title="Can deep neural networks learn the rules of chess ?" /><published>2022-05-30T10:00:00+02:00</published><updated>2022-05-30T10:00:00+02:00</updated><id>https://smbct.github.io/blog/chess-rules</id><content type="html" xml:base="https://smbct.github.io/blog/chess-rules/"><![CDATA[<p>As I recently defended my thesis, and since I am now looking for a job, I decided to dedicate to myself some time to study cutting edge computer science topics. Deep learning is one very famous (and somehow <a href="https://www.youtube.com/watch?v=fe9u6YQTsWY">controversial</a>) topic that I didnâ€™t have the occasion to experiment with so far. Thus I started playing with dl frameworks such as pytorch and recently I decided to implement an old idea that I had back during my thesis: inducing the rules of chess using a machine learning algorithm.</p>

<p>To be clear, the goal here is not to create an algorithm able to <strong>play</strong> chess such as <a href="https://www.deepmind.com/research/highlighted-research/alphago">alphago</a>, but rather to create an algorithm able to <strong>discover</strong> the rules, and able to propose the next moves from a given board configuration. I got this idea from my PhD work on inductive logic programming, a form of machine learning applied to logical models. For example, imagine that you are looking at two people playing an unknown game: is it possible to understand the rules just by looking people play ?</p>

<hr />

<h1 id="introduction">Introduction</h1>

<p>For this project, I decided to use the deep learning framework <a href="https://pytorch.org/">pytorch</a>. I started by creating a python program that is able to show a board in different configurations using <a href="https://matplotlib.org/">matplotlib</a> with these <a href="https://commons.wikimedia.org/wiki/Category:PNG_chess_pieces/Standard_transparent">images</a>. I used the very nice <a href="https://python-chess.readthedocs.io/en/latest/">python-chess</a> package as a chess engine to simplify the work. With these elements, I was already able to visualize all the board configuration form a given game, with the possible moves for each piece (see below).</p>

<p><img src="/assets/chess_rules/chess_interface.png" alt="The chess interface" /></p>

<p>The chess interface.</p>

<h2 id="the-dataset">The dataset</h2>

<p>Since I needed a dataset for this project, I used this <em>csv</em> of <a href="https://www.kaggle.com/datasets/datasnaek/chess">chess games</a>, where the games are given in the form of lists of moves (easy to process with python-chess).</p>

<p>At this stage, I decided to simplify the learning task because predicting the possible (legal) moves from a board configuration implies using a model with a <strong>varying output size</strong>, something difficult to achieve with deep neural nets. I choose to <strong>simplify</strong> the problem by predicting only the possible destinations for a given pieces, ignoring the interaction with the other pieces (which is quite cheating considering the initial idea, but interesting as a first step). I made a <strong>second simplification</strong> assuming that all the possible moves from the board position are known (which is not the case in my previous description since only one possible move can be seen when someone plays).</p>

<p class="message">
To sum up, if we take the illustration above, our main goal here is to produce a model able to predict a list of moves (the blue arrows) from a given board configuration (position of the pieces), assuming that from a given board configuration in the dataset, all the arrows are known.
</p>

<h2 id="fetching-the-model-inputsoutputs">Fetching the model inputs/outputs</h2>

<p>In order to obtain a usable dataset for fitting the model, I generated all the board configurations from the moves of all the games in the csv. I then generated all the possible moves from these configurations and I subsampled the data to limit its size.</p>

<hr />

<h1 id="encoding-the-data">Encoding the data</h1>

<p>A very important aspect of a deep learning application is the encoding of the data.
More precisely, neural networks would not be able to process high level information such as a list of moves and a board configuration with piece types.
For this reason, it is necessary to encode the data in such a way that the model will be able to link the input and the output through its complex computations.
For instance, coding the piece type on the board with an integer wonâ€™t be efficient since it would be too difficult for the model to decompose the integer.</p>

<h2 id="encoding-the-input">Encoding the input</h2>

<p>In our case, the input consists in a board configuration plus a piece to move.
An important aspect of chess is that the board is two-dimensional.
This means that the moves of one piece depend on the content of its surrounding squares.
For this reason, we are going to use <a href="https://deepai.org/machine-learning-glossary-and-terms/convolutional-neural-network">convolutional layers</a> for the model architecture, a type of function that is efficient for treating spatial data such as images (more on the model architecture below).
This implies that the encoding should conserve the spatial organisation of the board (with two dimensional data structures).</p>

<p>The input of the model is the hardest element to encode. As I said previously, piece types cannot be encoded as simple numbers, as they represent categorical variables.
One popular way to encode categorical variables in deep learning is the <a href="https://deepai.org/machine-learning-glossary-and-terms/one-hot-encoding">one hot encoding</a>, consisting in a vector of 0 and 1, with only one index equal to one depending on the class that is coded.
Our encoding here will be based on same principle, inspired from the encoding used in existing <a href="https://erikbern.com/2014/11/29/deep-learning-for-chess.html">chess AIâ€™s</a> (including the alphazero model).
The categorical input will be implemented as a spatial dimension of the board in order to help the model consider several piece types at the same time.
Thus, the final encoding of a board will be a 3d array, where the depth dimension (depth = 2*6) represents the type of piece.
By doing so, the model will be able to perform computations involving different types of pieces at the same time.
You can visualize the idea of the board encoding on the figure below, where the first board layers have been shown for the white pieces.</p>

<p><img src="/assets/chess_rules/chess_encoding.png" alt="The input encoding." /></p>

<p>Additionally to the board, we will also represent as input the piece to move.
This will be encoded as a two dimensional 0/1 8x8 array, where the unique value 1 corresponds to the piece to move.
At the end, the input is a 3 dimensional array containing 8x8x(6+6+1) = 832 values.
This seems expensive but this representation is really important for the model.</p>

<h2 id="encoding-the-output">Encoding the output</h2>

<p>Our model output consists in all the possible moves for the piece given as input.
Since we are not considering encoding information such as piece capture, the output will simply consist of a 0/1 8x8 array with a 1 value for each possible destination of the piece.</p>

<hr />

<h1 id="creating-the-model-architecture">Creating the model architecture</h1>

<p>The model architecture is another crucial step here.
Once again, I took inspiration from existing models such as <a href="https://www.deepmind.com/blog/alphazero-shedding-new-light-on-chess-shogi-and-go">alphazero</a> for this design.
The first layer is a 3d convolutional layer applied to the input, with a kernel size equal to 13x3x3 so that all the depth layers are considered.
After that, the model contains 4 successive 2d convolutional modules, with a convolutional layer, a batch normalization layer and a zero padding layer.
This way, all the intermediate inputs are 8*8 arrays, and I also introduced residual connections between the these modules.
Finally, there are two transposed convolutional layers to obtain a final 8x8 output.</p>

<p><img src="/assets/chess_rules/chess_model.jpg" alt="The model architecture." /></p>

<hr />

<h1 id="testing-the-model">Testing the model</h1>

<p>Once the architecture is decided, it is time to fit the model on our dataset.
In this case, I used the cross entropy loss function which is usually applied to classification problems.
I then used the default stochastic gradient descent algorithm for the optimization of the model, with a batch size equal to 150.</p>

<h2 id="model-training">Model training</h2>

<p>Training the model was a little bit fastidious due to some bugs in the input encoding.
I finally obtained a working version achieving an accuracy of 97% on the test set, which is quite satisfying (the accuracy was computed as the number of correct values in the output).
I experimented with several parameters such as the number of outputs in the convolutional layers, the loss function, the optimization algorithm, and so onâ€¦
Initially, the dataset was composed of only the boards from the first games of the <em>csv</em> files, but I realized that it was not diverse enough since a board configuration would not evolve much from few moves
For the other parameters, I did not find any big differences between the trainings.</p>

<h2 id="model-testing">Model testing</h2>

<p>For testing the trained model, I selected a game and plotted both the moves proposed from the rules (blue arrows) and the moves proposed by the deep neural network (red arrows).
You can find a first comparison on the image below.
The result is quite satisfying, although it is not perfect.
It really gives the impression that the model learnt something, and that it is able to generalize on the data.</p>

<p><img src="/assets/chess_rules/chess_comp2.png" alt="First comparison between predicted moves versus legal moves." /></p>

<h2 id="observations">Observations</h2>

<p>You will find below few board comparisons from one particular game.
It is interesting to notice several particularities.
For instance the model allows pawns to move diagonally, which has been probably inferred from the captures.
The moves from the rooks are partially well predicted, but these seem difficult to compute
We can also see that illegal moves are not managed at all by the model.</p>

<p><img src="/assets/chess_rules/chess_comp1.png" alt="Second comparison between predicted moves versus legal moves." /></p>

<hr />

<h1 id="conclusion">Conclusion</h1>

<p>To conclude on this deep learning application, I find it interesting to see the good accuracy of the model at the end, and I am confident that the model can be further improved.
It will be for instance interesting to find a way to encode the capture and to infer the rules only from the moves of a set of games (instead of using the rules to generate all the moves each time).
Although this particular application does not seem to be really practically useful, it is still interesting to see what these models are capable of.
I personally find it fascinating that deep learning models are somehow able to make sense of very complex patterns such as board configurations.
This latter point was already shown by the unreasonable efficiency of the alphago model for the game of go.
Indeed, looking for the best move for a board game was a problem traditionally treated with tree search approaches.
Seeing the efficiency of neural nets makes me think we are far from understanding the possible connections between continuous models and symbolic computations.</p>

<h2 id="related-works">Related works</h2>

<p>Following this project, was curious to see if such problem has already been treated. So I searched for similar attempts online, even if my initial goal was to become more familiar with deep learning.
We may compare this task to the <a href="https://www.deepmind.com/blog/alphazero-shedding-new-light-on-chess-shogi-and-go">alphazero</a> algorithm which is able to learn playing a game board from scratch.
However, this is somehow different because alphazero is not designed to output a <a href="https://stackoverflow.com/questions/47847461/how-to-enforce-rules-like-move-legality-in-chess-at-the-output-of-a-neural-netwo">list of moves</a>.
So we may still think that from its playing, this type of model is somehow able to understand the rules, but whether it may output them remains unclear.
I found this <a href="https://www.reddit.com/r/chess/comments/p7gpgg/can_a_modern_machine_learning_algorithm_learn_the/">discussion</a> on the topic, and that <a href="https://softwareengineering.stackexchange.com/questions/92189/learning-the-rules-of-chess">one</a>, but no other deep learning model for the rules of chess.</p>

<h2 id="source-code">Source code</h2>

<p>The source code of this project is available on <a href="https://github.com/smbct/blog_code.git">github</a> (folder <code class="language-plaintext highlighter-rouge">chess_rules</code>).
The code includes the assets used for the graphical interface and the trained model with the selected architecture.
Please feel free to re-use and improve the model (and let me know if you are able to improve the result and get new ideas) !</p>]]></content><author><name>smbct</name></author><category term="AI" /><category term="deep-learning" /><category term="chess" /><category term="games" /><category term="combinatorics" /><summary type="html"><![CDATA[As I recently defended my thesis, and since I am now looking for a job, I decided to dedicate to myself some time to study cutting edge computer science topics. Deep learning is one very famous (and somehow controversial) topic that I didnâ€™t have the occasion to experiment with so far. Thus I started playing with dl frameworks such as pytorch and recently I decided to implement an old idea that I had back during my thesis: inducing the rules of chess using a machine learning algorithm.]]></summary></entry><entry><title type="html">Soutenir sa thÃ¨se en comodal en 2022</title><link href="https://smbct.github.io/blog/soutenance-these/" rel="alternate" type="text/html" title="Soutenir sa thÃ¨se en comodal en 2022" /><published>2022-04-26T18:00:00+02:00</published><updated>2022-04-26T18:00:00+02:00</updated><id>https://smbct.github.io/blog/soutenance-these</id><content type="html" xml:base="https://smbct.github.io/blog/soutenance-these/"><![CDATA[<p>Une soutenance de thÃ¨se est un Ã©vÃ¨nement particulier que lâ€™on ne veut absolument pas louper en tant que doctorant/futur docteur. Il sâ€™agit en effet de convaincre le jury de thÃ¨se de la qualitÃ© de ses contributions scientifiques, mais Ã©galement de faire bonne figure devant sa famille et ses amis ! Des rÃ©pÃ©titions sont Ã©videmment au programme afin de proposer la prÃ©sentation de ses travaux la plus claire et fluide possible, tout en respectant les 45 minutes qui nous sont accordÃ©es pour la prÃ©sentation.</p>

<p>Cependant, covid oblige, les soutenances ont quelque peu Ã©voluÃ© depuis 2020. Par chance, ma soutenance ayant eu lieu en mars 2022, jâ€™ai eu la possibilitÃ© de la rÃ©aliser dans un amphithÃ©Ã¢tre contrairement Ã  dâ€™autres qui ont Ã©tÃ© contraint de la faire depuis leur maisonâ€¦ Celle-ci Ã©tait ouverte au public, Ã  lâ€™instar de la quasi totalitÃ© des soutenances. Par ailleurs, comme presque tous les doctorants qui soutiennent dÃ©sormais, jâ€™ai dÃ»  mâ€™adapter Ã  la prÃ©sence de 2 membres de mon jury (sur 6) en distanciel. Cela mâ€™a donnÃ© lâ€™occasion de rÃ©flÃ©chir avec plusieurs amis Ã  une installation garantissant la meilleure expÃ©rience possible. Voici donc quelques pistes pour soutenir sa thÃ¨se Ã  lâ€™Ã¨re covid.</p>

<h1 id="organisation-de-la-soutenance">Organisation de la soutenance</h1>

<p>Les soutenance de thÃ¨se suivent gÃ©nÃ©ralement la mÃªme organisation. Le doctorant dÃ©fend son travail devant un public composÃ© du jury, dans les premiers rangs, et de personnes extÃ©rieures. La soutenance se dÃ©roule en deux parties. La premiÃ¨re partie consiste en une prÃ©sentation de 45 minutes sur les travaux rÃ©alisÃ©s et la deuxiÃ¨me partie, qui enchaÃ®ne directement et pouvant durer plusieurs heures, consiste en une sÃ©rie de questions posÃ©es par chacun des membres du jury. Suite Ã  ces questions a lieu la dÃ©libÃ©ration du jury. Dans mon cas, la dÃ©libÃ©ration a eu lieu dans lâ€™amphithÃ©Ã¢tre ce qui a contraint toutes les personnes extÃ©rieures au jury Ã  le quitter. Enfin, lorsque la dÃ©libÃ©ration est terminÃ©e, toutes les personnes retournent dans lâ€™amphithÃ©Ã¢tre pour lâ€™annonce des rÃ©sultats.</p>

<p>Au niveau du co-modal, il y a donc plusieurs prÃ©cautions Ã  prendre. Dans un premier temps pour la prÃ©sentation, il faut un moyen de filmer le doctorant et dâ€™en capter le son pour les personnes Ã  distance. Mais ce nâ€™est pas tout. Puisque le jury participe Ã©galement Ã  la soutenance, il est nÃ©cessaire de capter le son et la vidÃ©o des membres du jury en prÃ©sentiel pour les personnes Ã  distance. Enfin, il est nÃ©cessaire de retransmettre dans lâ€™amphithÃ©Ã¢tre le son et la vidÃ©o des membres du jury en distanciel. Pour lâ€™annonce des rÃ©sultats Ã  la fin de la dÃ©libÃ©ration, il peut Ã©galement Ãªtre intÃ©ressant de filmer le jury et le doctorant en mÃªme temps. De maniÃ¨re gÃ©nÃ©rale, lâ€™organisation entre le jury et le doctorant demande ainsi dâ€™Ãªtre capable de filmer et capter le son Ã  deux endroits diffÃ©rents dans lâ€™amphithÃ©Ã¢tre, et Ã  retransmettre dans tout lâ€™amphithÃ©Ã¢tre le son et la vidÃ©o des membres Ã  distance.</p>

<h1 id="matÃ©riel-disponible-et-installation-gÃ©nÃ©rale">MatÃ©riel disponible et installation gÃ©nÃ©rale</h1>

<p>Ma soutenance de thÃ¨se sâ€™est dÃ©roulÃ©e dans un amphithÃ©Ã¢tre dans lequel il y avait un peu de matÃ©riel Ã  disposition. Au niveau du matÃ©riel, lâ€™amphithÃ©Ã¢tre Ã©tait Ã©quipÃ© avec un vidÃ©oprojecteur, des enceintes et plusieurs micros. Il Ã©tait possible dâ€™utiliser les enceintes et le vidÃ©oprojecteur Ã  partir dâ€™un pc via un cÃ¢ble HDMI. Par ailleurs, il nâ€™y avait pas la possibilitÃ© de rÃ©cupÃ©rer le signal des micros en entrÃ©e dans un ordinateur car celui-ci Ã©tait simplement envoyÃ© dans les enceintes de lâ€™amphi. Enfin, il y avait Ã©galement un systÃ¨me de vidÃ©o-confÃ©rence nomade avec un Ã©cran, une camÃ©ra, un micro et une enceinte.</p>

<h1 id="solution-mise-en-place">Solution mise en place</h1>

<p>La solution mise en place a le dÃ©faut dâ€™Ãªtre complexe mais celle-ci a relativement bien fonctionnÃ© le jour de la soutenance. Je vais dÃ©couper les diffÃ©rents aspects en plusieurs parties, et jâ€™ai ajoutÃ© un schÃ©ma rÃ©capitulatif de lâ€™installation Ã  la fin du billet. Pour commencer, jâ€™ai effectuÃ© ma prÃ©sentation de soutenance sur un pc portable Ã©quipÃ© dâ€™ubuntu, avec un support de prÃ©sentation pdf gÃ©nÃ©rÃ© par beamer (powerpoint version LaTex). Pour la partie distanciel, jâ€™ai crÃ©Ã© une rÃ©union Zoom gÃ©rÃ©e sur mon ordinateur de prÃ©sentation.</p>

<h2 id="privilÃ¨ges-zoom">PrivilÃ¨ges Zoom</h2>

<p>Premier dÃ©tail important, il a fallu trouver un moyen dâ€™empÃªcher les personnes extÃ©rieures au jury dâ€™activer micro ou camÃ©ra pendant la prÃ©sentation. Par chance, une option permettait de le faire dans la rÃ©union Zoom avec le compte Zoom utilisÃ© (option sÃ©curitÃ©). Malheureusement cette option empÃªche tout le monde dâ€™activer son son/image, y compris le jury. Pour y remÃ©dier, nous avons fait passÃ© les 2 membres Ã  distance en co-hÃ´tes afin quâ€™ils soient les seuls Ã  pouvoir communiquer. Par sÃ©curitÃ©, une personne supplÃ©mentaire mâ€™avait aidÃ© en gardant un Å“il sur le Zoom durant toute la soutenance.</p>

<h2 id="le-son">Le son</h2>

<p>Concernant le son, je nâ€™ai pas eu besoin de micro pour amplifier la voix. La difficultÃ© principale consistait par ailleurs Ã  capter Ã  la fois mon son et celui du jury Ã  lâ€™intÃ©rieur de lâ€™amphi. Le plus simple est dâ€™utiliser deux micros via deux ordinateurs connectÃ©s Ã  la mÃªme rÃ©union Zoom (ou en utilisant le systÃ¨me de vidÃ©oconfÃ©rence nomade disponible dans lâ€™amphhi), mais lors des tests, cette solution conduisait Ã  un echo et un effet larsen trÃ¨s nuisible. Pour y remÃ©dier, jâ€™ai dÃ©cidÃ© dâ€™utiliser deux micros usb connectÃ©s sur mon pc, et mixÃ©s au niveau logiciel. Pour la partie logiciel, jâ€™ai trouvÃ© la solution <a href="https://askubuntu.com/questions/868817/collecting-and-mixing-sound-input-from-different-microphones">ici</a>. Par contre, cette solution est valable uniquement si le jury nâ€™est pas trop Ã©loignÃ©, car les cÃ¢bles usb sont limitÃ©s Ã  5m (on pourrait aussi utiliser un micro sans fil ceci dit). Au niveau de la retransmission dans lâ€™amphithÃ©Ã¢tre, le son du Zoom Ã©tait directement envoyÃ© par mon pc dans les enceintes en HDMI.</p>

<h2 id="limage">Lâ€™image</h2>

<p>Concernant la retransmission de lâ€™image, jâ€™ai utilisÃ© deux camÃ©ras : une pour moi et une pour le jury. Me concernant, jâ€™avais prÃ©vu dâ€™utiliser un appareil photo rÃ©flexe en tant que webcam pour la prÃ©sentation (car la batterie ne tient pas beaucoup plus de 45 minutes), et de switcher sur la webcam du pc ensuite. La solution logicielle est <a href="https://maximevaillancourt.com/blog/canon-dslr-webcam-debian-ubuntu">ici</a>. Pour le jury, câ€™est la webcam du systÃ¨me Zoom nomade qui a Ã©tÃ© utilisÃ©e (le systÃ¨me Ã©tait donc connectÃ© Ã  la rÃ©union Zoom de la soutenance). Cette camÃ©ra sâ€™est rÃ©vÃ©lÃ©e pratique car elle se contrÃ´lait via une tÃ©lÃ©commande gÃ©rÃ©e par la personne qui sâ€™occupait Ã©galement du Zoom. Concernant les membres Ã  distance, lâ€™image Ã©tait envoyÃ©e sur le systÃ¨me Zoom nomade. Les personnes Ã  distance nâ€™Ã©taient donc pas visibles pour tout le monde dans lâ€™amphi mais nous avions considÃ©rÃ© que ce nâ€™Ã©tait pas essentiel car ils Ã©taient entendus Ã  partir des enceintes.</p>

<p>Enfin, ma prÃ©sentation pdf Ã©tait projetÃ©e via le vidÃ©oprojecteur et partagÃ©e via le partage dâ€™Ã©cran Zoom. Jâ€™ai utilisÃ© le super programme <a href="https://github.com/Cimbali/pympress">pympress</a> afin de dupliquer les slides sur mon Ã©cran de pc, pour ne pas avoir Ã  me retourner. Ce programme permet notamment dâ€™avoir un timer, de visualiser les slides suivantes et dâ€™utiliser un pointeur virtuel. Au niveau du pointeur, câ€™est justement celui de pympress que jâ€™ai utilisÃ© car un pointeur laser physique nâ€™aurait pas Ã©tÃ© visible pour les personnes Ã  distance. Pour ce faire, jâ€™ai utilisÃ© un clavier et une souris posÃ©s sur une table haute juste devant moi, ce qui me permettait de rester un minimum mobile (contrairement Ã  si jâ€™avais Ã©tÃ© assis). Jâ€™ai par ailleurs Ã©galement rÃ©alisÃ© un petit <a href="https://github.com/smbct/pympress.git">fork</a> de pympress aprÃ¨s coup afin de rajouter une fonctionnalitÃ© intÃ©ressante pour les animations beamer.</p>

<p><img src="/assets/schema_soutenance.png" alt="SchÃ©ma de la soutenance" />
SchÃ©ma de lâ€™installation de ma soutenance.</p>

<h1 id="bilan-et-amÃ©liorations-possibles">Bilan et amÃ©liorations possibles</h1>

<p>De maniÃ¨re gÃ©nÃ©ral, jâ€™ai Ã©tÃ© trÃ¨s content de cette installation, et la soutenance sâ€™est trÃ¨s bien dÃ©roulÃ©e. Jâ€™ai seulement eu quelque soucis au dÃ©but car je nâ€™arrivais pas rÃ©aliser le mixage des deux micros (un reboot a rÃ©solu le problÃ¨me), et lâ€™appareil photo rÃ©flexe nâ€™a pas fonctionnÃ© (jâ€™ignore pourquoi et je suis donc passÃ© Ã  la webcam du pc directement). Ces dÃ©sagrÃ©ments mâ€™ont malheureusement fait oublier dâ€™activer le partage dâ€™Ã©cran via Zoom au dÃ©but de la soutenance, ce qui a vite Ã©tÃ© corrigÃ© grÃ¢ce Ã  la manifestation dâ€™une personne du jury Ã  distance. Jâ€™avais par ailleurs prÃ©vu dâ€™enregistrer la prÃ©sentation en utilisant la fonction de Zoom mais ces soucis techniques mâ€™ont Ã©galement fait oublier de lancer lâ€™enregistrement.</p>

<p>Au niveau des amÃ©liorations, je pense que la partie logicielle est trop sensible car le moindre soucis technique peut rendre la soutenance infaisable. Le plus intÃ©ressant me semble lâ€™utilisation des deux micros, mÃªme si nous avons Ã©galement testÃ© la soutenance Ã  un seul micro qui pouvait fonctionner Ã©galement. Pour amÃ©liorer lâ€™installation, on peut imaginer utiliser une table de mixage Ã  laquelle serait reliÃ© les diffÃ©rents micros, et mÃªme avoir un micro cravate pour gagner en mobilitÃ©, mais cela demande plus de matÃ©riel. Il serait Ã©galement intÃ©ressant dâ€™avoir un pointeur laser Ã  la fois physique et numÃ©rique mais cela semble compliquÃ© Ã  mettre en place en pratique.</p>

<p>Ã‰videmment, une soutenance plus simple aurait largement Ã©tÃ© possible mais je dois avouer que nous avons Ã©tÃ© pris au jeu de proposer le mise en place la plus intÃ©ressante possible. Dans tous les cas, pensez Ã  privilÃ©gier la simplicitÃ© afin dâ€™Ã©viter les pannes de derniÃ¨re minute. La rÃ©pÃ©tition de son installation permet Ã©galement de ne pas avoir Ã  rÃ©flÃ©chir aux aspects techniques le jour de la soutenance, afin de se concentrer sur le contenu de la prÃ©sentation.</p>]]></content><author><name>smbct</name></author><category term="astuces" /><category term="these" /><category term="doctorat" /><category term="covid" /><category term="comodal" /><summary type="html"><![CDATA[Une soutenance de thÃ¨se est un Ã©vÃ¨nement particulier que lâ€™on ne veut absolument pas louper en tant que doctorant/futur docteur. Il sâ€™agit en effet de convaincre le jury de thÃ¨se de la qualitÃ© de ses contributions scientifiques, mais Ã©galement de faire bonne figure devant sa famille et ses amis ! Des rÃ©pÃ©titions sont Ã©videmment au programme afin de proposer la prÃ©sentation de ses travaux la plus claire et fluide possible, tout en respectant les 45 minutes qui nous sont accordÃ©es pour la prÃ©sentation.]]></summary></entry><entry><title type="html">SAT, un problÃ¨me de logique</title><link href="https://smbct.github.io/blog/SAT-logique/" rel="alternate" type="text/html" title="SAT, un problÃ¨me de logique" /><published>2018-03-04T17:00:00+01:00</published><updated>2018-03-04T17:00:00+01:00</updated><id>https://smbct.github.io/blog/SAT-logique</id><content type="html" xml:base="https://smbct.github.io/blog/SAT-logique/"><![CDATA[<p>Afin de pouvoir parler un peu plus en dÃ©tails de mon stage, je voulais aujourdâ€™hui prÃ©senter un problÃ¨me trÃ¨s connu en info. Ce problÃ¨me, SAT de son petit nom, tente de rÃ©pondre Ã  la question suivante : pour une formule logique donnÃ©e, existe-il une affectation des variables de cette formule permettant de la rendre vraie ?</p>

<p>Quelques explications sâ€™imposentâ€¦</p>

<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

<h1 id="logique-maths-et-info">Logique, Maths et Info</h1>

<p>Il peut paraÃ®tre un peu bizarre de parler de logique sur un blog dâ€™informatique. En info, on essaie de rÃ©soudre des problÃ¨mes de calculs divers, allant du calcul de plus courts chemins Ã  lâ€™analyse dâ€™avis clients sur les rÃ©seaux sociaux.</p>

<p>Seulement, les problÃ¨mes de logiques sont Ã©galement des problÃ¨mes calculatoires. La logique Ã  laquelle on sâ€™intÃ©resse ici est la logique propositionnelle. Elle comprend un ensemble de rÃ¨gles qui nous permettent de dÃ©finir ces problÃ¨mes de calcul.</p>

<blockquote class="prompt-info">
  <p>Lâ€™intÃ©rÃªt dans tout Ã§a ?</p>
</blockquote>

<p>Lâ€™intÃ©rÃªt dâ€™Ã©tudier ce genre de problÃ¨me est multiple. Tout dâ€™abord, dâ€™un point de vue thÃ©orique, ce sont les premiers problÃ¨mes que lâ€™on a dÃ©montrÃ© comme Ã©tant â€œdifficilesâ€. Cela signifie quâ€™on sait ces problÃ¨mes particuliÃ¨rement compliquÃ©s Ã  rÃ©soudre. Tellement compliquÃ©s que si quelquâ€™un trouvait une mÃ©thode extrÃªmement rapide pour y arriver, cela aurait un impacte majeur dans le monde, mais Ã§a câ€™est un autre sujet.</p>

<p>Cela rejoint le cÃ´tÃ© pratique de la chose. On est capable de montrer que SAT est Ã©quivalent Ã  beaucoup dâ€™autres problÃ¨mes, il sâ€™agit juste dâ€™une histoire de transformation. Le problÃ¨me Ã  beau Ãªtre difficile Ã  rÃ©soudre, des chercheurs ont tout de mÃªme crÃ©Ã© des mÃ©thodes <strong>trÃ¨s</strong> efficaces pour les rÃ©soudre. Tellement efficaces quâ€™il peut Ãªtre intÃ©ressant de les utiliser afin de rÃ©soudre ces autres problÃ¨mes. Et câ€™est justement <strong>Ã§a</strong> qui nous intÃ©resse ici !</p>

<h1 id="sat--mode-demplois">SAT : mode dâ€™emplois</h1>

<p>Entrons dans le vif de sujet. SAT sâ€™intÃ©resse Ã  ce quâ€™on appelle la logique propositionnelle, une des formes de logique les plus simples et brutes. Jâ€™ai parlÃ© plus haut de formule et il faut bien comprendre par lÃ  formule au sens mathÃ©matique. Voici donc les diffÃ©rents ingrÃ©dients de ces formules.</p>

<h2 id="les-variables">Les variables</h2>

<p>Qui dit formule dit variable, et on va commencer par Ã§a. Une variable logique est donc une variable au sens mathÃ©matique. Sa particularitÃ© est quâ€™elle peut prendre deux valeurs : <em>Vrai</em> ou <em>Faux</em>. Une variable logique reprÃ©sente donc un fait, dont on ne sait pas encore si il est avÃ©rÃ© ou non. Par exemple, on pourrait dÃ©finir une variable <strong>sport</strong> qui vaudrait <em>vraie</em> si on a prÃ©vu une sÃ©ance de sport, et <em>faux</em> sinon. On peut de la mÃªme maniÃ¨re avoir une variable <strong>restau</strong> qui vaudrait <em>vraie</em> si on a prÃ©vu dâ€™aller manger dans un restaurant.</p>

<h2 id="les-opÃ©rateurs">Les opÃ©rateurs</h2>

<p>La deuxiÃ¨me chose que lâ€™on trouve dans une formule, ce sont les opÃ©rateurs, qui vont entre autre lier les variables entre elles. Des opÃ©rateurs logiques, il en existe Ã©normÃ©ment. Cependant, pour la logique propositionnelle, on va se limiter Ã  3 : le <strong>non</strong>, le <strong>et</strong> et le <strong>ou</strong>.</p>

<p>Les rÃ©sultat de lâ€™application dâ€™un opÃ©rateur logique peut Ãªtre reprÃ©sentÃ© par une <strong>table de vÃ©ritÃ©</strong>. Cette table indique les valeurs possibles pour les variables et le rÃ©sultat de lâ€™opÃ©ration correspondant aux variables. Ces ce que lâ€™on va utiliser pour expliquer la sÃ©mantique des opÃ©rateurs.</p>

<ul>
  <li>
    <h3 id="le-non">Le <strong>non</strong></h3>
  </li>
</ul>

<p>Lâ€™opÃ©rateur <strong>non</strong> (notÃ© \(\neg\)) est lâ€™opÃ©rateur de nÃ©gation. Cet opÃ©rateur sâ€™applique a une seule variable (il est unaire). Il a pour but dâ€™exprimer la nÃ©gation de la variable. La formule logique sera donc vrai uniquement si la variable est fausse. La table de vÃ©ritÃ© de cet opÃ©rateur est donc :</p>

<table>
  <tbody>
    <tr>
      <td>\(a\)</td>
      <td>\(\neg a\)</td>
    </tr>
    <tr>
      <td>\(0\)</td>
      <td>\(1\)</td>
    </tr>
    <tr>
      <td>\(1\)</td>
      <td>\(0\)</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>
    <h3 id="le-et">Le <strong>et</strong></h3>
  </li>
</ul>

<p>Lâ€™opÃ©rateur <strong>et</strong> (notÃ© \(\land\)) indique une conjonction entre deux variable. Il exprime le fait que les deux variables doivent avoir la valeur <em>vraie</em>. La formule \(sport \land restau\) modÃ©lise le fait dâ€™aller Ã  la fois au sport et au restau. La table de vÃ©ritÃ© est alors :</p>

<table>
  <tbody>
    <tr>
      <td>\(sport\)</td>
      <td>\(restau\)</td>
      <td>\(sport \land restau\)</td>
    </tr>
    <tr>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>
    <h3 id="le-ou">Le <strong>ou</strong></h3>
  </li>
</ul>

<p>Lâ€™opÃ©rateur <strong>ou</strong> (notÃ© \(\lor\)) modÃ©lise une disjonction. Il reprÃ©sente le fait que lâ€™une des deux variables peut Ãªtre vraie pas pas nÃ©cessairement les deux en mÃªme temps. Cela donne :</p>

<table>
  <tbody>
    <tr>
      <td>\(sport\)</td>
      <td>\(restau\)</td>
      <td>\(sport \lor restau\)</td>
    </tr>
    <tr>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <td>1</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<blockquote class="prompt-info">
  <p>Notez bien que le ou que lâ€™on dÃ©crit ici nâ€™a pas le mÃªme sens que celui que lâ€™on utilise quotidiennement. En effet, si je pose la question : â€œtu vas au sport ou au resto ?â€ on ne sâ€™attend pas Ã  ce que les deux faits soit avÃ©rÃ©s, mais seulement un des deux. Il sâ€™agit dâ€™un ou â€œexclusifâ€.</p>
</blockquote>

<ul>
  <li>
    <h3 id="limplication">Lâ€™implication</h3>
  </li>
</ul>

<p>Lâ€™implication (\(\rightarrow\)) est un opÃ©rateur Ã©galement trÃ¨s utile qui permet de modÃ©liser une conÃ©quence. Il signifie que si la fait correspondant Ã  la cause est <em>vrai</em>, alors celui correspondant Ã  la consÃ©quence est <em>vrai</em> aussi. Par exemple, si je veux reprÃ©senter le fait que je ne veuille pas aller au restau aprÃ¨s le sport, je peux utiliser la formule : \(sport \rightarrow \neg restau\). Pour que la formule soit <em>vraie</em> dans le cas ou sport est <em>vrai</em>, il faudra donc que \(\neg restau\) soit <em>vrai</em>, ce qui revient Ã  \(restau\) <em>faux</em>. La table de cette opÃ©rateur donne :</p>

<table>
  <tbody>
    <tr>
      <td>\(a\)</td>
      <td>\(b\)</td>
      <td>\(a \rightarrow b\)</td>
    </tr>
    <tr>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<p>Lâ€™implication peut ne pas Ãªtre considÃ©rÃ©e comme un ingrÃ©dient de base du calcul propositionnel. En effet, il sâ€™exprime trÃ¨s simplement Ã  lâ€™aide des autres opÃ©rations. Par exemple, \(a \rightarrow b\) peut Ãªtre rÃ©Ã©crit en \(\neg a \lor b\) (on peut le vÃ©rifier facilement avec une table de vÃ©ritÃ©). De la mÃªme maniÃ¨re, on peut se passer de <strong>et</strong> en utilisant uniquement des <strong>ou</strong> et des <strong>non</strong> et inversement pour les <strong>ou</strong>. Cependant, considÃ©rer touts ces opÃ©rateurs Ã  la fois facilite les modÃ©lisation.</p>

<h1 id="ecrire-et-manipuler-des-formules-sat">Ecrire et manipuler des formules SAT</h1>

<p>Maintenant que nous savons de quoi est constituÃ©e une formule SAT, on va pouvoir regarder comment faire des calculs dessus en pratique.</p>

<p>Pour les exemples suivants, on peut dÃ©finir les variables logiques $a$, $b$, $c$, $d$ et $e$.</p>

<h2 id="vÃ©rifier-la-validitÃ©-dune-formule">VÃ©rifier la validitÃ© dâ€™une formule</h2>

<p>Une premiÃ¨re chose que lâ€™on peut faire est vÃ©rifiÃ©e si une formule est vraie Ã©tant donnÃ© une affectation pour ses variables. Partons par exemple de la formule : \(((a \land \neg b) \rightarrow c) \lor d\)</p>

<p>Si je fixe \(a = Faux\), \(b = Vrai\), \(c = Vrai\) et \(d = Vrai\), quâ€™obtient-on ?</p>

<p>Pour rÃ©pondre Ã  cette question on peut procÃ©der par Ã©tape. Tout dâ€™abord, on peut remplacer les variables par leurs valeurs dans la formule : \(((F \land \neg V) \rightarrow V) \lor V\)</p>

<p>Ensuite, on va Ã©valuer chacune des opÃ©rations en partant des opÃ©rations les plus <em>Ã  lâ€™intÃ©rieur</em> de la formule, câ€™est Ã  dire celles dont les opÃ©randes ne sont pas composÃ©es de sous-opÃ©rations. Pour savoir comment Ã©valuer, il suffit de regarder les tables de vÃ©ritÃ©. La premiÃ¨re chose Ã  Ã©valuer est donc \(\neg V\) qui est Ã©gale Ã  \(F\). On se retrouver ensuite avec \(F \land F\) que lâ€™on peut replacer par \(F\).</p>

<p>A ce stade, la formule a la forme : \((F \rightarrow V) \lor V\). On poursuit donc en Ã©valuant \(F \rightarrow V\) qui est vrai. Il reste enfin la derniÃ¨re opÃ©ration Ã  Ã©valuer : \(V \lor V\) qui est Vraie. On a donc montrÃ© que la formule Ã©tait vraie pour cette affectation de variable.</p>

<p>Vous pouvez noter que cette vÃ©rification est trÃ¨s simple Ã  faire. Elle peut aisÃ©ment Ãªtre implÃ©mentÃ©e dans une programme et ce nâ€™est pas cet aspect qui rend le problÃ¨me difficile.</p>

<h2 id="trouver-des-affectations-satisfaisantes">Trouver des affectations satisfaisantes</h2>

<p>Une autre chose que lâ€™on cherche souvent Ã  faire est trouver les affectations de variables pour lesquelles la formule est vraie.</p>

<p>Vous avez peut-Ãªtre remarquÃ© dans la vÃ©rification prÃ©cÃ©dente quâ€™on aurait pu rÃ©pondre Vrai directement en regardant simplement la valeur de \(d\) dÃ¨s le dÃ©but. On va se servir de Ã§a ici pour trouver dÃ©jÃ  affirmer que peu importe la valeur des autres variables, Ã  partir du moment oÃ¹ \(d\) est vraie, la formule sera vraie.</p>

<blockquote class="prompt-info">
  <p>Et si d est faux, Ã§a donne quoi ?</p>
</blockquote>

<p>Venons-en justement. Il lorsque \(d\) est faux, la partie droite de a formule : \((a \land \neg b) \rightarrow c\) doit Ãªtre vraie. On peut reprendre la table de vÃ©ritÃ© de lâ€™implication pour se rendre compte que lorsque la partie gauche est fausse, la formule est vraie. La formule sera donc vÃ©rifiÃ©e lorsque \(a \land \neg b\) est faux, câ€™est Ã  dire lorsque \(a\) est faux ou \(b\) est vrai (vous pouvez vÃ©rifier par vous-mÃªme !).</p>

<p>Enfin, si la partie gauche de la derniÃ¨re implication est vraie, alors $c$ doit Ãªtre vraie, ce qui nous donne la derniÃ¨re affectation : \(a = V\), \(b = F\), \(c = V\) et \(d = F\). Et câ€™est tout, on a Ã©numÃ©rÃ© de maniÃ¨re implicite chaque affectation permettant de rendre la formule vraie.</p>

<h2 id="rÃ©solution-de-sat">RÃ©solution de SAT</h2>

<p>Dans la partie prÃ©cÃ©dente, on a vu comment procÃ©der de maniÃ¨re mÃ©thodologique pour satisfaire la formule. Câ€™est justement ce calcul qui nous intÃ©resse en pratique. Cependant, il y a des cas oÃ¹ cette mÃ©thodologie se ramÃ¨ne Ã  tester toutes les affectations possibles de variables. Câ€™est particuliÃ¨rement embÃªtant car des affectations possibles, il y en a trop. Pour \(n\) variables, elles sont au nombre de \(2^n\). Cela signifie quâ€™a partir de 20 variables, on dÃ©passe dÃ©jÃ  le million dâ€™affectation (et je peux vous assurer que 20 variables, câ€™est trÃ¨s peu !).</p>

<p>Heureusement, les cas problÃ©matiques sont trÃ¨s difficiles Ã  rencontrer en pratique. En effet, la modÃ©lisation en SAT des problÃ¨mes que lâ€™on cherche Ã  rÃ©soudre donne Ã  la formule une structure particuliÃ¨re qui est en gÃ©nÃ©ral plus facile Ã  rÃ©soudre. Il faut aussi compte sur le fait que les solveurs SAT ont a la rÃ©putation dâ€™Ãªtre trÃ¨s trÃ¨s efficaces et permettent de rÃ©soudre en pratique des formules Ã©normes. Câ€™est dâ€™ailleurs la raison pour laquelle on transforme nos problÃ¨mes en problÃ¨mes SAT.</p>

<h1 id="sat-pour-rÃ©soudre-des-problÃ¨mes">SAT pour rÃ©soudre des problÃ¨mes</h1>

<p>Jâ€™en parle depuis le dÃ©but, ce qui nous intÃ©resse avec SAT, câ€™est la possibilitÃ© de lâ€™utiliser pour rÃ©soudre dâ€™autres problÃ¨mes. On appel cela un <em>encodage SAT du problÃ¨me</em>. Pour illustrer cela, je vous propose de rÃ©soudre la petite Ã©nigme <a href="http://matoumatheux.ac-rennes.fr/tous/qui/possede.htm">suivante</a>.</p>

<h2 id="les-variables-1">Les variables</h2>

<p>La premiÃ¨re Ã©tape pour faire un encodage SAT est de dÃ©terminer les variables. Il nâ€™y a en gÃ©nÃ©ral pas quâ€™une bonne rÃ©ponse et trouver les bonnes variables est une affaire de savoir faire.</p>

<p>Pour dÃ©finir les variables ici, on peut Ã©tudier les diffÃ©rents <em>choix</em> ou <em>possibilitÃ©s</em> de rÃ©ponse que nous avons face au problÃ¨me. La difficultÃ© de se problÃ¨me rÃ©side dans sa combinatoire, câ€™est Ã  dire le nombre de combinaisons dâ€™Ã©lÃ©ments de rÃ©ponse. Un Ã©lÃ©ment de rÃ©ponse dans ce cas-ci est une proposition de la forme : tel objet va avec telle personne. Câ€™est justement Ã§a que lâ€™on va utiliser comme variable.</p>

<p>Les variables que lâ€™on peut dÃ©finir sont donc :</p>

<ul>
  <li>\(v_g\) valant vraie si ValÃ©rie possÃ¨de la guitare</li>
  <li>\(s_g\) valant vraie si Sylvie possÃ¨de la guitare</li>
  <li>\(v_l\) valant vraie si ValÃ©rie possÃ¨de le luth</li>
  <li>\(s_l\) valant vraie si Sylvie possÃ¨de le luth</li>
  <li>\(v_f\) valant vraie si ValÃ©rie possÃ¨de le ballon de foot</li>
  <li>\(s_f\) valant vraie si Sylvie possÃ¨de le ballon de foot</li>
  <li>\(v_t\) valant vraie si ValÃ©rie possÃ¨de la balle de tennis</li>
  <li>\(s_t\) valant vraie si Sylvie possÃ¨de la balle de tennis</li>
  <li>\(v_{cn}\) valant vraie si ValÃ©rie possÃ¨de le chien</li>
  <li>\(s_{cn}\) valant vraie si Sylvie possÃ¨de le chien</li>
  <li>\(v_{ct}\) valant vraie si ValÃ©rie possÃ¨de le chat</li>
  <li>\(s_{ct}\) valant vraie si Sylvie possÃ¨de le chat</li>
</ul>

<p>On pourrait ici se passer de certaines variables (je vous laisse trouver comment) mais les expliciter toutes dans le modÃ¨le rend la modÃ©lisation plus claire.</p>

<h2 id="contraintes-du-problÃ¨me">Contraintes du problÃ¨me</h2>

<p>Un peu comme en programmation linÃ©aire, on retrouve une partie que jâ€™appelle <em>contrainte</em> dans la modÃ©lisation. Ici, ce sont des formules logiques qui vont lier les variables entre elles et faire respecter les conditions du problÃ¨me.</p>

<h3 id="contrainte-1">Contrainte 1</h3>

<p>La premiÃ¨re contrainte nous apprend que si ValÃ©rie possÃ¨de la guitare, le chat doit Ãªtre avec la balle de tennis, câ€™est Ã  dire quâ€™ils sont possÃ©dÃ©s par la mÃªme personne. La forme â€œSiâ€¦ alorsâ€¦â€ est typiquement une implication. En effet, la seule chose qui ne sera pas possible dans cette indication est que ValÃ©rie possÃ¨de la guitare et que le chat ne soit pas avec la balle de tennis (une seule possibilitÃ© dâ€™obtenir faux avec lâ€™implication, cf tables de vÃ©ritÃ©s).</p>

<p>Pour reprÃ©senter cette contrainte avec une formule logique, on peut dâ€™abord voir comment Ã©crire la partie droite : le chat est avec la balle de tennis. Avec nos variables, deux possibilitÃ©s sâ€™offrent Ã  nous : \(v_{ch}\) et \(v_t\) sont vraies en mÃªme temps ou bien \(s_{ch}\) et \(s_t\) sont vraies en mÃªme temps. On va donc modÃ©liser cette partie par : \((v_{ch} \land v_t) \lor (s_{ch} \land s_t)\).</p>

<p>Le reste de la formule est facile Ã  modÃ©liser car il sâ€™exprimer facilement Ã  partir des variables dÃ©finies. On obtient donc :</p>

\[v_g \rightarrow ((v_{ct} \land v_t) \lor (s_{ct} \land s_t))\]

<h3 id="contrainte-2">Contrainte 2</h3>

<p>On remarque que la contraint 2 a la mÃªme forme que la premiÃ¨re. Cela nous permet dâ€™Ã©crire les formules sans trop de peine. On obtient :</p>

\[s_{ct} \rightarrow ((v_{cn} \land v_t) \lor (s_{cn} \land s_t))\]

<h3 id="contrainte-3">Contrainte 3</h3>

<p>La contrainte 3 est lÃ©gÃ¨rement diffÃ©rente. En effet, la partie gauche de lâ€™implcation est cette fois similaire Ã  la partie droite. Cela tombe bien, on a dÃ©jÃ  vu comment la modÃ©liser. On obtient :</p>

\[((v_{cn} \land v_f) \lor (s_{cn} \land s_f)) \rightarrow ((v_t \land v_l) \lor (s_t \land s_l))\]

<h3 id="contrainte-4">Contrainte 4</h3>

<p>La contrainte 4 reprend le mÃªme principe que la prÃ©cÃ©dente :</p>

\[((v_{ct} \land v_f) \lor (s_{ct} \land s_f)) \rightarrow ((v_t \land v_g) \lor (s_t \land s_g))\]

<h3 id="contrainte-5">Contrainte 5</h3>

<p>La contrainte 5 apporte une petite diffÃ©rence. Cette fois, la partie droite de lâ€™implication signifie quâ€™un objet ne doit pas Ãªtre avec un autre. Pour modÃ©liser cela, rien de plus simple, il suffit de rajouter une nÃ©gation sur une des deux variables ou encore utiliser la variable correspondant Ã  lâ€™autre personne. On obtient par exemple :</p>

\[((v_g \land v_f) \lor (s_g \land s_f)) \rightarrow ((v_t \land \neg v_{ct}) \lor (s_t \land \neg s_{ct}))\]

<h3 id="contraintes-additionnelles">Contraintes additionnelles</h3>

<p>Il reste encore Ã  ajouter certaines contraintes qui nâ€™apparaissent pas dans lâ€™Ã©noncÃ©. En effet, il  parait Ã©vident et ce nâ€™est pas prÃ©cisÃ© quâ€™une personne possÃ¨de un seul des deux objets de chaque type et que les deux personnes ne peuvent pas possÃ©der le mÃªme objet. Il nâ€™y a cependant rien qui empÃªche cela dans les variables. De plus, rien nâ€™oblige les personnes Ã  possÃ©der un des deux objets.</p>

<p>Pour forcer une personne Ã  ne possÃ©der quâ€™un seul des deux objets, on peut ajouter des contraintes du style :</p>

\[\neg(personne_{objet1} \land personne_{objet2})\]

<p>Pour empÃªcher un objet dâ€™appartenir Ã  deux personnes, la contrainte est trÃ¨s similaire :</p>

\[\neg(personne1_{objet} \land personne2_{objet})\]

<p>Enfin, pou quâ€™une personne possÃ¨de au moins un objet, on ajoute des contraintes du genre :</p>

\[\neg(personne_{objet1} \lor personne_{objet2})\]

<blockquote class="prompt-info">
  <p>Certaines contraintes sont peut-Ãªtre redondantes. Cependant, la modÃ©lisation nâ€™est pas fait pour Ãªtre parfait, elle doit seulement dÃ©crire de la maniÃ¨re la plus exacte possible le problÃ¨me.</p>
</blockquote>

<h2 id="rÃ©solution">RÃ©solution</h2>

<p>Nous avons donc tous les Ã©lÃ©ments pour rÃ©soudre le problÃ¨me. Cependant, vous vous demander ce que lâ€™on va faire de toutes ces formules, car le problÃ¨me SAT sâ€™exprime avec une seule formule. Et bien ce que lâ€™on cherche Ã  obtenir câ€™est des valeurs pour nos variables telles que <strong>toutes</strong> les formules soient satisfaites en mÃªme temps. Pour les satisfaire, il suffit de les ajouter Ã  la suite en utiliser des <strong>et</strong> logiques. On obtient donc la formule suivante :</p>

\[\begin{align*}
		&amp;v_g \rightarrow ((v_{ct} \land v_t) \lor (s_{ct} \land s_t)) \land \\
        &amp;s_{ct} \rightarrow ((v_{cn} \land v_t) \lor (s_{cn} \land s_t)) \land \\
        &amp;((v_{cn} \land v_f) \lor (s_{cn} \land s_f)) \rightarrow ((v_t \land v_l) \lor (s_t \land s_l)) \land \\
        &amp;((v_{ct} \land v_f) \lor (s_{ct} \land s_f)) \rightarrow ((v_t \land v_g) \lor (s_t \land s_g)) \land \\
        &amp;((v_g \land v_f) \lor (s_g \land s_f)) \rightarrow ((v_t \land \neg v_{ct}) \lor (s_t \land \neg s_{ct})) \land \\
        &amp;\neg(v_{g} \land v_{l}) \land \\
        &amp;\neg(v_{f} \land v_{t}) \land \\
        &amp;... \land \\
        &amp;\neg(v_{g} \land s_{g}) \land \\
        &amp;\neg(v_{l} \land s_{l}) \land \\
        &amp;... \land \\
        &amp;v_g \lor v_l \land \\
        &amp;s_f \lor s_t \land \\
        &amp;...
	\end{align*}\]

<h1 id="sat-dans-mon-stage">SAT dans mon stage</h1>

<p>Pfiuou ! Ã§a fait beaucoup non ? Il y aurait encore Ã©normÃ©ment de choses Ã  dire sur SAT mais je voulais prÃ©senter le principal pour pouvoir parler de ce que je fais en stage.</p>

<p>Je lâ€™annonÃ§ais dÃ¨s le dÃ©but, on sâ€™intÃ©resse Ã  SAT car les solvers qui permettent de rÃ©soudre les formules sont extrÃªmement efficaces. Lâ€™intuition de mes encadrants, derriÃ¨re la proposition de stage Ã  laquelle jâ€™ai rÃ©pondue, est quâ€™en dÃ©terminant un encodage SAT intelligent pour les problÃ¨mes sur lesquels ils travaillent, ils allaient pouvoir Ãªtre plus performants et rÃ©soudre plus de problÃ¨mes.</p>

<p>Justement, ces problÃ¨mes je ne les ai pas encore prÃ©sentÃ©s. Jâ€™y viendrais la prochaine fois et cela me donnera lâ€™occasion de prÃ©senter un peu les travaux de mon Ã©quipe. Et je vous promet, ils font des trucs bien stylÃ©s!</p>]]></content><author><name>smbct</name></author><category term="vulgarisation" /><category term="IA" /><category term="stage" /><category term="logique" /><category term="SAT" /><category term="sudoku" /><summary type="html"><![CDATA[Afin de pouvoir parler un peu plus en dÃ©tails de mon stage, je voulais aujourdâ€™hui prÃ©senter un problÃ¨me trÃ¨s connu en info. Ce problÃ¨me, SAT de son petit nom, tente de rÃ©pondre Ã  la question suivante : pour une formule logique donnÃ©e, existe-il une affectation des variables de cette formule permettant de la rendre vraie ?]]></summary></entry><entry><title type="html">Plus court chemin et graphe</title><link href="https://smbct.github.io/blog/court-chemin/" rel="alternate" type="text/html" title="Plus court chemin et graphe" /><published>2017-07-12T18:00:00+02:00</published><updated>2017-07-12T18:00:00+02:00</updated><id>https://smbct.github.io/blog/court-chemin</id><content type="html" xml:base="https://smbct.github.io/blog/court-chemin/"><![CDATA[<p>Trouver un chemin, ou mÃªme le plus court chemin, est un problÃ¨me courant en informatique. Parmi les applications concrÃ¨tes de ce problÃ¨me, on peut tout dâ€™abord penser Ã  lâ€™itinÃ©raire le plus court, donnÃ© par un dispositif GPS. Ce nâ€™est cependant pas la seule application rÃ©elle. On peut par exemple chercher un plus court chemin pour une IA dans un jeu ou encore trouver la maniÃ¨re la plus rapide de mettre deux personnes en relation dans un rÃ©seau professionnel.</p>

<blockquote class="prompt-info">
  <p>Un problÃ¨me facile ?</p>
</blockquote>

<p>Le problÃ¨me du plus court chemin est un problÃ¨me trÃ¨s connu et trÃ¨s Ã©tudiÃ©. En rÃ©alitÃ©, il y a pleins de variantes possibles. Certaines peuvent Ãªtre faciles Ã  rÃ©soudre, comme trouver le meilleur itinÃ©raire avec un GPS. Dâ€™autres au contraire peuvent Ãªtre extrÃªmement difficiles, comme trouver le chemin le plus court passant par un ensemble de villes, pour effectuer des livraisons par exemple (problÃ¨me du voyageur de commerce/tournÃ©es de vÃ©hicules). Nous allons voir ici un algorithme simple pour rÃ©soudre un problÃ¨me similaire Ã  celui de lâ€™itinÃ©raire.</p>

<h1 id="prÃ©sentation-du-problÃ¨me">PrÃ©sentation du problÃ¨me</h1>

<p>Imaginons que nous connaissons certaines personnes qui dÃ©tiennent une mÃªme information cruciale que nous voulons rÃ©cupÃ©rer. Le soucis est que ces personnes ne nous donneront pas ce message directement, par manque de confiance. En effet, elle ne font confiance quâ€™Ã  leurs amis directs et le confieront seulement Ã  eux.</p>

<p>Si on considÃ¨re notre cercle dâ€™amis, nous sommes connectÃ©s Ã  un certain nombre de personnes qui sont elles-mÃªme connectÃ©es Ã  dâ€™autres personnes par des relations dâ€™amitiÃ©. Notre dÃ©fi est de rÃ©cupÃ©rer cette information le plus rapidement possible, en la faisant transmettre dâ€™amis en amis. Pour ce faire, nous allons donc demander Ã  nos amis proches de demander a leurs amis de demander Ã  leurs amis etcâ€¦ jusquâ€™Ã  ce quâ€™un personne diffuse lâ€™information dans le sens inverse pour quâ€™elle revienne vers nous.</p>

<p>Lâ€™objectif est donc de trouver le lien le plus court entre nous et lâ€™information, câ€™est Ã  dire de trouver une suite de personne Alice - Bob - Charles - â€¦ la plus courte telle que deux personnes successives sont amies, la premiÃ¨re personne de la liste Ã©tant nous et la derniÃ¨re Ã©tant une personne qui dÃ©tient lâ€™info.</p>

<h1 id="dÃ©tour-par-les-graphes">DÃ©tour par les graphes</h1>

<p>Les donnÃ©es de notre problÃ¨mes constituent un rÃ©seau dâ€™amis. Nous avons les noms des personnes, ainsi que leurs relations, câ€™est Ã  dire avec quelles autres personnes elle sont amies. Une bonne faÃ§on de manipuler nos donnÃ©es est de les reprÃ©senter sous forme dâ€™un graphe.</p>

<p>Un graphe est un objet mathÃ©matique qui peut Ãªtre utilisÃ© pour manipuler des donnÃ©es comportant une relation.
Cet objet est constituÃ© de <strong>sommets</strong> (ici les diffÃ©rentes personnes) et dâ€™<strong>arÃªtes</strong>, qui reprÃ©sentent les liens entre les diffÃ©rents sommets (ici ce sont les liens dâ€™amitiÃ©).</p>

<h1 id="algorithme-de-rÃ©solution">Algorithme de rÃ©solution</h1>

<p>Lâ€™algorithme de rÃ©solution du problÃ¨me est un algorithme qui effectue un <strong>parcours en largeur</strong> du graphe. Cela signifie quâ€™il va parcourir tous les sommets du graphe, en commenÃ§ant du plus proches du sommet de dÃ©part au plus Ã©loignÃ©s. Dire que deux sommets sont proches signifie ici quâ€™ils sont connectÃ©s par un petit nombre dâ€™<strong>arÃªtes</strong>.</p>

<h2 id="dÃ©roulement-de-lalgorithme">DÃ©roulement de lâ€™algorithme</h2>

<p>Lâ€™algorithme utilise une file dâ€™attente (souvent appelÃ© <strong>file</strong> en info) contenant les sommets (amis) Ã  <em>visiter</em>. Au tout dÃ©but, cette file dâ€™attente contient le sommet qui nous rÃ©prÃ©sente dans le graphe. Ensuite, une mÃªme Ã©tape est rÃ©pÃ©tÃ©e tant que la file dâ€™attente nâ€™est pas vide : le <strong>premier</strong> sommet ajoutÃ© dans la file est retirÃ© et lâ€™algorithme vÃ©rifie si il contient lâ€™info recherchÃ©e. Si câ€™est le cas, il peut sâ€™arrÃªter, sinon il retire ce sommet et ajoute tous les amis de ce sommet.
Une seule rÃ¨gle doit Ãªtre respectÃ©e : les amis dâ€™un sommet sont ajoutÃ©s Ã  la file uniquement sâ€™ils nâ€™ont pas dÃ©jÃ  Ã©tÃ© visitÃ©s par lâ€™algorithme.</p>

<p>Lâ€™algorithme va donc parcourir progressivement le graphe en partant dâ€™un sommet et en allant vers ses amis. ConcrÃ¨tement, il va dâ€™abord considÃ©rer le premier sommet, celui qui nous correspond. Il va ensuite chercher tous les amis de ce sommet et les ajouter Ã  une file dâ€™attente. Ces amis seront ensuite considÃ©rÃ©s et lâ€™algorithme va vÃ©rifier si lâ€™info est dÃ©tenu par lâ€™un dâ€™eux. Enfin les amis de cet ami considÃ©rÃ© seront ajoutÃ©s Ã  la file dâ€™attente Ã©galement.</p>

<p>Il y a encore une chose dont on a pas parlÃ©. Avec les Ã©tapes prÃ©cÃ©dentes, on est capable de trouver lâ€™info mais on ne peut pas encore afficher le chemin qui permet de lâ€™atteindre (câ€™est Ã  dire la liste des personnes). On a cependant dÃ©jÃ  fait le plus gros du travail. Pour retrouver le chemin on procÃ¨de en plusieurs Ã©tapes. Dans une premier temps, on indique pour chaque sommet Ã  partir de quel sommet on lâ€™a visitÃ©. Par exemple, si on visite le sommet A et on ajoute son ami B Ã  la file, on indique alors que B est obtenu Ã  partir de A. La deuxiÃ¨me Ã©tape consiste Ã  prendre le sommet contenant lâ€™info une fois sorti de la boucle, et a remonter successivement vers le sommet dâ€™origine pour finir vers le sommet nous reprÃ©sentant.</p>

<h2 id="un-mot-sur-les-files">Un mot sur les files</h2>

<p>Lâ€™algorithme que je propose pour rÃ©soudre ce problÃ¨me utilise une structure de donnÃ©e appelÃ©e file (la fameuse file dâ€™attente). En quelque mots, une file est une liste dâ€™Ã©lÃ©ments, ici de sommets ou de personnes. Le premier Ã©lÃ©ment est appelÃ© la tÃªte et le dernier la queue.</p>

<p>Elle respecte deux propriÃ©tÃ©s :</p>

<ul>
  <li>lorsquâ€™un Ã©lÃ©ment est ajoutÃ© Ã  la file, il est ajoutÃ© Ã  la fin et il devient ainsi la queue</li>
  <li>le seul Ã©lÃ©ment qui peut Ãªtre consultÃ© et retirÃ© est le premier Ã©lÃ©ment, câ€™est Ã  dire la tÃªte.</li>
</ul>

<p>Cette structure de donnÃ©e est gÃ©nÃ©ralement appelÃ©e FIFO (First In First Out). En effet, dans une telle structure, câ€™est le premier Ã©lÃ©ment ajoutÃ© dans la file qui sera retirÃ© en premier. Pensez donc Ã  la file dâ€™attente de la caisse dâ€™un magasin. On ne peut sâ€™insÃ©rer quâ€™Ã  la fin de la file (en gÃ©nÃ©ral!) et câ€™est la premiÃ¨re personne arrivÃ©e qui est servie en premier.</p>

<p>CrÃ©er les mÃ©canismes dâ€™une file est assez simple. Il y a plusieurs faÃ§on de le faire et tous les langages de programmation proposent directement ce genre dâ€™outil.</p>

<h2 id="algorithme-en-pseudo-code">Algorithme en pseudo code</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ajout Ã  file du sommet nous correspondant

TANT QUE l'info n'est pas trouvÃ©e et que la file n'est pas vide FAIRE

    sommet &lt;- tÃªte de la file
    retirer la tÃªte de la file

    SI le sommet contient l'info ALORS
        sortir de la boucle
    SINON
        ajouter Ã  la file ses amis non visitÃ©s
        indiquer aux sommets amis que leur sommet d'origine est le sommet visitÃ©
    FIN SI

FIN TANT QUE

SI l'info a Ã©tÃ© trouvÃ©e ALORS
    afficher l'info
    reconstruire le chemin Ã  partir des sommets d'origines
FIN SI  

</code></pre></div></div>

<h2 id="explications-sur-lalgorithme">Explications sur lâ€™algorithme</h2>

<p>Il nâ€™est pas forcÃ©ment Ã©vident au premiers abords de comprendre rÃ©ellement ce que lâ€™algorithme fait. Je rappelle quâ€™on cherche ici un plus court chemin. Si le chemin trouvÃ© est bien le plus court (ou un des plus court) câ€™est pour une unique raison. Ce quâ€™il faut garder Ã  lâ€™esprit, câ€™est que tous les amis des sommets visitÃ©s sont ajoutÃ©s Ã  la <strong>fin</strong> de la liste dâ€™attente. Cela signifie quâ€™ils seront visitÃ©s seulement aprÃ¨s tous les sommets prÃ©sents avant dans la liste. De plus, les sommets ajoutÃ©s en fin de liste auront toujours une distance supÃ©rieure Ã  ceux ajoutÃ©s avant (la distance est le nombre dâ€™amis intermÃ©diaires qui sÃ©pare Moi du sommet). De ce fait, lorsquâ€™un sommet contenant lâ€™info est trouvÃ©, tous les sommets de distance infÃ©rieur ont dÃ©jÃ  Ã©tÃ© visitÃ©s.</p>

<h1 id="exemple-pas-Ã -pas">Exemple pas Ã  pas</h1>

<p>Voici un exemple de graphe dâ€™amis. Le sommet nous reprÃ©sentant est le sommet <em>Moi</em> et le sommet contenant lâ€™info est le sommet avec la pastille jaune (Jackorah). Nous allons ici dÃ©rouler toutes les Ã©tapes de la rÃ©solution du problÃ¨me. La liste des sommets dâ€™origines est prÃ©sente Ã  la fin de lâ€™exemple.</p>

<p><img src="/assets/graphe_exemple.png" alt="Un exemple" /></p>

<p>Comme dit prÃ©cÃ©demment, un tout dÃ©but, la file dâ€™attente contient uniquement le sommet nous reprÃ©sentant :</p>

<p>-&gt; Moi</p>

<p>On entre ensuite dans la boucle et on retire ce sommet de la file. Ce sommet nâ€™est pas un sommet contenant lâ€™info, on ne sort donc pas de la boucle. On ajoute donc les sommets amis de ce sommet. On nâ€™oublie pas de prÃ©ciser pour les amis que Moi est leur sommet dâ€™origine. Cela donne :</p>

<p>-&gt; Ley ; Ricnath ; Joanea</p>

<p>Nouveau tour de boucle, lâ€™algorithme retire le premier sommet de la file (le seul accessible pour cette structure de donnÃ©e). Manque de chance, Ley ne dÃ©tient pas lâ€™info non plus, on ajoute donc ses amis Ã  la fin de la file.</p>

<p>-&gt; Ricnath ; Joenea ; Kimi</p>

<p>On recommence encore une fois, cette fois câ€™est Ricnath qui est visitÃ©, il ne dÃ©tient pas lâ€™info, ses amis sont ajoutÃ©s.</p>

<p>-&gt; Joanea ; Kimi ; Hereâ€™chet</p>

<p>Au tour de Jonea dÃ©sormais. Toujours pas dâ€™info, on ajoute ses amisâ€¦ Ah mince ! Hereâ€™chet a dÃ©jÃ  Ã©tÃ© ou est prÃ©sent dans la file, on ne lâ€™ajoute donc pas !</p>

<p>-&gt; Kimi ; Hereâ€™chet</p>

<p>Au tour de Kimi, pas dâ€™info ni dâ€™amis, on passe vite dessus.</p>

<p>-&gt; Hereâ€™chet</p>

<p>Le fameux Hereâ€™chet dÃ©sormais. Ah toujours rien ! Mais il a un amis, on lâ€™ajoute donc Ã  la file.</p>

<p>-&gt; Jackorah</p>

<p>Notre derniÃ¨re chance, car il nâ€™a pas dâ€™amis et si la liste est vide alors lâ€™algo sâ€™arrÃªte. Ouf ! Il a bien lâ€™info, on peut la rÃ©cupÃ©rer.</p>

<p>Voici le tableau des sommets dâ€™origine :</p>

<hr />

<table style="width:100%">
 <tr>
   <th>Sommet</th>
   <th>Ley</th>
   <th>Kimi</th>
   <th>Ricnath</th>
   <th>Joanea</th>
   <th>Here'chet</th>
   <th>Jackorah</th>
 </tr>
 <tr>
   <td>Sommet d'origine</td>
   <td>Moi</td>
   <td>Ley</td>
   <td>Moi</td>
   <td>Moi</td>
   <td>Ricnath</td>
   <td>Here'chet</td>
 </tr>
</table>

<hr />

<p>Ceci nous permet donc de reconstruire la liste. On part donc du sommet sur lequel on a trouvÃ© lâ€™info : Jackorah. On remonte vers le sommet dâ€™origine, cela donne Hereâ€™chet. On continue avec le sommet dâ€™origine de Hereâ€™chet, cela donne Ricnath. Et on termine enfin car le sommet dâ€™origine de Ricnath est Moi.</p>

<p>Finalement on obtient donc la liste : Moi -&gt; Ricnath -&gt; Hereâ€™chet -&gt; Jackorah</p>

<p>On a donc une liste de 4 personnes, et il nâ€™est pas possible de faire plus court. On peut nÃ©anmoins remarquer quâ€™il y avait un autre chemin de mÃªme longueur possible. Le chemin retournÃ© par lâ€™algorithme dÃ©pend en fait de lâ€™ordre dans lequel sont ajoutÃ© les amis dâ€™un sommet.</p>

<h1 id="dÃ©tails-sur-limplÃ©mentation">DÃ©tails sur lâ€™implÃ©mentation</h1>

<p>Certains dÃ©tails nâ€™ont toujours pas Ã©tÃ© Ã©clairÃ©s dans lâ€™algorithme. Comme prÃ©cisÃ© prÃ©cÃ©demment, les files sont prÃ©sentes dans tous les langages, donc pas besoin de les reprogrammer. Cependant, les graphes sont des structures un peu plus sophistiquÃ©es et il y a de nombreuses faÃ§on de les implÃ©menter.</p>

<p>Dans lâ€™implÃ©mentation que je propose plus bas, jâ€™ai choisi de programmer le graphe en utilisant une <strong>liste de successeurs</strong>. Cela signifie que chaque sommet du graphe contient un lien vers la liste des sommets qui lui sont connectÃ©s. En faisant comme ceci, on peut alors accÃ©der facilement aux sommets connectÃ©s. Le seul problÃ¨me est que si on cherche un ami en particulier, il faut parcourir toute la liste dâ€™amis pour le trouver. Avec cette implÃ©mentation, il faut Ã©galement garder Ã  lâ€™esprit que la liste des amis contient uniquement des <strong>liens</strong> vers les sommets amis, et que la mÃ©moire nâ€™est pas recopiÃ©es dans toutes les listes.</p>

<p>Il y a beaucoup dâ€™autre faÃ§ons dâ€™implÃ©menter des graphes. Une autre faÃ§on de faire est dâ€™utiliser un tableau indiquant pour chaque couple de sommet si ils sont connectÃ©s (ou amis) ou non. Cette faÃ§on de faire utilise plus de mÃ©moire car il y a autant de variables que de connexions possibles dans le graphe.</p>

<p>Enfin, concernant lâ€™implÃ©mentation, on peut Ã©galement parler de lâ€™obtention de la liste finale Ã  partir des sommets dâ€™origine. Pour la liste des sommets dâ€™origines, on peut utiliser une liste dâ€™association qui associe Ã  chaque sommet un lien vers un autre sommet qui est son sommet dâ€™origine. Ensuite, pour construire le chemin, il suffit dâ€™Ã©crire une boucle qui bascule vers le sommet dâ€™origine et va cherche son propre sommet dâ€™origine Ã  chaque Ã©tape.</p>

<h1 id="code">Code</h1>

<p>Vous pouvez retrouver une implÃ©mentation de lâ€™algorithme <a href="https://github.com/smbct/blog_code/tree/master/graphe_secret">ici</a>. Lâ€™implÃ©mentation a Ã©tÃ© faite en python. Elle permet de gÃ©nÃ©rer alÃ©atoirement un graphe dâ€™amis Ã  partir dâ€™une liste de noms et calcule le plus court chemin pour rÃ©cupÃ©rer lâ€™information dans le graphe. Le code est commentÃ© et le fichier readme donne les dÃ©tails pour lâ€™exÃ©cution du programme.</p>

<h1 id="vers-les-algorithmes-dintelligence-artificielle">Vers les algorithmes dâ€™intelligence artificielle</h1>

<p>En conclusion, nous avons vu ici un algorithme de base mais qui est Ã©galement fondamental en informatique. On a fait du parcours de graphe, ce que lâ€™on retrouve dans de nombreux problÃ¨mes. Il y a beaucoup de faÃ§ons de parcourir un graphe, par exemple en largeur, ce qui est prÃ©sentÃ© ici, ou encore en profondeur, en ajoutant les amis en dÃ©but de liste dâ€™attente. Ces types de parcours peuvent Ãªtre utilisÃ©s dans de nombreux types de graphes. On considÃ¨re souvent des parcours dâ€™<strong>arbres</strong> lorsquâ€™un un sommet nâ€™est jamais visitÃ© deux fois.</p>

<p>Lorsquâ€™on essaie de rÃ©soudre des problÃ¨mes de plus en plus complexes, ce quâ€™on pourrait appeler intelligence artificielle, ces parcours de graphes reviennent trÃ¨s souvent. Par exemple, si on veut crÃ©er un programme jouant aux Ã©checs, on va alors explorer le graphe des coups possibles, et essayer de sÃ©lectionner le meilleur coup possible. On ne cherche alors plus une simple information mais on cherche Ã  maximiser le score. Dans ce genre de problÃ¨me, lâ€™algorithme prÃ©sentÃ© ici est malheureusement trÃ¨s inefficace Ã  cause de la taille du graphe/de lâ€™arbre considÃ©rÃ©. Mais des algorithmes trÃ¨s efficaces existent, dont on aura peut-Ãªtre lâ€™occasion de reparler.</p>]]></content><author><name>smbct</name></author><category term="vulgarisation" /><category term="IA" /><category term="optimisation" /><category term="graphes" /><category term="file" /><category term="algorithme" /><summary type="html"><![CDATA[Trouver un chemin, ou mÃªme le plus court chemin, est un problÃ¨me courant en informatique. Parmi les applications concrÃ¨tes de ce problÃ¨me, on peut tout dâ€™abord penser Ã  lâ€™itinÃ©raire le plus court, donnÃ© par un dispositif GPS. Ce nâ€™est cependant pas la seule application rÃ©elle. On peut par exemple chercher un plus court chemin pour une IA dans un jeu ou encore trouver la maniÃ¨re la plus rapide de mettre deux personnes en relation dans un rÃ©seau professionnel.]]></summary></entry><entry><title type="html">Optimisation et sudoku</title><link href="https://smbct.github.io/blog/sudoku/" rel="alternate" type="text/html" title="Optimisation et sudoku" /><published>2016-08-02T15:20:33+02:00</published><updated>2016-08-02T15:20:33+02:00</updated><id>https://smbct.github.io/blog/sudoku</id><content type="html" xml:base="https://smbct.github.io/blog/sudoku/"><![CDATA[<p>La programmation linÃ©aire est un formalisme permettant de traiter des problÃ¨mes trÃ¨s larges. Câ€™est ce que je voudrais montrer aujourdâ€™hui en donnant la modÃ©lisation sous forme dâ€™un programme linÃ©aire de la rÃ©solution dâ€™un sudoku. La modÃ©lisation va donc Ãªtre moins Ã©vidente quâ€™avec lâ€™exemple prÃ©sentÃ© dans lâ€™article sur la programmation linÃ©aire.</p>

<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

<h2 id="prÃ©sentation-du-problÃ¨me">PrÃ©sentation du problÃ¨me</h2>

<p>La rÃ©solution du sudoku consiste Ã  trouver des valeurs pour les cases vides dâ€™une grille de telle sorte que plusieurs contraintes soient respectÃ©es. On cherche donc a reprÃ©senter ce problÃ¨me sous forme dâ€™un programme linÃ©aire. Plus prÃ©cisÃ©ment, on veut trouver un ensemble de de variable traduisant les dÃ©cisions Ã  prendre pour rÃ©soudre le problÃ¨me. Les dÃ©cisions sont ici les chiffres Ã  insÃ©rer dans les cases vides.</p>

<blockquote class="prompt-info">
  <p>Et en quoi câ€™est un problÃ¨me dâ€™optimisation ?</p>
</blockquote>

<p>Ce nâ€™est tout simplement pas un problÃ¨me dâ€™optimisation. On cherche une valeur pour chaque case telle que la grille soit correcte. Cependant, la programmation linÃ©aire peut tout de mÃªme nous venir en aide. MÃªme sâ€™il y avait plusieurs solutions possibles, seule une nous intÃ©resse. On peut Ã©videmment dÃ©finir une fonction objectif pour obtenir des conditions supplÃ©mentaires sur le rÃ©sultat mais Ã§a nâ€™aurait pas dâ€™intÃ©rÃªt pratique. Le fait est que trouver une solution rÃ©alisable (câ€™est Ã  dire une grille valide) est facile Ã  faire lorsquâ€™on sait trouver la solution optimale dâ€™un problÃ¨me. Donc bien que lâ€™optimisation nâ€™ait pas vraiment de sens ici, on utilise un outil que lâ€™on sait efficace pour rÃ©pondre Ã  une question plus facile.</p>

<h2 id="rappels-sur-le-jeu">Rappels sur le jeu</h2>

<p>Le problÃ¨me consiste donc Ã  remplir la grille de sudoku de taille 9*9 avec des valeurs valides. Les donnÃ©es du problÃ¨me sont donc un ensemble de valeur comprises entre 1 et 9 et les positions de ces valeurs dans la grille.</p>

<p>VoilÃ  la grille dâ€™exemple que nous allons rÃ©soudre :</p>

<table>
  <tbody>
    <tr>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>*</td>
      <td>4</td>
      <td>Â </td>
      <td>Â </td>
      <td>*</td>
      <td>8</td>
      <td>7</td>
      <td>Â </td>
    </tr>
    <tr>
      <td>Â </td>
      <td>4</td>
      <td>7</td>
      <td>*</td>
      <td>Â </td>
      <td>9</td>
      <td>2</td>
      <td>*</td>
      <td>Â </td>
      <td>5</td>
      <td>Â </td>
    </tr>
    <tr>
      <td>2</td>
      <td>Â </td>
      <td>Â </td>
      <td>*</td>
      <td>6</td>
      <td>Â </td>
      <td>Â </td>
      <td>*</td>
      <td>Â </td>
      <td>3</td>
      <td>Â </td>
    </tr>
    <tr>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
    </tr>
    <tr>
      <td>9</td>
      <td>7</td>
      <td>Â </td>
      <td>*</td>
      <td>5</td>
      <td>Â </td>
      <td>Â </td>
      <td>*</td>
      <td>2</td>
      <td>Â </td>
      <td>3</td>
    </tr>
    <tr>
      <td>5</td>
      <td>Â </td>
      <td>8</td>
      <td>*</td>
      <td>Â </td>
      <td>2</td>
      <td>4</td>
      <td>*</td>
      <td>7</td>
      <td>Â </td>
      <td>6</td>
    </tr>
    <tr>
      <td>6</td>
      <td>Â </td>
      <td>4</td>
      <td>*</td>
      <td>Â </td>
      <td>Â </td>
      <td>7</td>
      <td>*</td>
      <td>Â </td>
      <td>8</td>
      <td>5</td>
    </tr>
    <tr>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
    </tr>
    <tr>
      <td>Â </td>
      <td>9</td>
      <td>Â </td>
      <td>*</td>
      <td>3</td>
      <td>Â </td>
      <td>8</td>
      <td>*</td>
      <td>Â </td>
      <td>Â </td>
      <td>7</td>
    </tr>
    <tr>
      <td>Â </td>
      <td>Â </td>
      <td>3</td>
      <td>*</td>
      <td>2</td>
      <td>4</td>
      <td>Â </td>
      <td>*</td>
      <td>1</td>
      <td>6</td>
      <td>Â </td>
    </tr>
    <tr>
      <td>Â </td>
      <td>1</td>
      <td>2</td>
      <td>*</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>*</td>
      <td>Â </td>
      <td>9</td>
      <td>Â </td>
    </tr>
  </tbody>
</table>

<p>Jâ€™ai rajouter des cases supplÃ©mentaires afin de visualiser les diffÃ©rentes zones. On veut donc trouver des valeurs pour les cases vides tout en respectant certaines contraintes :</p>

<ol>
  <li>Les valeurs des cases sont comprises entre 1 et 9</li>
  <li>Sur chaque ligne, on ne peut pas trouver plusieurs cases ayant la mÃªme valeur</li>
  <li>Sur chaque colonne, on ne peut pas trouver non plus plusieurs cases ayant la mÃªme valeur</li>
  <li>Dans chaque bloc de 3*3 cases matÃ©rialisÃ© dans la grille ci-dessus, on ne peut encore pas trouver plusieurs fois la mÃªme valeur</li>
</ol>

<h2 id="modÃ©lisation-du-problÃ¨me">ModÃ©lisation du problÃ¨me</h2>

<p>Comme pour la modÃ©lisation de lâ€™article sur la programmation linÃ©aire, on va procÃ©der par Ã©tape. Tout dâ€™abord, on va choisir les variables du problÃ¨me et ensuite on Ã©crira les diffÃ©rentes contraintes. La modÃ©lisation sera ensuite terminÃ©s car il nâ€™y a pas de fonction objectif. Il est toutefois possible dâ€™en mettre une quelconque. Cela peut Ãªtre nÃ©cessaire si le solver utilisÃ© (le programme de rÃ©solution) ne permet pas de rÃ©soudre des problÃ¨mes sans fonction objectif. Mais encore une fois, peu importe la fonction objectif. A partir du moment oÃ¹ les contraintes sont respectÃ©es et la modÃ©lisation est correcte, la rÃ©solution donnera une solution correcte Ã  notre problÃ¨me.</p>

<h3 id="les-variables">Les variables</h3>

<p>Lorsque jâ€™ai commencÃ© Ã  rÃ©flÃ©chir au problÃ¨me, jâ€™ai voulu choisir une variable par case. Comme cela, on obtenait Ã  la fin de la rÃ©solution directement la valeur de chaque case. Ce choix me semblait naturel mais la modÃ©lisation qui en rÃ©sultait nâ€™Ã©tait pas simple. En effet, de cette faÃ§on, toutes les contraintes ne sont pas faciles Ã  traduire en terme de programme linÃ©aire. Bien sÃ»r, la contrainte nÂ°1 est trÃ¨s simple mais pour les contraintes suivantes, ce nâ€™est pas la mÃªme chose. On veut exprimer le fait quâ€™une variable ne peut pas Ãªtre Ã©gale Ã  une autre variable ou Ã  une constant.</p>

<p>Par exemple, si on se situe dans la case en haut Ã  gauche de la grille et on considÃ¨re la premiÃ¨re colonne, on ne pourra pas choisir 2, 9, 5 et 6 comme valeur. On voudrait donc Ã©crire quelque chose comme : \(var \neq 2\), \(var \neq 9\), etcâ€¦  Ces inÃ©galitÃ©s ne sont pas valides en programmation linÃ©aire. On pourrait les remplacer par quelque chose comme \(var &lt; 2\) ou \(var &gt; 2\) pour la premiÃ¨re. Encore une fois, on se heurte Ã  plusieurs obstacles. PremiÃ¨rement, les inÃ©galitÃ©s de programmes linÃ©aires sont seulement des inÃ©galitÃ©s larges. Ici, comme on ne manipule uniquement des entiers, on peut Ã©crire Ã  la place : \(var \leq 1\) <em>ou</em> \(var \geq 3\). On peut alors sembler Ãªtre tirÃ© dâ€™affaire maisâ€¦ toujours pas ! Il faut en effet se rappeler que les contraintes dâ€™un programme linÃ©aire doivent Ãªtre vÃ©rifiÃ©e simultanÃ©ment. Câ€™est donc le <em>ou</em> qui pose problÃ¨me ici. Enfin, le nombre de contrainte Ã  Ã©crire devient trÃ¨s important. En effet, pour chaque variable, on a besoin de 19 contraintes. Face Ã  tous ces inconvÃ©nients, on va donc chercher un meilleur moyen de modÃ©liser le soduko.</p>

<blockquote class="prompt-info">
  <p>En rÃ©alitÃ©, il existe une astuce pour modÃ©liser un <em>ou</em>. Celle-ci repose sur lâ€™utilisation dâ€™une variable intermÃ©diaire et la technique utilisÃ©e nâ€™est pas forcÃ©ment Ã©lÃ©gante. De plus, vu le nombre de contrainte, il est prÃ©fÃ©rable de laisser Ã§a de cÃ´tÃ©.</p>
</blockquote>

<p>La modÃ©lisation alternative profite dâ€™une particularitÃ© du problÃ¨me : le nombre de valeur que peut prendre chaque case est assez limitÃ©. On va utiliser des variables que lâ€™on appelle variables binaires. Contrairement aux variables classiques, celles-ci ne peuvent prendre que deux valeurs possibles : 0 ou 1. Ces variables apparaissent naturellement dans beaucoup de problÃ¨mes dâ€™optimisation car elles reprÃ©sentent le fait de prendre ou de ne pas prendre une dÃ©cision. On peut obtenir le mÃªme type de rÃ©sultat en utilisant des variables entiÃ¨res et en les bornant mais il faut garder Ã  lâ€™esprit quâ€™il existe des mÃ©thodes particuliÃ¨res pour traiter ces variables de maniÃ¨re efficace.</p>

<p>Pour revenir Ã  notre problÃ¨me, au lieu dâ€™utiliser une variable par case, on va en utiliser 9 ! Pour chaque case, une des 9 variables aura la valeur <em>1</em> et câ€™est le numÃ©ro de cette variable qui sera insÃ©rÃ© dans la grille. Par exemple, considÃ©rons la 5iÃ¨me variable de la premiÃ¨re case. Elle reprÃ©sente la dÃ©cision de choisir 5 comme valeur pour la premiÃ¨re case. Si cette variable est affectÃ©e Ã  1, on choisit 5, sinon, on ne choisit pas 5.</p>

<blockquote class="prompt-info">
  <p>Minute ! Ã§a veut dire que pour une mÃªme case, on peut choisir plusieurs valeurs en mÃªme temps ?</p>
</blockquote>

<p>Dans lâ€™Ã©tat oui. Mais on nâ€™a pas encore commencÃ© Ã  Ã©crire les contraintes. Câ€™est justement ce que lâ€™on sâ€™apprÃªte Ã  faire. Et nous allons voir que Ã§a se fait plutÃ´t bien finalement. Pour la suite, on considÃ¨re que la variable \(x_{i/j_k}\) reprÃ©sente le fait de choisir la valeur k pour la case (i,j). i reprÃ©sente la ligne de la grille et j la colonne. On considÃ¨re Ã©galement que la case en haut Ã  gauche a pour coordonnÃ©e (0,0) et que les indices sont croissants quand on se dÃ©place vers le bas ou vers la droite.</p>

<h3 id="les-contraintes">Les contraintes</h3>

<p>On peut commencer par remarquer que la premiÃ¨re contrainte nâ€™est plus nÃ©cessaire. En effet, la nature des variables a une incidence directe sur les contraintes et il nâ€™est plus possible de choisir une valeur non permise pour une case.</p>

<p>La premiÃ¨re contrainte qui peut venir Ã  lâ€™esprit concerne le fait de choisir plusieurs valeurs pour une case. Cette contrainte est trÃ¨s simple a Ã©crire. Ã‰tant donnÃ© que toutes les variables concernant une case ne peuvent avoir pour valeur uniquement 0 ou 1 et quâ€™une seule de ces variables doit Ãªtre Ã  1, il suffit dâ€™Ã©crire \(\sum\limits_{k=1}^9 x_{i,j/k} = 1\).</p>

<p>Ensuite, on veut traduire le fait quâ€™une valeur ne peut apparaÃ®tre deux fois dans une ligne. Comme prÃ©cÃ©demment, il suffit de tester si la somme des variables concernant la <em>mÃªme valeur</em> dans une colonne est Ã©gale Ã  1. On obtient \(\sum\limits_{j=0}^8 x_{i,j/k} = 1\).</p>

<p>On veut enfin le faire pour les colonnes et les les blocs 3*3. Pour les colonnes, cela donne \(\sum\limits_{i=0}^8 x_{i,j/k} = 1\). Pour le premier bloc, câ€™est \(\sum\limits_{i=0}^2 \sum\limits_{j=0}^2 (x_{i,j/k} = 1)\).</p>

<h2 id="le-programme-linÃ©aire">Le programme linÃ©aire</h2>

<p>On peut donc rÃ©capituler tout Ã§a sous forme dâ€™un programme linÃ©aire. Une petite rÃ©flexion cependant Ã  propos des variables : Pour simplifier lâ€™Ã©criture du programme, on peut dÃ©cider de dÃ©finir les 9 variable pour <em>toutes</em> les cases. Or, certaines cases ont une valeur fixÃ©e par les donnÃ©es de la grille. Pour ces cases, les contraintes seront donc des Ã©galitÃ©s qui fixeront les valeurs. Ces variables sont Ã  priori inutiles mais cela permet de gagner du temps sur lâ€™Ã©criture du solver.</p>

<p>On obtient donc finalement le programme linÃ©aire suivant :</p>

\[max \,z = 0\\
	 \begin{align*}
		s.c. \sum\limits_{k=1}^9 x_{i,j/k} &amp;= 1, i \in \{0, .., 8\}, j \in \{0, .., 8\} \\
            \sum\limits_{j=0}^8 x_{i,j/k} &amp;= 1, i \in \{0, .., 8\}, k \in \{1, .., 9\} \\
            \sum\limits_{i=0}^8 x_{i,j/k} &amp;= 1, j \in \{0, .., 8\}, k \in \{1, .., 9\} \\
            \sum\limits_{i=l}^{l+2} \sum\limits_{j=m}^{m+2} (x_{i,j/k} &amp;= 1), l, m \in \{0,3,6\}, k \in \{1, .., 9\} \\
			x_{i,j/k} &amp;\in \{0, 1\}
	\end{align*}\]

<h2 id="conclusion">Conclusion</h2>

<p>Cet exemple nous montre donc que la programmation linÃ©aire qui semblait plutÃ´t limitÃ©e permet en fait de modÃ©liser un large Ã©ventail de problÃ¨me.
Plus les problÃ¨mes sont complexes, plus il faut avoir recours Ã  des astuces afin de rÃ©ussir Ã  les modÃ©liser correctement.
Il faut aussi faire attention Ã  ce que le nombre de contrainte ne soit pas trop important. En effet, cela peut compromettre la rÃ©solution car les solvers ne sont pas infaillibles et ces problÃ¨mes restent des problÃ¨mes difficiles en informatique.
On peut par exemple citer le problÃ¨me du voyageur de commerce avec son nombre trÃ¨s important de contrainte qui le rend particuliÃ¨rement difficile Ã  rÃ©soudre.</p>

<p>Jâ€™ai crÃ©Ã© un programme se basant sur ce billet pour rÃ©soudre des grilles de sudoku.
Le code source est disponible <a href="https://github.com/smbct/blog_code/tree/master/sudoplex">ici</a>.
Le programme a Ã©tÃ© Ã©crit en c++ et utilise la bibliothÃ¨que <a href="https://www.gnu.org/software/glpk/">glpk</a> pour la rÃ©solution du problÃ¨me.
Les dÃ©tails pour le compiler se trouvent dans le readme. On peut remarquer en testant le programme que le temps de rÃ©solution est trÃ¨s court, malgrÃ© un nombre important de contrainte.</p>

<p>Enfin, il faut tout de mÃªme garder Ã  lâ€™esprit que la programmation linÃ©aire nâ€™est pas le seul moyen de rÃ©soudre ce problÃ¨me et quâ€™il nâ€™est pas le plus adaptÃ©.
Il donne ici un bon exemple de ce quâ€™il est possibles de faire en modÃ©lisation avec des variables binaires mais ce nâ€™est pas forcÃ©ment la mÃ©thode la plus rapide.</p>

<p>Pour finir je vous donne le rÃ©sultat de la rÃ©solution de la grille donnÃ©e plus haut.
Et bien sÃ»r, elle a Ã©tÃ© rÃ©solue avec le programme linÃ©aire !</p>

<table>
  <tbody>
    <tr>
      <td>1</td>
      <td>6</td>
      <td>9</td>
      <td>*</td>
      <td>4</td>
      <td>5</td>
      <td>3</td>
      <td>*</td>
      <td>8</td>
      <td>7</td>
      <td>2</td>
    </tr>
    <tr>
      <td>3</td>
      <td>4</td>
      <td>7</td>
      <td>*</td>
      <td>8</td>
      <td>9</td>
      <td>2</td>
      <td>*</td>
      <td>6</td>
      <td>5</td>
      <td>1</td>
    </tr>
    <tr>
      <td>2</td>
      <td>8</td>
      <td>5</td>
      <td>*</td>
      <td>6</td>
      <td>7</td>
      <td>1</td>
      <td>*</td>
      <td>4</td>
      <td>3</td>
      <td>9</td>
    </tr>
    <tr>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
    </tr>
    <tr>
      <td>9</td>
      <td>7</td>
      <td>1</td>
      <td>*</td>
      <td>5</td>
      <td>8</td>
      <td>6</td>
      <td>*</td>
      <td>2</td>
      <td>4</td>
      <td>3</td>
    </tr>
    <tr>
      <td>5</td>
      <td>3</td>
      <td>8</td>
      <td>*</td>
      <td>9</td>
      <td>2</td>
      <td>4</td>
      <td>*</td>
      <td>7</td>
      <td>1</td>
      <td>6</td>
    </tr>
    <tr>
      <td>6</td>
      <td>2</td>
      <td>4</td>
      <td>*</td>
      <td>1</td>
      <td>3</td>
      <td>7</td>
      <td>*</td>
      <td>9</td>
      <td>8</td>
      <td>5</td>
    </tr>
    <tr>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
      <td>*</td>
    </tr>
    <tr>
      <td>4</td>
      <td>9</td>
      <td>6</td>
      <td>*</td>
      <td>3</td>
      <td>1</td>
      <td>8</td>
      <td>*</td>
      <td>5</td>
      <td>2</td>
      <td>7</td>
    </tr>
    <tr>
      <td>7</td>
      <td>5</td>
      <td>3</td>
      <td>*</td>
      <td>2</td>
      <td>4</td>
      <td>9</td>
      <td>*</td>
      <td>1</td>
      <td>6</td>
      <td>8</td>
    </tr>
    <tr>
      <td>8</td>
      <td>1</td>
      <td>2</td>
      <td>*</td>
      <td>7</td>
      <td>6</td>
      <td>5</td>
      <td>*</td>
      <td>3</td>
      <td>9</td>
      <td>4</td>
    </tr>
  </tbody>
</table>]]></content><author><name>smbct</name></author><category term="vulgarisation" /><category term="IA" /><category term="optimisation" /><category term="IA" /><category term="jeux" /><summary type="html"><![CDATA[La programmation linÃ©aire est un formalisme permettant de traiter des problÃ¨mes trÃ¨s larges. Câ€™est ce que je voudrais montrer aujourdâ€™hui en donnant la modÃ©lisation sous forme dâ€™un programme linÃ©aire de la rÃ©solution dâ€™un sudoku. La modÃ©lisation va donc Ãªtre moins Ã©vidente quâ€™avec lâ€™exemple prÃ©sentÃ© dans lâ€™article sur la programmation linÃ©aire.]]></summary></entry><entry><title type="html">Programmation linÃ©aire</title><link href="https://smbct.github.io/blog/programmation-lineaire/" rel="alternate" type="text/html" title="Programmation linÃ©aire" /><published>2016-04-16T21:20:33+02:00</published><updated>2016-04-16T21:20:33+02:00</updated><id>https://smbct.github.io/blog/programmation-lineaire</id><content type="html" xml:base="https://smbct.github.io/blog/programmation-lineaire/"><![CDATA[<p>Pour un premier article, jâ€™ai choisi de parler dâ€™un sujet que je vais avoir probablement lâ€™occasion dâ€™Ã©voquer Ã  nouveau par la suite : la programmation linÃ©aire.
Pour commencer, clarifions un peu les termes. Le mot programmation ne signifie pas ici Ã©crire des lignes de code, contrairement Ã  ce que lâ€™on pourrait penser. Programmer veut ici dire planifier. La programmation linÃ©aire (ou encore optimisation linÃ©aire) regroupe un ensemble de problÃ¨mes dâ€™optimisation, et des mÃ©thodes efficaces pour les traiter.</p>

<blockquote class="prompt-info">
  <p>Mais au fait, câ€™est quoi lâ€™optimisation finalement ?</p>
</blockquote>

<p>Optimiser, câ€™est essayer de faire de la meilleure faÃ§on possible. Cela peut concerner le fait de partir dâ€™une faÃ§on de faire, dâ€™une procÃ©dure, dâ€™un plan, et trouver des moyens de lâ€™amÃ©liorer pour traiter au mieux une situation. Cela peut aussi concerner le fait de prÃ©voir Ã  lâ€™avance quelle va Ãªtre la meilleure stratÃ©gie pour attaquer un problÃ¨me. Lâ€™amÃ©liorer peut alors vouloir dire gagner du temps, rÃ©duire des dÃ©penses, maximiser ses chances, etcâ€¦</p>

<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

<h2 id="loptimisation-en-maths-et-en-info">Lâ€™optimisation en maths et en info</h2>

<p>En mathÃ©matiques, lâ€™optimisation est une notion trÃ¨s prÃ©cise. Optimiser signifie trouver les valeurs maximale et minimale que peut atteindre une fonction.</p>

<blockquote class="prompt-info">
  <p>Et pourquoi un maximum ou un minimum ?</p>
</blockquote>

<p>Il nâ€™est pas forcÃ©ment Ã©vident aux premiers abords quâ€™un problÃ¨me dâ€™optimisation est un problÃ¨me de recherche de maximum ou de minimum. Cependant, en y rÃ©flÃ©chissant, derriÃ¨re tout problÃ¨me dâ€™optimisation se cache un min ou un max. Par exemple, dans certaines situations, on veut optimiser le temps mis pour faire une action. Cela veut alors dire prendre le moins de temps possible. On cherche bien un minimum. Dans dâ€™autres contextes, on peut aussi chercher Ã  optimiser un gain. On cherche alors Ã  obtenir le gain maximum.</p>

<p>Donc si lâ€™on veut traduire un problÃ¨me dâ€™optimisation naturel en problÃ¨me mathÃ©matique, cela consiste donc Ã  trouver une fonction qui exprime le mieux possible la quantitÃ© Ã  optimiser (que Ã§a soit du temps, de lâ€™argent, etcâ€¦)</p>

<p>Passer dâ€™un problÃ¨me rÃ©el Ã  un problÃ¨me mathÃ©matique, câ€™est lâ€™action de modÃ©liser. Une des premiÃ¨re chose Ã  faire pour modÃ©liser un problÃ¨me, câ€™est identifier les variables. Les variables sont impliquÃ©es de le calcul de la fonction Ã  optimiser. Elles correspondent pour le problÃ¨me rÃ©el aux diffÃ©rentes dÃ©cisions que lâ€™on peut prendre (par exemple, â€œcombien dâ€™unitÃ© produire ?â€ ou encore â€œdoit-on activer cette option ?â€).</p>

<p>Une autre chose que lâ€™on doit prendre en compte lorsque lâ€™on optimise est la prÃ©sence de contraintes. En effet, les variables de notre fonction (que lâ€™on appelle variables de dÃ©cision) ne peuvent pas prendre nâ€™importe quelles valeurs ! Par exemple, si nos variables concernent un nombre dâ€™unitÃ© Ã  produire, on ne peut pas Ã©videmment pas produire en quantitÃ© infinie. Les ressources disponibles entre donc en compte dans ce type de problÃ¨me. Par ailleurs, les contraintes apparaissent parfois de maniÃ¨re plus subtile.</p>

<blockquote class="prompt-info">
  <p>Mais alors, pourquoi parler dâ€™informatique ?</p>
</blockquote>

<p>Comme on lâ€™a vu prÃ©cÃ©demment, les mathÃ©matiques nous offrent des outils puissants pour traiter les problÃ¨mes dâ€™optimisation. En effet, une fois que le problÃ¨me est modÃ©lisÃ©, on peut appliquer des thÃ©orÃ¨mes pour calculer le maximum ou le minimum de fonctions.</p>

<p>Cependant, les problÃ¨mes que lâ€™on veut rÃ©soudre peuvent parfois comporter des milliers de variables. On ne peut donc plus espÃ©rer rÃ©soudre ces problÃ¨mes Ã  la main. Câ€™est pourquoi il a fallut mettre en place des algorithmes capable de calculer ce genre de chose le plus rapidement possible.</p>

<p>ImplÃ©menter des mÃ©thodes de calculs automatiques ne suffit toutefois pas Ã  rÃ©soudre tous les problÃ¨mes. Certains problÃ¨mes sont en effet par nature trÃ¨s difficiles Ã  rÃ©soudre et les algorithmes gÃ©nÃ©raux prennent Ã©normÃ©ment de temps. Les outils mathÃ©matiques sont limitÃ©s pour ces problÃ¨mes. Il est donc nÃ©cessaire de les Ã©tudier en profondeur afin de trouver des techniques algorithmiques adaptÃ©es pour la rÃ©solution.</p>

<blockquote class="prompt-info">
  <p>Une des caractÃ©ristiques du domaine est quâ€™il nâ€™existe pas de mÃ©thode gÃ©nÃ©rale efficace pour traiter nâ€™importe quel problÃ¨me.</p>
</blockquote>

<h2 id="la-programmation-linÃ©aire-dans-tout-Ã§a">La programmation linÃ©aire dans tout Ã§a</h2>

<p>La programmation linÃ©aire dÃ©signe un ensemble de rÃ¨gles que lâ€™on se donne pour reprÃ©senter sous forme mathÃ©matique un problÃ¨me rÃ©el. Le but du jeu est de reprÃ©senter notre problÃ¨me concret sous forme dâ€™une fonction mathÃ©matique et dâ€™un ensemble de contraintes, en respectant ces rÃ¨gles.</p>

<p>En programmation linÃ©aire, on considÃ¨re donc une fonction Ã  optimiser, sous plusieurs contrainte. La limite imposÃ©e est le fait que la fonction et les contraintes doivent Ãªtre linÃ©aires. Cela signifie que, dans lâ€™expression de la fonction et des contraintes a la forme dâ€™une somme de variables multipliÃ©es par de coefficients. On ne peut ainsi pas multiplier deux variables, diviser deux variables, appliquer une racine, etcâ€¦</p>

<p>Ces limitations peuvent paraÃ®tre trÃ¨s contraignantes. Cependant, un trÃ¨s grand nombre de problÃ¨mes rÃ©els peuvent se modÃ©liser de cette faÃ§on. Parfois, il faut avoir recours Ã  certains tricks mais ceux-ci sont facilement intÃ©grÃ©s par expÃ©rience. Il faut enfin retenir que si lâ€™on se contraint, câ€™est parceque les mÃ©thodes algorithmiques disponibles pour ces problÃ¨mes sont trÃ¨s efficaces. Il vaut donc mieux se creuser la tÃªte et trouver une bonne modÃ©lisation en programmation linÃ©aire plutÃ´t que dâ€™avoir Ã  rÃ©soudre un problÃ¨me non linÃ©aire.</p>

<h2 id="un-premier-exemple-de-modÃ©lisation">Un premier exemple de modÃ©lisation</h2>

<p>Prenons un premier exemple de modÃ©lisation.</p>

<p><img src="/assets/cookies.jpg" alt="Des cookies !" /></p>

<p>Partons dâ€™une situation simple : nous allons recevoir des invitÃ©s et nous voulons leur prÃ©parer deux types de petits biscuits. Les deux demandent les mÃªmes ingrÃ©dients : de la farine et du sucre.</p>

<p>Mais voilÃ , nous disposons de ces deux ingrÃ©dients en quantitÃ© limitÃ© malheureusement. De plus, les convives Ã  qui sont destinÃ©s ces biscuits nâ€™ont pas tous les mÃªmes goÃ»ts. Ainsi, il ne faut pas produire les deux types de biscuits en mÃªme quantitÃ©. La question est alors : combien de biscuit de chaque type produire ? Dans lâ€™exemple prÃ©sentÃ©, les donnÃ©es sont issues de recettes respectives de madeleines et de biscuits Ã  la cannelle.</p>

<h3 id="les-variables-du-problÃ¨me">Les variables du problÃ¨me</h3>

<p>La premiÃ¨re Ã©tape de la modÃ©lisation consiste Ã  trouver les variables du problÃ¨me. Ici, les variables sont faciles Ã  trouver. La question concerne directement le nombre de biscuit Ã  produire. On dÃ©finit donc deux variables : \(x_1\) reprÃ©sentant le nombre de biscuit de type 1 que lâ€™on veut crÃ©er et \(x_2\) reprÃ©sentant le nombre de biscuit de type 2.</p>

<h3 id="les-contraintes">Les contraintes</h3>

<p>Une fois les variables trouvÃ©es, on peut regarder les contraintes. Pour ce problÃ¨me, il y a deux contraintes liÃ©es aux ressources disponible (farine et sucre), une contrainte concernant les convives et enfin des contraintes plus gÃ©nÃ©rales, et enfin des contraintes structurelles.</p>

<p>Tout dâ€™abord, on peut dÃ©finir la contrainte pour la farine. On suppose que lâ€™on dispose dâ€™un kilogramme de farine. La recette nous indique Ã©galement quâ€™il faut 4.2 g de farine pour un biscuit de type 1 et 15 g de farine pour les biscuits de type 2. On en dÃ©duit donc la contrainte \(4.2 x_1 + 15 x_2 \leq 1000\).</p>

<p>On procÃ¨de de maniÃ¨re similaire pour le sucre. On obtient : \(5.8 x_1 + 7.5 x_2 \leq 1000\).</p>

<p>La contrainte suivante traduit une prÃ©fÃ©rence des convives. On suppose quâ€™un quart de invitÃ©s nâ€™aime pas les biscuits du type 1. Par ailleurs, il nâ€™y a pas de prÃ©fÃ©rence pour ceux du type 2. On en dÃ©duit : \(x_1 \leq \frac{1}{4} (x_1 + x_2)\)</p>

<p>Enfin, on ne peut pas produire un nombre nÃ©gatif de biscuit. On a donc \(x_1, x_2 \geq 0\). De plus, on ne peut pas produire de demi-biscuit. Heureusement, en programmation linÃ©aire, nous pouvons rÃ©soudre des problÃ¨mes avec des variables dites entiÃ¨res. On a donc comme derniÃ¨re contrainte : \(x_1, x_2 \in \mathbb{Z}\).</p>

<h3 id="la-fonction-objectif">La fonction objectif</h3>

<p>Il ne reste plus quâ€™Ã  Ã©crire la fonction Ã  optimiser. Ici, on veut maximiser la nombre de gÃ¢teau produit. La fonction est donc \(z = x_1 + x_2\).</p>

<p>On peut donc rÃ©capituler le modÃ¨le de notre problÃ¨me :</p>

\[\text{max} \,z = x_{1} + x_{2}\\
	 \begin{align*}
		s.c.\quad 4.2 x_1 + 15 x_2 &amp;\leq 1000 \\
			5.8 x_1 + 7.5 x_2 &amp;\leq 1000 \\
			x_1 &amp;\leq \frac{1}{4} (x_1 + x_2) \\
			x_1, x_2 &amp;\in \mathbb{N}
	\end{align*}\]

<p>Je passe les dÃ©tails de la rÃ©solution de ce problÃ¨me car cela nÃ©cessiterait plusieurs articles. Elle est nÃ©anmoins basÃ©e sur la mÃ©thode du branch and bound et lâ€™algorithme du simplexe. AprÃ¨s rÃ©solution, on trouve \(x_1 = 20\) et \(x_2 = 61\). Nous allons donc pouvoir confectionner 81 gÃ¢teaux pour nos invitÃ©s.</p>

<h2 id="conclusion">Conclusion</h2>

<p>La programmation linÃ©aire est donc un outil trÃ¨s intÃ©ressant pour lâ€™optimisation. Malheureusement, ce nâ€™est pas un outil infaillible. MÃªme si les algorithmes utilisÃ©s pour rÃ©soudre ces problÃ¨mes sont trÃ¨s efficaces en variable continues (câ€™est Ã  dire lorsque les variables ne sont pas forcÃ©ment des entiers), ce nâ€™est pas la mÃªme chose pour les variables entiÃ¨res ou binaires. Lâ€™idÃ©e est alors de profiter de toutes les spÃ©cificitÃ©s du problÃ¨me que lâ€™on traite afin dâ€™en tirer avantage et de proposer des mÃ©thodes de rÃ©solution dÃ©diÃ©es. Parfois, on dÃ©cide carrÃ©ment de quitter le formalisme de la programmation linÃ©aire et de traiter le problÃ¨me avec un autre outil mieux adaptÃ© (ex : les graphes). Les problÃ¨mes dâ€™optimisation sont donc loin dâ€™Ãªtre parfaitement maÃ®trisÃ©s et cet article nâ€™effleure que trÃ¨s lÃ©gÃ¨rement toutes les choses que lâ€™on peut faire en optimisation.</p>

<h2 id="crÃ©dit">CrÃ©dit</h2>

<p>photo credit: <a href="http://www.flickr.com/photos/7702423@N04/26056556830">297/365/2853 (April 3, 2016) - Chocolate Coconut Cookies</a> via <a href="http://photopin.com">photopin</a> <a href="https://creativecommons.org/licenses/by-nc-sa/2.0/">(license)</a></p>]]></content><author><name>smbct</name></author><category term="vulgarisation" /><category term="IA" /><summary type="html"><![CDATA[Pour un premier article, jâ€™ai choisi de parler dâ€™un sujet que je vais avoir probablement lâ€™occasion dâ€™Ã©voquer Ã  nouveau par la suite : la programmation linÃ©aire. Pour commencer, clarifions un peu les termes. Le mot programmation ne signifie pas ici Ã©crire des lignes de code, contrairement Ã  ce que lâ€™on pourrait penser. Programmer veut ici dire planifier. La programmation linÃ©aire (ou encore optimisation linÃ©aire) regroupe un ensemble de problÃ¨mes dâ€™optimisation, et des mÃ©thodes efficaces pour les traiter.]]></summary></entry></feed>